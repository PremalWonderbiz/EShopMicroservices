This file is a merged representation of the entire codebase, combining all repository files into a single document.
Generated by Repomix on: 2026-01-29 15:57:55

# File Summary

## Purpose:

This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

## File Format:

The content is organized as follows:
1. This summary section
2. Repository information
3. Repository structure
4. Multiple file entries, each consisting of:
   a. A header with the file path (## File: path/to/file)
   b. The full contents of the file in a code block

## Usage Guidelines:

- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.

## Notes:

- Some files may have been excluded based on .gitignore rules and Repomix's
  configuration.
- Binary files are not included in this packed representation. Please refer to
  the Repository Structure section for a complete list of file paths, including
  binary files.

## Additional Information:

For more information about Repomix, visit: https://github.com/andersonby/python-repomix


# Repository Structure

```
.dockerignore
ApiGateways
  YarpApiGateway
    appsettings.Development.json
    appsettings.json
    appsettings.Local.json
    Dockerfile
    Program.cs
    Properties
      launchSettings.json
    YarpApiGateway.csproj
bin
  Debug
    appsettings.Development.json
    appsettings.json
    appsettings.Local.json
    BasketAPI.runtimeconfig.json
    BasketAPI.staticwebassets.endpoints.json
    CatalogAPI.runtimeconfig.json
    CatalogAPI.staticwebassets.endpoints.json
    DiscountGrpc.runtimeconfig.json
    DiscountGrpc.staticwebassets.endpoints.json
    OrderingAPI.runtimeconfig.json
    OrderingAPI.staticwebassets.endpoints.json
    YarpApiGateway.runtimeconfig.json
    YarpApiGateway.staticwebassets.endpoints.json
  Release
    appsettings.Development.json
    appsettings.json
    BasketAPI.runtimeconfig.json
    BasketAPI.staticwebassets.endpoints.json
    CatalogAPI.runtimeconfig.json
    CatalogAPI.staticwebassets.endpoints.json
BuildingBlocks
  BuildingBlocks
    Behaviours
      LoggingBehaviour.cs
      ValidationBehaviour.cs
    BuildingBlocks.csproj
    CQRS
      ICommand.cs
      ICommandHandler.cs
      IQuery.cs
      IQueryHandler.cs
    Exceptions
      BadRequestException.cs
      Handler
        CustomExceptionHandler.cs
      InternalServerException.cs
      NotFoundException.cs
    Pagination
      PaginatedResult.cs
      PaginationRequest.cs
  BuildingBlocksMessaging
    BuildingBlocksMessaging.csproj
    Class1.cs
    Events
      BasketCheckoutEvent.cs
      IntegrationEvent.cs
docker-compose.dcproj
docker-compose.override.yml
docker-compose.yml
eshop-microservices.slnx
launchSettings.json
obj
  Debug
    docker-c.35A3FFBA.Up2Date
    docker-compose.dcproj.FileListAbsolute.txt
  Docker
    docker-compose.vs.debug.g.yml
    docker-compose.vs.debug.partial.g.yml
    docker-compose.vs.release.g.yml
    docker-compose.vs.release.partial.g.yml
  Release
    docker-c.35A3FFBA.Up2Date
    docker-compose.dcproj.FileListAbsolute.txt
services
  basket
    BasketAPI
      appsettings.Development.json
      Basket
        CheckoutBasket
          CheckoutBasketEndpoint.cs
          CheckoutBasketHandler.cs
        DeleteBasket
          DeleteBasketEndpoint.cs
          DeleteBasketHandler.cs
        GetBasket
          GetBasketEndpoint.cs
          GetBasketHandler.cs
        StoreBasket
          StoreBasketEndpoint.cs
          StoreBasketHandler.cs
      BasketAPI.csproj
      Data
        BasketRepository.cs
        CachedBasketRepository.cs
        IBasketRepository.cs
      Dockerfile
      Dockerfile.original
      Dtos
        BasketCheckoutDto.cs
      Exceptions
        BasketNotFoundException.cs
      GlobalUsings.cs
      Models
        ShoppingCart.cs
        ShoppingCartItem.cs
      Program.cs
      Properties
        launchSettings.json
  catalog
    CatalogAPI
      appsettings.Development.json
      appsettings.json
      CatalogAPI.csproj
      Data
        CatalogInitialData.cs
      Dockerfile
      Dockerfile.original
      Exceptions
        ProductNotFoundException.cs
      GlobalUsings.cs
      Models
        Product.cs
      Products
        CreateProduct
          CreateProductEndpoint.cs
          CreateProductHandler.cs
        DeleteProduct
          DeleteProductEndpoint.cs
          DeleteProductHandler.cs
        GetProductByCategory
          GetProductByCategoryEndpoint.cs
          GetProductByCategoryHandler.cs
        GetProductById
          GetProductByIdEndpoint.cs
          GetProductByIdHandler.cs
        GetProducts
          GetProductsEndpoint.cs
          GetProductsHandler.cs
        UpadateProduct
          UpdateProductEndpoint.cs
          UpdateProductHandler.cs
      Program.cs
      Properties
        launchSettings.json
  discount
    DiscountGrpc
      appsettings.Development.json
      appsettings.json
      Data
        DiscountContext.cs
        Extentions.cs
      DiscountGrpc.csproj
      Dockerfile
      Migrations
        20260116154734_InitialCreate.Designer.cs
        20260119062353_Amount datatype change in coupon model.cs
        20260119062353_Amount datatype change in coupon model.Designer.cs
        DiscountContextModelSnapshot.cs
      Models
        Coupon.cs
      Program.cs
      Properties
        launchSettings.json
      Protos
        discount.proto
      Services
        DiscountService.cs
  ordering
    OrderingAPI
      appsettings.Development.json
      DependencyInjection.cs
      Dockerfile
      Dockerfile.original
      Endpoints
        CreateOrder.cs
        DeleteOrder.cs
        GetOrders.cs
        GetOrdersByCustomer.cs
        GetOrdersByName.cs
        UpdateOrder.cs
      GlobalUsing.cs
      OrderingAPI.csproj
      Program.cs
      Properties
        launchSettings.json
    OrderingApplication
      Data
        IApplicationDbContext.cs
      DependencyInjection.cs
      Dtos
        AddressDto.cs
        OrderDto.cs
        OrderItemDto.cs
        PaymentDto.cs
      Exceptions
        OrderNotFoundException.cs
      Extensions
        OrderExtensions.cs
      GlobalUsing.cs
      OrderingApplication.csproj
      Orders
        Commands
          CreateOrder
            CreateOrderCommand.cs
            CreateOrderHandler.cs
          DeleteOrder
            DeleteOrderCommand.cs
            DeleteOrderHandler.cs
          UpadateOrder
            UpdateOrderCommand.cs
            UpdateOrderHandler.cs
        EventHandlers
          Domain
            OrderCreatedEventHandler.cs
            OrderUpdatedEventHandler.cs
          Integration
            BasketCheckoutEventHandler.cs
        Queries
          GetOrders
            GetOrdersHandler.cs
            GetOrdersQuery.cs
          GetOrdersByCustomer
            GetOrdersByCustomerHandler.cs
            GetOrdersByCustomerQuery.cs
          GetOrdersByName
            GetOrdersByNameHandler.cs
            GetOrdersByNameQuery.cs
    OrderingDomain
      Abstractions
        Aggregate.cs
        Entity.cs
        IAggregate.cs
        IDomainEvent.cs
        IEntity.cs
      Enums
        OrderStatus.cs
      Events
        OrderCreatedEvent.cs
        OrderUpdatedEvent.cs
      Exceptions
        DomainException.cs
      GlobalUsing.cs
      Models
        Customer.cs
        Order.cs
        OrderItem.cs
        Product.cs
      OrderingDomain.csproj
      ValueObjects
        Address.cs
        CustomerId.cs
        OrderId.cs
        OrderItemId.cs
        OrderName.cs
        Payment.cs
        ProductId.cs
    OrderingInfrastructure
      Data
        ApplicationDbContext.cs
        Configurations
          CustomerConfiguration.cs
          OrderConfiguration.cs
          OrderItemConfiguration.cs
          ProductConfiguration.cs
        Extentions
          DatabaseExtentions.cs
          InitialData.cs
        Interceptors
          AuditableEntityInterceptor.cs
          DispatchDomainEventInterceptor.cs
        Migrations
          20260120091721_InitialCreate.Designer.cs
          ApplicationDbContextModelSnapshot.cs
      DependencyInjection.cs
      GlobalUsing.cs
      OrderingInfrastructure.csproj
WebApps
  shopping-web-react
    .gitignore
    docs
      pages
        checkout.md
      store
        cartStore.md
    eslint.config.js
    index.html
    package.json
    README.md
    src
      api
        basketService.ts
        catalogService.ts
        orderingService.ts
      App.css
      App.tsx
      components
        cart
          CartItem.tsx
        common
          ErrorBoundary.tsx
          Footer.tsx
          Header.tsx
          Loading.tsx
        order
          OrderItem.tsx
        product
          ProductCard.tsx
          ProductItem.tsx
          TopProduct.tsx
      config
        constants.ts
      hooks
        useCart.ts
        useOrders.ts
        useProducts.ts
      index.css
      main.tsx
      pages
        Cart.tsx
        Checkout.tsx
        Confirmation.tsx
        Contact.tsx
        Error.tsx
        Home.tsx
        OrderList.tsx
        Privacy.tsx
        ProductDetail.tsx
        ProductList.tsx
      router.tsx
      store
        cartStore.ts
        userStore.ts
      styles
        global.css
      types
        cart.ts
        order.ts
        product.ts
      utils
        formatters.ts
        validators.ts
    tsconfig.app.json
    tsconfig.json
    tsconfig.node.json
    vite.config.ts
```

# Repository Files


## .dockerignore

```text
**/.classpath
**/.dockerignore
**/.env
**/.git
**/.gitignore
**/.project
**/.settings
**/.toolstarget
**/.vs
**/.vscode
**/*.*proj.user
**/*.dbmdl
**/*.jfm
**/azds.yaml
**/bin
**/charts
**/docker-compose*
**/Dockerfile*
**/node_modules
**/npm-debug.log
**/obj
**/secrets.dev.yaml
**/values.dev.yaml
LICENSE
README.md
!**/.gitignore
!.git/HEAD
!.git/config
!.git/packed-refs
!.git/refs/heads/**
```

## ApiGateways/YarpApiGateway/appsettings.Development.json

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  }
}
```

## ApiGateways/YarpApiGateway/appsettings.json

```json
{
  "ReverseProxy": {
    "Routes": {
      "catalog-route": {
        "ClusterId": "catalog-cluster",
        "Match": {
          "Path": "/catalog-service/{**catch-all}"
        },
        "Transforms": [ { "PathPattern": "{**catch-all}" } ]
      },
      "basket-route": {
        "ClusterId": "basket-cluster",
        "Match": {
          "Path": "/basket-service/{**catch-all}"
        },
        "Transforms": [ { "PathPattern": "{**catch-all}" } ]
      },
      "ordering-route": {
        "ClusterId": "ordering-cluster",
        "RateLimiterPolicy": "fixed",
        "Match": {
          "Path": "/ordering-service/{**catch-all}"
        },
        "Transforms": [ { "PathPattern": "{**catch-all}" } ]
      }
    },
    "Clusters": {
      "catalog-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://catalogapi:8080/"
          }
        }
      },
      "basket-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://basketapi:8080/"
          }
        }
      },
      "ordering-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://orderingapi:8080/"
          }
        }
      }
    }
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*"
}
```

## ApiGateways/YarpApiGateway/appsettings.Local.json

```json
{
  "ReverseProxy": {
    "Routes": {
      "catalog-route": {
        "ClusterId": "catalog-cluster",
        "Match": {
          "Path": "/catalog-service/{**catch-all}"
        },
        "Transforms": [ { "PathPattern": "{**catch-all}" } ]
      },
      "basket-route": {
        "ClusterId": "basket-cluster",
        "Match": {
          "Path": "/basket-service/{**catch-all}"
        },
        "Transforms": [ { "PathPattern": "{**catch-all}" } ]
      },
      "ordering-route": {
        "ClusterId": "ordering-cluster",
        "RateLimiterPolicy": "fixed",
        "Match": {
          "Path": "/ordering-service/{**catch-all}"
        },
        "Transforms": [ { "PathPattern": "{**catch-all}" } ]
      }
    },
    "Clusters": {
      "catalog-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:6000/"
          }
        }
      },
      "basket-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:6001/"
          }
        }
      },
      "ordering-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:6003/"
          }
        }
      }
    }
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*"
}
```

## ApiGateways/YarpApiGateway/Dockerfile

```text
# See https://aka.ms/customizecontainer to learn how to customize your debug container and how Visual Studio uses this Dockerfile to build your images for faster debugging.

# This stage is used when running from VS in fast mode (Default for Debug configuration)
FROM mcr.microsoft.com/dotnet/aspnet:10.0 AS base
USER $APP_UID
WORKDIR /app
EXPOSE 8080
EXPOSE 8081


# This stage is used to build the service project
FROM mcr.microsoft.com/dotnet/sdk:10.0 AS build
ARG BUILD_CONFIGURATION=Release
WORKDIR /src
COPY ["ApiGateways/YarpApiGateway/YarpApiGateway.csproj", "ApiGateways/YarpApiGateway/"]
RUN dotnet restore "./ApiGateways/YarpApiGateway/YarpApiGateway.csproj"
COPY . .
WORKDIR "/src/ApiGateways/YarpApiGateway"
RUN dotnet build "./YarpApiGateway.csproj" -c $BUILD_CONFIGURATION -o /app/build

# This stage is used to publish the service project to be copied to the final stage
FROM build AS publish
ARG BUILD_CONFIGURATION=Release
RUN dotnet publish "./YarpApiGateway.csproj" -c $BUILD_CONFIGURATION -o /app/publish /p:UseAppHost=false

# This stage is used in production or when running from VS in regular mode (Default when not using the Debug configuration)
FROM base AS final
WORKDIR /app
COPY --from=publish /app/publish .
ENTRYPOINT ["dotnet", "YarpApiGateway.dll"]
```

## ApiGateways/YarpApiGateway/Program.cs

```text
using Microsoft.AspNetCore.RateLimiting;

var builder = WebApplication.CreateBuilder(args);

// Add services to the container
builder.Services.AddReverseProxy()
    .LoadFromConfig(builder.Configuration.GetSection("ReverseProxy"));

builder.Services.AddRateLimiter(ratelimitingoptions =>
{
    ratelimitingoptions.AddFixedWindowLimiter("fixed", options =>
    {
        options.Window = TimeSpan.FromSeconds(10);
        options.PermitLimit = 5;
    });
});

// Add CORS policy allowing any origin and any method (and any header) for now
builder.Services.AddCors(options =>
{
    options.AddPolicy("AllowAll", policy =>
    {
        policy.AllowAnyOrigin()
              .AllowAnyMethod()
              .AllowAnyHeader();
    });
});

var app = builder.Build();

// Configure the Http request pipeline
app.UseRateLimiter();
app.UseCors("AllowAll");

app.MapReverseProxy();

app.Run();
```

## ApiGateways/YarpApiGateway/Properties/launchSettings.json

```json
{
  "profiles": {
    "http": {
      "commandName": "Project",
      "launchBrowser": false,
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Local"
      },
      "dotnetRunMessages": true,
      "applicationUrl": "http://localhost:5004"
    },
    "https": {
      "commandName": "Project",
      "launchBrowser": false,
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Local"
      },
      "dotnetRunMessages": true,
      "applicationUrl": "https://localhost:5054;http://localhost:5004"
    },
    "Container (Dockerfile)": {
      "commandName": "Docker",
      "launchBrowser": true,
      "launchUrl": "{Scheme}://{ServiceHost}:{ServicePort}",
      "environmentVariables": {
        "ASPNETCORE_HTTPS_PORTS": "8081",
        "ASPNETCORE_HTTP_PORTS": "8080"
      },
      "publishAllPorts": true,
      "useSSL": true
    }
  },
  "$schema": "https://json.schemastore.org/launchsettings.json"
}
```

## ApiGateways/YarpApiGateway/YarpApiGateway.csproj

```text
<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
    <UserSecretsId>8065b74a-fc3c-40f5-a2e5-76b5db52975e</UserSecretsId>
    <DockerDefaultTargetOS>Linux</DockerDefaultTargetOS>
    <DockerfileContext>..\..</DockerfileContext>
    <DockerComposeProjectPath>..\..\docker-compose.dcproj</DockerComposeProjectPath>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.VisualStudio.Azure.Containers.Tools.Targets" Version="1.23.0" />
    <PackageReference Include="Yarp.ReverseProxy" Version="2.3.0" />
  </ItemGroup>

</Project>
```

## bin/Debug/appsettings.Development.json

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  }
}
```

## bin/Debug/appsettings.json

```json
{
  "ReverseProxy": {
    "Routes": {
      "catalog-route": {
        "ClusterId": "catalog-cluster",
        "Match": {
          "Path": "/catalog-service/{**catch-all}"
        },
        "Transforms": [ { "PathPattern": "{**catch-all}" } ]
      },
      "basket-route": {
        "ClusterId": "basket-cluster",
        "Match": {
          "Path": "/basket-service/{**catch-all}"
        },
        "Transforms": [ { "PathPattern": "{**catch-all}" } ]
      },
      "ordering-route": {
        "ClusterId": "ordering-cluster",
        "RateLimiterPolicy": "fixed",
        "Match": {
          "Path": "/ordering-service/{**catch-all}"
        },
        "Transforms": [ { "PathPattern": "{**catch-all}" } ]
      }
    },
    "Clusters": {
      "catalog-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://catalogapi:8080/"
          }
        }
      },
      "basket-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://basketapi:8080/"
          }
        }
      },
      "ordering-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://orderingapi:8080/"
          }
        }
      }
    }
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*"
}
```

## bin/Debug/appsettings.Local.json

```json
{
  "ReverseProxy": {
    "Routes": {
      "catalog-route": {
        "ClusterId": "catalog-cluster",
        "Match": {
          "Path": "/catalog-service/{**catch-all}"
        },
        "Transforms": [ { "PathPattern": "{**catch-all}" } ]
      },
      "basket-route": {
        "ClusterId": "basket-cluster",
        "Match": {
          "Path": "/basket-service/{**catch-all}"
        },
        "Transforms": [ { "PathPattern": "{**catch-all}" } ]
      },
      "ordering-route": {
        "ClusterId": "ordering-cluster",
        "RateLimiterPolicy": "fixed",
        "Match": {
          "Path": "/ordering-service/{**catch-all}"
        },
        "Transforms": [ { "PathPattern": "{**catch-all}" } ]
      }
    },
    "Clusters": {
      "catalog-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:6000/"
          }
        }
      },
      "basket-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:6001/"
          }
        }
      },
      "ordering-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:6003/"
          }
        }
      }
    }
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*"
}
```

## bin/Debug/BasketAPI.runtimeconfig.json

```json
{
  "runtimeOptions": {
    "tfm": "net10.0",
    "frameworks": [
      {
        "name": "Microsoft.NETCore.App",
        "version": "10.0.0"
      },
      {
        "name": "Microsoft.AspNetCore.App",
        "version": "10.0.0"
      }
    ],
    "configProperties": {
      "System.GC.Server": true,
      "System.Runtime.Serialization.EnableUnsafeBinaryFormatterSerialization": false
    }
  }
}
```

## bin/Debug/BasketAPI.staticwebassets.endpoints.json

```json
{"Version":1,"ManifestType":"Build","Endpoints":[]}
```

## bin/Debug/CatalogAPI.runtimeconfig.json

```json
{
  "runtimeOptions": {
    "tfm": "net10.0",
    "frameworks": [
      {
        "name": "Microsoft.NETCore.App",
        "version": "10.0.0"
      },
      {
        "name": "Microsoft.AspNetCore.App",
        "version": "10.0.0"
      }
    ],
    "configProperties": {
      "System.GC.Server": true,
      "System.Runtime.Serialization.EnableUnsafeBinaryFormatterSerialization": false
    }
  }
}
```

## bin/Debug/CatalogAPI.staticwebassets.endpoints.json

```json
{"Version":1,"ManifestType":"Build","Endpoints":[]}
```

## bin/Debug/DiscountGrpc.runtimeconfig.json

```json
{
  "runtimeOptions": {
    "tfm": "net10.0",
    "frameworks": [
      {
        "name": "Microsoft.NETCore.App",
        "version": "10.0.0"
      },
      {
        "name": "Microsoft.AspNetCore.App",
        "version": "10.0.0"
      }
    ],
    "configProperties": {
      "System.GC.Server": true,
      "System.Reflection.NullabilityInfoContext.IsSupported": true,
      "System.Runtime.Serialization.EnableUnsafeBinaryFormatterSerialization": false
    }
  }
}
```

## bin/Debug/DiscountGrpc.staticwebassets.endpoints.json

```json
{"Version":1,"ManifestType":"Build","Endpoints":[]}
```

## bin/Debug/OrderingAPI.runtimeconfig.json

```json
{
  "runtimeOptions": {
    "tfm": "net10.0",
    "frameworks": [
      {
        "name": "Microsoft.NETCore.App",
        "version": "10.0.0"
      },
      {
        "name": "Microsoft.AspNetCore.App",
        "version": "10.0.0"
      }
    ],
    "configProperties": {
      "System.GC.Server": true,
      "System.Reflection.NullabilityInfoContext.IsSupported": true,
      "System.Runtime.Serialization.EnableUnsafeBinaryFormatterSerialization": false
    }
  }
}
```

## bin/Debug/OrderingAPI.staticwebassets.endpoints.json

```json
{"Version":1,"ManifestType":"Build","Endpoints":[]}
```

## bin/Debug/YarpApiGateway.runtimeconfig.json

```json
{
  "runtimeOptions": {
    "tfm": "net10.0",
    "frameworks": [
      {
        "name": "Microsoft.NETCore.App",
        "version": "10.0.0"
      },
      {
        "name": "Microsoft.AspNetCore.App",
        "version": "10.0.0"
      }
    ],
    "configProperties": {
      "System.GC.Server": true,
      "System.Runtime.Serialization.EnableUnsafeBinaryFormatterSerialization": false
    }
  }
}
```

## bin/Debug/YarpApiGateway.staticwebassets.endpoints.json

```json
{"Version":1,"ManifestType":"Build","Endpoints":[]}
```

## bin/Release/appsettings.Development.json

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  }
}
```

## bin/Release/appsettings.json

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "ConnectionStrings": {
    "Database": "Server=localhost;Port=5432;Database=CatalogDb;User Id=postgres;Password=postgres;Include Error Detail=true"
  }
}
```

## bin/Release/BasketAPI.runtimeconfig.json

```json
{
  "runtimeOptions": {
    "tfm": "net10.0",
    "frameworks": [
      {
        "name": "Microsoft.NETCore.App",
        "version": "10.0.0"
      },
      {
        "name": "Microsoft.AspNetCore.App",
        "version": "10.0.0"
      }
    ],
    "configProperties": {
      "System.GC.Server": true,
      "System.Reflection.Metadata.MetadataUpdater.IsSupported": false,
      "System.Runtime.Serialization.EnableUnsafeBinaryFormatterSerialization": false
    }
  }
}
```

## bin/Release/BasketAPI.staticwebassets.endpoints.json

```json
{"Version":1,"ManifestType":"Build","Endpoints":[]}
```

## bin/Release/CatalogAPI.runtimeconfig.json

```json
{
  "runtimeOptions": {
    "tfm": "net10.0",
    "frameworks": [
      {
        "name": "Microsoft.NETCore.App",
        "version": "10.0.0"
      },
      {
        "name": "Microsoft.AspNetCore.App",
        "version": "10.0.0"
      }
    ],
    "configProperties": {
      "System.GC.Server": true,
      "System.Reflection.Metadata.MetadataUpdater.IsSupported": false,
      "System.Runtime.Serialization.EnableUnsafeBinaryFormatterSerialization": false
    }
  }
}
```

## bin/Release/CatalogAPI.staticwebassets.endpoints.json

```json
{"Version":1,"ManifestType":"Build","Endpoints":[]}
```

## BuildingBlocks/BuildingBlocks/Behaviours/LoggingBehaviour.cs

```text
﻿using MediatR;
using Microsoft.Extensions.Logging;
using System.Diagnostics;

namespace BuildingBlocks.Behaviours
{
    public class LoggingBehaviour<TRequest, TResponse>
        (ILogger<LoggingBehaviour<TRequest, TResponse>> logger)
        : IPipelineBehavior<TRequest, TResponse>
        where TRequest : notnull, IRequest<TResponse>
        where TResponse : notnull
    {
        public async Task<TResponse> Handle(TRequest request, RequestHandlerDelegate<TResponse> next, CancellationToken cancellationToken)
        {
            logger.LogInformation("[START] Handle Request={Request} - Response={Response} - RequestData={RequestData}",
                typeof(TRequest).Name, typeof(TResponse).Name, request);

            var timer = new Stopwatch();
            timer.Start();

            var response = await next();

            timer.Stop();
            var timeTaken = timer.Elapsed;
            if (timeTaken.Seconds > 3)
                logger.LogWarning("[PERFORMANCE] The request {Request} took {TimeTaken}",
                    typeof(TRequest).Name, timeTaken.Seconds);

            logger.LogInformation("[END] Handled {Request} with {Response}",
                typeof(TRequest).Name, typeof(TResponse).Name);
            return response;
        }
    }
}
```

## BuildingBlocks/BuildingBlocks/Behaviours/ValidationBehaviour.cs

```text
﻿using BuildingBlocks.CQRS;
using FluentValidation;
using MediatR;

namespace BuildingBlocks.Behaviours
{
    public class ValidationBehaviour<TRequest, TResponse>
        (IEnumerable<IValidator<TRequest>> validators)
        : IPipelineBehavior<TRequest, TResponse>
        where TRequest : ICommand<TResponse>
    {
        public async Task<TResponse> Handle(TRequest request, RequestHandlerDelegate<TResponse> next, CancellationToken cancellationToken)
        {
            var context = new ValidationContext<TRequest>(request);

            var validationResults =
                await Task.WhenAll(validators.Select(v => v.ValidateAsync(context, cancellationToken)));

            var failures = validationResults
                                .Where(v => v.Errors.Any())
                                .SelectMany(v => v.Errors)
                                .ToList();
            if (failures.Any())
                throw new ValidationException(failures);

            return await next();
        }
    }
}
```

## BuildingBlocks/BuildingBlocks/BuildingBlocks.csproj

```text
﻿<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="FluentValidation" Version="12.1.1" />
    <PackageReference Include="FluentValidation.AspNetCore" Version="11.3.1" />
    <PackageReference Include="FluentValidation.DependencyInjectionExtensions" Version="12.1.1" />
    <PackageReference Include="Mapster" Version="7.4.0" />
    <PackageReference Include="MediatR" Version="14.0.0" />
    <PackageReference Include="Microsoft.FeatureManagement.AspNetCore" Version="4.4.0" />
  </ItemGroup>

</Project>
```

## BuildingBlocks/BuildingBlocks/CQRS/ICommand.cs

```text
﻿using MediatR;

namespace BuildingBlocks.CQRS
{
    public interface ICommand : ICommand<Unit>
    {
    }
    public interface ICommand<out TResponse> : IRequest<TResponse>
    {
    }
}
```

## BuildingBlocks/BuildingBlocks/CQRS/ICommandHandler.cs

```text
﻿using MediatR;

namespace BuildingBlocks.CQRS
{
    public interface ICommandHandler<in TCommand>
        : ICommandHandler<TCommand, Unit>
        where TCommand : ICommand<Unit>
    {
        
    }
    public interface ICommandHandler<in TCommand, TResponse> : IRequestHandler<TCommand, TResponse>
        where TCommand : ICommand<TResponse>
        where TResponse : notnull
    {
    }
}
```

## BuildingBlocks/BuildingBlocks/CQRS/IQuery.cs

```text
﻿using MediatR;

namespace BuildingBlocks.CQRS
{
    public interface IQuery<out TResponse> : IRequest<TResponse>
        where TResponse : notnull
    {
    }
}
```

## BuildingBlocks/BuildingBlocks/CQRS/IQueryHandler.cs

```text
﻿using MediatR;

namespace BuildingBlocks.CQRS
{
    public interface IQueryHandler<in TQuery, TResponse> 
        : IRequestHandler<TQuery, TResponse>
        where TQuery : IQuery<TResponse>
        where TResponse : notnull
    {
    }
}
```

## BuildingBlocks/BuildingBlocks/Exceptions/BadRequestException.cs

```text
﻿using System;
using System.Collections.Generic;
using System.Text;

namespace BuildingBlocks.Exceptions
{
    public class BadRequestException : Exception
    {
        public BadRequestException(string message) : base(message)
        {            
        }

        public BadRequestException(string message, string details) : base(message)
        {
            Details = details;
        }

        public string? Details { get; }
    }
}
```

## BuildingBlocks/BuildingBlocks/Exceptions/Handler/CustomExceptionHandler.cs

```text
﻿using FluentValidation;
using Microsoft.AspNetCore.Diagnostics;
using Microsoft.AspNetCore.Http;
using Microsoft.Extensions.Logging;

namespace BuildingBlocks.Exceptions.Handler
{
    public class CustomExceptionHandler (ILogger<CustomExceptionHandler> logger)
        : IExceptionHandler
    {
        public async ValueTask<bool> TryHandleAsync(HttpContext context, Exception exception, CancellationToken cancellationToken)
        {
            logger.LogError(
                "Error Message: {exceptionMessage}, Time of occurrence {time}",
                exception.Message, DateTime.UtcNow);

            (string Detail, string Title, int StatusCode) details = exception switch
            {
                InternalServerException =>
                (
                    exception.Message,
                    exception.GetType().Name,
                    context.Response.StatusCode = StatusCodes.Status500InternalServerError
                ),
                ValidationException =>
                (
                    exception.Message,
                    exception.GetType().Name,
                    context.Response.StatusCode = StatusCodes.Status400BadRequest
                ),
                NotFoundException =>
                (
                    exception.Message,
                    exception.GetType().Name,
                    context.Response.StatusCode = StatusCodes.Status404NotFound
                ),
                _ =>
                (
                    exception.Message,
                    exception.GetType().Name,
                    context.Response.StatusCode = StatusCodes.Status500InternalServerError
                )
            };

            var problemDetails = new Microsoft.AspNetCore.Mvc.ProblemDetails
            {
                Title = details.Title,
                Detail = details.Detail,
                Status = details.StatusCode,
                Instance = context.Request.Path
            };

            problemDetails.Extensions.Add("traceId", context.TraceIdentifier);

            if(exception is ValidationException validationException)
            {
                problemDetails.Extensions.Add("ValidationErrors", validationException.Errors);
            }

            await context.Response.WriteAsJsonAsync(problemDetails, cancellationToken: cancellationToken);
            return true;
        }
    }
}
```

## BuildingBlocks/BuildingBlocks/Exceptions/InternalServerException.cs

```text
﻿namespace BuildingBlocks.Exceptions
{
    public class InternalServerException : Exception
    {
        public InternalServerException(string message) : base(message)
        {            
        }

        public InternalServerException(string message, string details) : base(message)
        {
            Details = details;
        }

        public string? Details { get; }
    }
}
```

## BuildingBlocks/BuildingBlocks/Exceptions/NotFoundException.cs

```text
﻿using System;
using System.Collections.Generic;
using System.Text;

namespace BuildingBlocks.Exceptions
{
    public class NotFoundException : Exception
    {
        public NotFoundException(string message) : base(message)
        {
        }

        public NotFoundException(string name, object key) : base($"Entity \"{name}\" ({key}) was not found")
        {            
        }
    }
}
```

## BuildingBlocks/BuildingBlocks/Pagination/PaginatedResult.cs

```text
﻿namespace BuildingBlocks.Pagination
{
    public class PaginatedResult<TEntity>
        (int pageIndex, int pageSize, long count, IEnumerable<TEntity> data)
        where TEntity : class
    {
        public int PageIndex { get; } = pageIndex;
        public int PageSize { get; } = pageSize;
        public long Count { get; } = count;
        public IEnumerable<TEntity> Data { get; } = data;
    }
}
```

## BuildingBlocks/BuildingBlocks/Pagination/PaginationRequest.cs

```text
﻿namespace BuildingBlocks.Pagination
{
    public record PaginationRequest(int pageIndex = 0, int pageSize = 10);
}
```

## BuildingBlocks/BuildingBlocksMessaging/BuildingBlocksMessaging.csproj

```text
﻿<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="MassTransit.RabbitMQ" Version="8.5.7" />
  </ItemGroup>

</Project>
```

## BuildingBlocks/BuildingBlocksMessaging/Class1.cs

```text
﻿namespace BuildingBlocksMessaging
{
    public class Class1
    {

    }
}
```

## BuildingBlocks/BuildingBlocksMessaging/Events/BasketCheckoutEvent.cs

```text
﻿namespace BuildingBlocksMessaging.Events
{
    public record BasketCheckoutEvent : IntegrationEvent
    {
        public string UserName { get; set; } = default!;
        public Guid CustomerId { get; set; } = default!;
        public decimal TotalPrice { get; set; } = default!;

        //shipping and billing address
        public string FirstName { get; set; } = default!;
        public string LastName { get; set; } = default!;
        public string EmailAddress { get; set; } = default!;
        public string AddressLine { get; set; } = default!;
        public string Country { get; set; } = default!;
        public string State {  get; set; } = default!;
        public string ZipCode { get; set; } = default!;

        //payment
        public string CardName { get; set; } = default!;
        public string CardNumber { get; set; } = default!;
        public string Expiration {  get; set; } = default!;
        public string Cvv {  get; set; } = default!;
        public int PaymentMethod {  get; set; } = default!;
    }
}
```

## BuildingBlocks/BuildingBlocksMessaging/Events/IntegrationEvent.cs

```text
﻿namespace BuildingBlocksMessaging.Events
{
    public record IntegrationEvent
    {
        public Guid Id => Guid.NewGuid();
        public DateTime OccuredOn => DateTime.Now;
        public string EventType => GetType().AssemblyQualifiedName;
    }
}
```

## docker-compose.dcproj

```text
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="15.0" Sdk="Microsoft.Docker.Sdk">
  <PropertyGroup Label="Globals">
    <ProjectVersion>2.1</ProjectVersion>
    <DockerTargetOS>Linux</DockerTargetOS>
    <ProjectGuid>81dded9d-158b-e303-5f62-77a2896d2a5a</ProjectGuid>
    <DockerLaunchAction>None</DockerLaunchAction>
    <DockerServiceUrl>{Scheme}://localhost:{ServicePort}</DockerServiceUrl>
    <DockerServiceName>orderingapi</DockerServiceName>
  </PropertyGroup>
  <ItemGroup>
    <None Include="docker-compose.override.yml">
      <DependentUpon>docker-compose.yml</DependentUpon>
    </None>
    <None Include="docker-compose.yml" />
    <None Include=".dockerignore" />
  </ItemGroup>
</Project>
```

## docker-compose.override.yml

```yaml
services:
  catalogdb:
    container_name: catalogdb
    environment:
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=postgres
      - POSTGRES_DB=CatalogDb
    restart: always
    ports:
        - "5432:5432"
    volumes:
      - postgres_catalog:/var/lib/postgresql
  
  basketdb:
    container_name: basketdb
    environment:
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=postgres
      - POSTGRES_DB=BasketDb
    restart: always
    ports:
        - "5433:5432"
    volumes:
      - postgres_basket:/var/lib/postgresql

  distributedcache:
    container_name: distributedcache
    restart: always
    ports:
      - "6379:6379"

  orderdb:
    container_name: orderdb
    environment:
      - SA_PASSWORD=Premal@123
      - ACCEPT_EULA=Y
    restart: always
    ports:
      - "1433:1433"
    volumes:
      - sqlserver_orderdb:/var/opt/mssql
  
  messagebroker:
    container_name: messagebroker
    hostname: ecommerce-mq
    environment:
      - RABBITMQ_DEFAULT_USER=guest
      - RABBITMQ_DEFAULT_PASS=guest
    restart: always
    ports:
      - "5672:5672"
      - "15672:15672" 

  catalogapi:
    container_name: catalogapi
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_HTTP_PORTS=8080
      - ASPNETCORE_HTTPS_PORTS=8081
      - ASPNETCORE_URLS=https://+:8081;http://+:8080
      - ASPNETCORE_Kestrel__Certificates__Default__Path=/https/catalogapi.pfx
      - ASPNETCORE_Kestrel__Certificates__Default__Password=devpassword 
      - ConnectionStrings__Database=Server=catalogdb;Port=5432;Database=CatalogDb;User Id=postgres;Password=postgres;Include Error Detail=true

    depends_on : 
      - catalogdb
    ports:
      - "6000:8080"
      - "6060:8081"
    volumes:
      - ${APPDATA}/Microsoft/UserSecrets:/home/app/.microsoft/usersecrets:ro
      - ${APPDATA}/Microsoft/UserSecrets:/root/.microsoft/usersecrets:ro
      - ${APPDATA}/ASP.NET/Https:/home/app/.aspnet/https:ro
      - ${APPDATA}/ASP.NET/Https:/root/.aspnet/https:ro
      - ${USERPROFILE}/.aspnet/https:/https:ro 

  basketapi:
    container_name: basketapi
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_HTTP_PORTS=8080
      - ASPNETCORE_HTTPS_PORTS=8081
      - ConnectionStrings__Database=Server=basketdb;Port=5432;Database=BasketDb;User Id=postgres;Password=postgres;Include Error Detail=true
      - ConnectionStrings__Redis=distributedcache:6379
      - GrpcSettings__DiscountUrl=https://discountgrpc:8081
      - MessageBroker__Host=amqp://ecommerce-mq:5672
      - MessageBroker__UserName=guest
      - MessageBroker__Password=guest
      - ASPNETCORE_Kestrel__Certificates__Default__Path=/https/basketapi.pfx
      - ASPNETCORE_Kestrel__Certificates__Default__Password=devpassword 
   
    depends_on :
      - basketdb
      - distributedcache
      - discountgrpc  
      - messagebroker

    ports:
      - "6001:8080"
      - "6061:8081"
    volumes:
      - ${APPDATA}/Microsoft/UserSecrets:/home/app/.microsoft/usersecrets:ro
      - ${APPDATA}/Microsoft/UserSecrets:/root/.microsoft/usersecrets:ro
      - ${APPDATA}/ASP.NET/Https:/home/app/.aspnet/https:ro
      - ${APPDATA}/ASP.NET/Https:/root/.aspnet/https:ro
      - ${USERPROFILE}/.aspnet/https:/https:ro 

  discountgrpc:
    container_name: discountgrpc
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_HTTP_PORTS=8080
      - ASPNETCORE_HTTPS_PORTS=8081
      - ConnectionStrings__Database=Data Source=data/discountdb
      - ASPNETCORE_Kestrel__Certificates__Default__Path=/https/discountgrpc.pfx
      - ASPNETCORE_Kestrel__Certificates__Default__Password=devpassword

    ports:
      - "6002:8080"
      - "6062:8081"
    volumes:
      - ${APPDATA}/Microsoft/UserSecrets:/home/app/.microsoft/usersecrets:ro
      - ${APPDATA}/Microsoft/UserSecrets:/root/.microsoft/usersecrets:ro
      - ${APPDATA}/ASP.NET/Https:/home/app/.aspnet/https:ro
      - ${APPDATA}/ASP.NET/Https:/root/.aspnet/https:ro
      - ${USERPROFILE}/.aspnet/https:/https:ro

  orderingapi:
    container_name: orderingapi
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_HTTP_PORTS=8080
      - ASPNETCORE_HTTPS_PORTS=8081
      - ConnectionStrings__Database=Server=orderdb;Database=OrderDb;User Id=sa;Password=Premal@123;Encrypt=False;TrustServerCertificate=True
      - MessageBroker__Host=amqp://ecommerce-mq:5672
      - MessageBroker__UserName=guest
      - MessageBroker__Password=guest
      - FeatureManagement__OrderFullfilment=false 
      - ASPNETCORE_Kestrel__Certificates__Default__Path=/https/orderingapi.pfx
      - ASPNETCORE_Kestrel__Certificates__Default__Password=devpassword
    depends_on:
      - orderdb
      - messagebroker
    ports:
      - "6003:8080"
      - "6063:8081"
    volumes:
      - ${APPDATA}/Microsoft/UserSecrets:/home/app/.microsoft/usersecrets:ro
      - ${APPDATA}/Microsoft/UserSecrets:/root/.microsoft/usersecrets:ro
      - ${APPDATA}/ASP.NET/Https:/home/app/.aspnet/https:ro
      - ${APPDATA}/ASP.NET/Https:/root/.aspnet/https:ro
      - ${USERPROFILE}/.aspnet/https:/https:ro

  yarpapigateway:
    container_name: yarpapigw
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_HTTP_PORTS=8080
      - ASPNETCORE_HTTPS_PORTS=8081
      - ASPNETCORE_Kestrel__Certificates__Default__Path=/https/yarpapigw.pfx
      - ASPNETCORE_Kestrel__Certificates__Default__Password=devpassword
    depends_on:
      - catalogapi
      - basketapi
      - orderingapi
    ports:
      - "6004:8080"
      - "6064:8081"
    volumes:
      - ${APPDATA}/Microsoft/UserSecrets:/home/app/.microsoft/usersecrets:ro
      - ${APPDATA}/Microsoft/UserSecrets:/root/.microsoft/usersecrets:ro
      - ${APPDATA}/ASP.NET/Https:/home/app/.aspnet/https:ro
      - ${APPDATA}/ASP.NET/Https:/root/.aspnet/https:ro
      - ${USERPROFILE}/.aspnet/https:/https:ro
```

## docker-compose.yml

```yaml
services:
  catalogdb:
    image: postgres:18

  basketdb:
    image: postgres:18

  distributedcache:
    image: redis

  orderdb:
    image: mcr.microsoft.com/mssql/server

  messagebroker:
    image: rabbitmq:management

  catalogapi:
    image: ${DOCKER_REGISTRY-}catalogapi
    build:
      context: .
      dockerfile: services/catalog/CatalogAPI/Dockerfile

  basketapi:
    image: ${DOCKER_REGISTRY-}basketapi
    build:
      context: .
      dockerfile: services/basket/BasketAPI/Dockerfile

  discountgrpc:
    image: ${DOCKER_REGISTRY-}discountgrpc
    build:
      context: .
      dockerfile: services/discount/DiscountGrpc/Dockerfile

  orderingapi:
    image: ${DOCKER_REGISTRY-}orderingapi
    build:
      context: .
      dockerfile: services/ordering/OrderingAPI/Dockerfile

  yarpapigateway:
    image: ${DOCKER_REGISTRY-}yarpapigateway
    build:
      context: .
      dockerfile: ApiGateways/YarpApiGateway/Dockerfile

volumes:
  postgres_catalog:
  postgres_basket:
  sqlserver_orderdb:
```

## eshop-microservices.slnx

```text
<Solution>
  <Folder Name="/ApiGateways/">
    <Project Path="ApiGateways/YarpApiGateway/YarpApiGateway.csproj" Id="90667e20-4819-4cf3-a246-3fbd063f05eb" />
  </Folder>
  <Folder Name="/BuildingBlocks/">
    <Project Path="BuildingBlocks/BuildingBlocks/BuildingBlocks.csproj" Id="112a7f28-2867-4205-9e20-d1bc528322fd" />
    <Project Path="BuildingBlocks/BuildingBlocksMessaging/BuildingBlocksMessaging.csproj" Id="816b2875-33d6-4710-93d2-b8df099c3f2f" />
  </Folder>
  <Folder Name="/services/" />
  <Folder Name="/services/basket/">
    <Project Path="services/basket/BasketAPI/BasketAPI.csproj" Id="9d71f9cf-0fd5-452e-b0a2-05876ee9807c" />
  </Folder>
  <Folder Name="/services/catalog/">
    <Project Path="services/catalog/CatalogAPI/CatalogAPI.csproj" Id="02a84898-7da2-4c0f-849c-ac660cdd71fc" />
  </Folder>
  <Folder Name="/services/discount/">
    <Project Path="services/discount/DiscountGrpc/DiscountGrpc.csproj" Id="6c133f86-d75c-4092-b443-caf39838cfc8" />
  </Folder>
  <Folder Name="/services/ordering/">
    <Project Path="services/ordering/OrderingAPI/OrderingAPI.csproj" Id="da14ca45-87a4-4b5b-a776-d81a28a07712" />
    <Project Path="services/ordering/OrderingApplication/OrderingApplication.csproj" Id="8cacf846-cb94-48a9-aba7-854370d045d3" />
    <Project Path="services/ordering/OrderingDomain/OrderingDomain.csproj" Id="34ee1115-963b-4c90-8aa8-1fd3608039cc" />
    <Project Path="services/ordering/OrderingInfrastructure/OrderingInfrastructure.csproj" Id="aa27f97c-616d-443b-a819-23ee86dc26d5" />
  </Folder>
  <Project Path="docker-compose.dcproj">
    <Build />
  </Project>
</Solution>
```

## launchSettings.json

```json
{
  "profiles": {
    "Docker Compose": {
      "commandName": "DockerCompose",
      "commandVersion": "1.0",
      "serviceActions": {
        "catalogapi": "StartDebugging",
        "basketapi": "StartDebugging",
        "discountgrpc": "StartDebugging",
        "orderingapi": "StartDebugging",
        "yarpapigateway": "StartDebugging"
      }
    }
  }
}
```

## obj/Debug/docker-c.35A3FFBA.Up2Date

```text

```

## obj/Debug/docker-compose.dcproj.FileListAbsolute.txt

```text
C:\Users\Premal Kadam\Documents\Learnings\.NET 8 Microservices DDD, CQRS, VerticalClean Architecture\EShopMicroservices\src\obj\Debug\docker-compose.dcproj.CoreCompileInputs.cache
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\BasketAPI.deps.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\BasketAPI.runtimeconfig.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\appsettings.Development.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\appsettings.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\BasketAPI.staticwebassets.endpoints.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\BasketAPI.exe
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\CatalogAPI.deps.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\CatalogAPI.runtimeconfig.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\CatalogAPI.staticwebassets.endpoints.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\CatalogAPI.exe
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\DiscountGrpc.deps.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\DiscountGrpc.runtimeconfig.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\DiscountGrpc.staticwebassets.endpoints.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\DiscountGrpc.exe
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\OrderingAPI.deps.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\OrderingAPI.runtimeconfig.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\OrderingAPI.staticwebassets.endpoints.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\OrderingAPI.exe
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\BasketAPI.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\CatalogAPI.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\DiscountGrpc.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\OrderingAPI.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\MediatR.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Marten.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.Extensions.Caching.StackExchangeRedis.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Grpc.Net.ClientFactory.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Google.Protobuf.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Grpc.Core.Api.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\BuildingBlocks.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\MediatR.Contracts.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\FluentValidation.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Carter.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\MassTransit.Abstractions.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\BuildingBlocksMessaging.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Scrutor.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\HealthChecks.NpgSql.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Npgsql.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\HealthChecks.Redis.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\HealthChecks.UI.Client.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Mapster.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\FluentValidation.DependencyInjectionExtensions.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.EntityFrameworkCore.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.EntityFrameworkCore.Relational.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Grpc.AspNetCore.Server.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.EntityFrameworkCore.Sqlite.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\OrderingApplication.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\HealthChecks.SqlServer.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.Data.SqlClient.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\OrderingInfrastructure.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.IdentityModel.Tokens.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.IdentityModel.JsonWebTokens.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\JasperFx.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\JasperFx.Events.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Weasel.Postgresql.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Weasel.Core.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Polly.Core.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Newtonsoft.Json.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\FSharp.Core.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\JasperFx.RuntimeCompiler.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\FastExpressionCompiler.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\StackExchange.Redis.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Grpc.Net.Client.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.Extensions.DependencyModel.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\MassTransit.RabbitMqTransport.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\MassTransit.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\HealthChecks.UI.Core.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Mapster.Core.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.EntityFrameworkCore.Abstractions.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Grpc.Net.Common.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.Data.Sqlite.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\SQLitePCLRaw.core.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\OrderingDomain.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.FeatureManagement.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.Identity.Client.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.EntityFrameworkCore.SqlServer.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.IdentityModel.Logging.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.IdentityModel.Abstractions.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Spectre.Console.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\DistributedLock.Postgres.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\NetTopologySuite.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.CodeAnalysis.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.CodeAnalysis.CSharp.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Pipelines.Sockets.Unofficial.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\RabbitMQ.Client.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.Bcl.TimeProvider.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\DistributedLock.Core.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\BasketAPI.pdb
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\CatalogAPI.pdb
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\DiscountGrpc.pdb
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\OrderingAPI.pdb
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\BuildingBlocks.pdb
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\BuildingBlocksMessaging.pdb
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\OrderingApplication.pdb
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\OrderingInfrastructure.pdb
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\OrderingDomain.pdb
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\cs\Microsoft.Data.SqlClient.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\de\Microsoft.Data.SqlClient.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\es\Microsoft.Data.SqlClient.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\fr\Microsoft.Data.SqlClient.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\it\Microsoft.Data.SqlClient.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ja\Microsoft.Data.SqlClient.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ko\Microsoft.Data.SqlClient.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\pl\Microsoft.Data.SqlClient.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\pt-BR\Microsoft.Data.SqlClient.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ru\Microsoft.Data.SqlClient.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\tr\Microsoft.Data.SqlClient.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\zh-Hans\Microsoft.Data.SqlClient.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\zh-Hant\Microsoft.Data.SqlClient.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\cs\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\de\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\es\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\fr\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\it\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ja\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ko\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\pl\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\pt-BR\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ru\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\tr\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\zh-Hans\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\zh-Hant\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\cs\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\de\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\es\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\fr\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\it\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ja\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ko\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\pl\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\pt-BR\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ru\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\tr\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\zh-Hans\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\zh-Hant\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\cs\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\de\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\es\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\fr\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\it\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ja\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ko\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\pl\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\pt-BR\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ru\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\tr\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\zh-Hans\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\zh-Hant\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\obj\Debug\docker-compose.dcproj.AssemblyReference.cache
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\obj\Debug\docker-compose.dcproj.CoreCompileInputs.cache
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\obj\Debug\docker-c.35A3FFBA.Up2Date
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\YarpApiGateway.deps.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\YarpApiGateway.runtimeconfig.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\appsettings.local.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\YarpApiGateway.staticwebassets.endpoints.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\YarpApiGateway.exe
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\YarpApiGateway.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Yarp.ReverseProxy.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\System.IO.Hashing.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\YarpApiGateway.pdb
```

## obj/Docker/docker-compose.vs.debug.g.yml

```yaml
services:
  basketapi:
    image: basketapi:dev
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      target: base
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "BasketAPI"
    environment:
      - DOTNET_USE_POLLING_FILE_WATCHER=1
      - ASPNETCORE_LOGGING__CONSOLE__DISABLECOLORS=true
      - NUGET_FALLBACK_PACKAGES=/.nuget/fallbackpackages
    volumes:
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\services\basket\BasketAPI:/app:rw
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src:/src:rw
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\.nuget\packages:/.nuget/packages:ro
      - C:\Program Files (x86)\Microsoft Visual Studio\Shared\NuGetPackages:/.nuget/fallbackpackages:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/bin/Debug/net10.0/BasketAPI.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
    tty: true
  catalogapi:
    image: catalogapi:dev
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      target: base
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "CatalogAPI"
    environment:
      - DOTNET_USE_POLLING_FILE_WATCHER=1
      - ASPNETCORE_LOGGING__CONSOLE__DISABLECOLORS=true
      - NUGET_FALLBACK_PACKAGES=/.nuget/fallbackpackages
    volumes:
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\services\catalog\CatalogAPI:/app:rw
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src:/src:rw
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\.nuget\packages:/.nuget/packages:ro
      - C:\Program Files (x86)\Microsoft Visual Studio\Shared\NuGetPackages:/.nuget/fallbackpackages:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/bin/Debug/net10.0/CatalogAPI.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
    tty: true

  discountgrpc:
    image: discountgrpc:dev
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      target: base
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "DiscountGrpc"
    environment:
      - DOTNET_USE_POLLING_FILE_WATCHER=1
      - ASPNETCORE_LOGGING__CONSOLE__DISABLECOLORS=true
      - NUGET_FALLBACK_PACKAGES=/.nuget/fallbackpackages
    volumes:
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\services\discount\DiscountGrpc:/app:rw
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src:/src:rw
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\.nuget\packages:/.nuget/packages:ro
      - C:\Program Files (x86)\Microsoft Visual Studio\Shared\NuGetPackages:/.nuget/fallbackpackages:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/bin/Debug/net10.0/DiscountGrpc.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
    tty: true

  orderingapi:
    image: orderingapi:dev
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      target: base
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "OrderingAPI"
    environment:
      - DOTNET_USE_POLLING_FILE_WATCHER=1
      - ASPNETCORE_LOGGING__CONSOLE__DISABLECOLORS=true
      - NUGET_FALLBACK_PACKAGES=/.nuget/fallbackpackages
    volumes:
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\services\ordering\OrderingAPI:/app:rw
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src:/src:rw
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\.nuget\packages:/.nuget/packages:ro
      - C:\Program Files (x86)\Microsoft Visual Studio\Shared\NuGetPackages:/.nuget/fallbackpackages:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/bin/Debug/net10.0/OrderingAPI.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
    tty: true

  yarpapigateway:
    image: yarpapigateway:dev
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      target: base
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "YarpApiGateway"
    environment:
      - DOTNET_USE_POLLING_FILE_WATCHER=1
      - ASPNETCORE_LOGGING__CONSOLE__DISABLECOLORS=true
      - NUGET_FALLBACK_PACKAGES=/.nuget/fallbackpackages
    volumes:
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\ApiGateways\YarpApiGateway:/app:rw
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src:/src:rw
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\.nuget\packages:/.nuget/packages:ro
      - C:\Program Files (x86)\Microsoft Visual Studio\Shared\NuGetPackages:/.nuget/fallbackpackages:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/bin/Debug/net10.0/YarpApiGateway.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
    tty: true
```

## obj/Docker/docker-compose.vs.debug.partial.g.yml

```yaml
services:
  basketapi:
    image: basketapi:dev
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      target: base
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "BasketAPI"
    environment:
      - DOTNET_USE_POLLING_FILE_WATCHER=1
      - ASPNETCORE_LOGGING__CONSOLE__DISABLECOLORS=true
      - NUGET_FALLBACK_PACKAGES=/.nuget/fallbackpackages
    volumes:
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\services\basket\BasketAPI:/app:rw
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src:/src:rw
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\.nuget\packages:/.nuget/packages:ro
      - C:\Program Files (x86)\Microsoft Visual Studio\Shared\NuGetPackages:/.nuget/fallbackpackages:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/bin/Debug/net10.0/BasketAPI.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
    tty: true
  catalogapi:
    image: catalogapi:dev
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      target: base
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "CatalogAPI"
    environment:
      - DOTNET_USE_POLLING_FILE_WATCHER=1
      - ASPNETCORE_LOGGING__CONSOLE__DISABLECOLORS=true
      - NUGET_FALLBACK_PACKAGES=/.nuget/fallbackpackages
    volumes:
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\services\catalog\CatalogAPI:/app:rw
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src:/src:rw
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\.nuget\packages:/.nuget/packages:ro
      - C:\Program Files (x86)\Microsoft Visual Studio\Shared\NuGetPackages:/.nuget/fallbackpackages:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/bin/Debug/net10.0/CatalogAPI.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
    tty: true

  discountgrpc:
    image: discountgrpc:dev
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      target: base
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "DiscountGrpc"
    environment:
      - DOTNET_USE_POLLING_FILE_WATCHER=1
      - ASPNETCORE_LOGGING__CONSOLE__DISABLECOLORS=true
      - NUGET_FALLBACK_PACKAGES=/.nuget/fallbackpackages
    volumes:
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\services\discount\DiscountGrpc:/app:rw
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src:/src:rw
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\.nuget\packages:/.nuget/packages:ro
      - C:\Program Files (x86)\Microsoft Visual Studio\Shared\NuGetPackages:/.nuget/fallbackpackages:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/bin/Debug/net10.0/DiscountGrpc.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
    tty: true

  orderingapi:
    image: orderingapi:dev
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      target: base
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "OrderingAPI"
    environment:
      - DOTNET_USE_POLLING_FILE_WATCHER=1
      - ASPNETCORE_LOGGING__CONSOLE__DISABLECOLORS=true
      - NUGET_FALLBACK_PACKAGES=/.nuget/fallbackpackages
    volumes:
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\services\ordering\OrderingAPI:/app:rw
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src:/src:rw
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\.nuget\packages:/.nuget/packages:ro
      - C:\Program Files (x86)\Microsoft Visual Studio\Shared\NuGetPackages:/.nuget/fallbackpackages:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/bin/Debug/net10.0/OrderingAPI.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
    tty: true

  yarpapigateway:
    image: yarpapigateway:dev
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      target: base
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "YarpApiGateway"
    environment:
      - DOTNET_USE_POLLING_FILE_WATCHER=1
      - ASPNETCORE_LOGGING__CONSOLE__DISABLECOLORS=true
      - NUGET_FALLBACK_PACKAGES=/.nuget/fallbackpackages
    volumes:
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\ApiGateways\YarpApiGateway:/app:rw
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src:/src:rw
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\.nuget\packages:/.nuget/packages:ro
      - C:\Program Files (x86)\Microsoft Visual Studio\Shared\NuGetPackages:/.nuget/fallbackpackages:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/bin/Debug/net10.0/YarpApiGateway.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
    tty: true
```

## obj/Docker/docker-compose.vs.release.g.yml

```yaml
services:
  basketapi:
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "BasketAPI"
    volumes:
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/BasketAPI.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
      com.microsoft.visual-studio.project-name: "BasketAPI"
    tty: true
  catalogapi:
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "CatalogAPI"
    volumes:
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/CatalogAPI.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
      com.microsoft.visual-studio.project-name: "CatalogAPI"
    tty: true

  discountgrpc:
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "DiscountGrpc"
    volumes:
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/DiscountGrpc.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
      com.microsoft.visual-studio.project-name: "DiscountGrpc"
    tty: true

  orderingapi:
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "OrderingAPI"
    volumes:
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/OrderingAPI.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
      com.microsoft.visual-studio.project-name: "OrderingAPI"
    tty: true

  yarpapigateway:
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "YarpApiGateway"
    volumes:
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/YarpApiGateway.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
      com.microsoft.visual-studio.project-name: "YarpApiGateway"
    tty: true
```

## obj/Docker/docker-compose.vs.release.partial.g.yml

```yaml
services:
  basketapi:
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "BasketAPI"
    volumes:
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/BasketAPI.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
      com.microsoft.visual-studio.project-name: "BasketAPI"
    tty: true
  catalogapi:
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "CatalogAPI"
    volumes:
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/CatalogAPI.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
      com.microsoft.visual-studio.project-name: "CatalogAPI"
    tty: true

  discountgrpc:
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "DiscountGrpc"
    volumes:
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/DiscountGrpc.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
      com.microsoft.visual-studio.project-name: "DiscountGrpc"
    tty: true

  orderingapi:
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "OrderingAPI"
    volumes:
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/OrderingAPI.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
      com.microsoft.visual-studio.project-name: "OrderingAPI"
    tty: true

  yarpapigateway:
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "YarpApiGateway"
    volumes:
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/YarpApiGateway.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
      com.microsoft.visual-studio.project-name: "YarpApiGateway"
    tty: true
```

## obj/Release/docker-c.35A3FFBA.Up2Date

```text

```

## obj/Release/docker-compose.dcproj.FileListAbsolute.txt

```text
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\BasketAPI.deps.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\BasketAPI.runtimeconfig.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\appsettings.Development.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\appsettings.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\BasketAPI.staticwebassets.endpoints.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\BasketAPI.exe
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\CatalogAPI.deps.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\CatalogAPI.runtimeconfig.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\CatalogAPI.staticwebassets.endpoints.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\CatalogAPI.exe
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\BasketAPI.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\CatalogAPI.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\MediatR.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\Marten.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\Microsoft.Extensions.Caching.StackExchangeRedis.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\BuildingBlocks.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\MediatR.Contracts.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\FluentValidation.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\Carter.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\Scrutor.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\HealthChecks.NpgSql.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\Npgsql.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\HealthChecks.Redis.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\HealthChecks.UI.Client.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\Mapster.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\FluentValidation.DependencyInjectionExtensions.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\Microsoft.IdentityModel.Tokens.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\Microsoft.IdentityModel.JsonWebTokens.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\JasperFx.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\JasperFx.Events.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\Weasel.Postgresql.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\Weasel.Core.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\Polly.Core.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\Newtonsoft.Json.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\FSharp.Core.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\JasperFx.RuntimeCompiler.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\FastExpressionCompiler.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\StackExchange.Redis.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\Microsoft.Extensions.DependencyModel.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\HealthChecks.UI.Core.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\Mapster.Core.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\Microsoft.IdentityModel.Logging.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\Microsoft.IdentityModel.Abstractions.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\Spectre.Console.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\DistributedLock.Postgres.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\NetTopologySuite.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\Microsoft.CodeAnalysis.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\Microsoft.CodeAnalysis.CSharp.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\Pipelines.Sockets.Unofficial.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\DistributedLock.Core.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\BasketAPI.pdb
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\CatalogAPI.pdb
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\BuildingBlocks.pdb
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\cs\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\de\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\es\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\fr\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\it\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\ja\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\ko\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\pl\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\pt-BR\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\ru\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\tr\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\zh-Hans\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\zh-Hant\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\cs\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\de\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\es\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\fr\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\it\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\ja\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\ko\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\pl\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\pt-BR\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\ru\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\tr\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\zh-Hans\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\zh-Hant\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\cs\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\de\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\es\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\fr\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\it\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\ja\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\ko\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\pl\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\pt-BR\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\ru\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\tr\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\zh-Hans\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Release\zh-Hant\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\obj\Release\docker-compose.dcproj.AssemblyReference.cache
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\obj\Release\docker-compose.dcproj.CoreCompileInputs.cache
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\obj\Release\docker-c.35A3FFBA.Up2Date
```

## services/basket/BasketAPI/appsettings.Development.json

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  }
}
```

## services/basket/BasketAPI/Basket/CheckoutBasket/CheckoutBasketEndpoint.cs

```text
﻿using BasketAPI.Basket.CheckoutBasket;

namespace BasketAPI.Basket.BasketCheckout
{
    public record CheckoutBasketRequest(BasketCheckoutDto BasketCheckoutDto);
    public record CheckoutBasketResponse(bool IsSuccess);

    public class CheckoutBasketEndpoint : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapPost("/basket/checkout", async (CheckoutBasketRequest request, ISender sender) =>
            {
                var command = request.Adapt<CheckoutBasketCommand>();

                var result = await sender.Send(command);

                var response = result.Adapt<CheckoutBasketResponse>();

                return Results.Ok(response);
            })
            .WithName("CheckoutBasket")
            .Produces<CheckoutBasketResponse>(StatusCodes.Status200OK)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .WithSummary("Checkout Basket")
            .WithDescription("Checkout Basket");
        }
    }
}
```

## services/basket/BasketAPI/Basket/CheckoutBasket/CheckoutBasketHandler.cs

```text
﻿
using BuildingBlocksMessaging.Events;
using MassTransit;

namespace BasketAPI.Basket.CheckoutBasket
{
    public record CheckoutBasketCommand(BasketCheckoutDto BasketCheckoutDto)
        : ICommand<CheckoutBasketResult>;
    public record CheckoutBasketResult(bool IsSuccess);

    public class CheckoutBasketCommandValidator 
        : AbstractValidator<CheckoutBasketCommand>
    {
        public CheckoutBasketCommandValidator()
        {
            RuleFor(x => x.BasketCheckoutDto).NotNull().WithMessage("BasketCheckoutDto can't be null");
            RuleFor(x => x.BasketCheckoutDto.UserName).NotEmpty().WithMessage("UserName is required");
        }
    }

    public class CheckoutBasketHandler
        (IBasketRepository repository, IPublishEndpoint publishEndpoint)
        : ICommandHandler<CheckoutBasketCommand, CheckoutBasketResult>
    {
        public async Task<CheckoutBasketResult> Handle(CheckoutBasketCommand command, CancellationToken cancellationToken)
        {
            //retrive existing basket with total price
            //set total price on basketchekout event message
            //send event to rabbitmq using masstransit
            //delete the basket

            var basket = await repository.GetBasket(command.BasketCheckoutDto.UserName, cancellationToken);
            if (basket is null)
                return new CheckoutBasketResult(false);

            var eventMessage = command.BasketCheckoutDto.Adapt<BasketCheckoutEvent>();
            eventMessage.TotalPrice = basket.TotalPrice;

            await publishEndpoint.Publish(eventMessage, cancellationToken);

            await repository.DeleteBasket(command.BasketCheckoutDto.UserName, cancellationToken);

            return new CheckoutBasketResult(true);
        }
    }
}
```

## services/basket/BasketAPI/Basket/DeleteBasket/DeleteBasketEndpoint.cs

```text
﻿namespace BasketAPI.Basket.DeleteBasket
{
    //public record DeleteBasketRequest(string UserName);
    public record DeleteBasketResponse(bool IsSuccess);

    public class DeleteBasketEndpoint : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapDelete("/basket/{userName}", async (string userName, ISender sender) =>
            {
                var command = new DeleteBasketCommand(userName);
                var result = await sender.Send(command);
                var response = result.Adapt<DeleteBasketResponse>();
                return Results.Ok(response);
            })
            .WithName("DeleteBasket")
            .Produces<DeleteBasketResponse>(StatusCodes.Status200OK)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .WithSummary("Delete a user's shopping cart")
            .WithDescription("Delete a user's shopping cart");
        }
    }
}
```

## services/basket/BasketAPI/Basket/DeleteBasket/DeleteBasketHandler.cs

```text
﻿namespace BasketAPI.Basket.DeleteBasket
{
    public record DeleteBasketCommand(string UserName) : ICommand<DeleteBasketResult>;
    public record DeleteBasketResult(bool IsSuccess);

    public class DeleteBasketValidator : AbstractValidator<DeleteBasketCommand>
    {
        public DeleteBasketValidator()
        {
            RuleFor(x => x.UserName).NotEmpty().WithMessage("Username is required");
        }
    }

    public class DeleteBasketHandler(IBasketRepository repository)
        : ICommandHandler<DeleteBasketCommand, DeleteBasketResult>
    {
        public async Task<DeleteBasketResult> Handle(DeleteBasketCommand command, CancellationToken cancellationToken)
        {
            var result = await repository.DeleteBasket(command.UserName);
            return new DeleteBasketResult(result);
        }
    }
}
```

## services/basket/BasketAPI/Basket/GetBasket/GetBasketEndpoint.cs

```text
﻿namespace BasketAPI.Basket.GetBasket
{
    //public record GetBasketRequest(string Username);
    public record GetBasketResponse(ShoppingCart Cart);

    public class GetBasketEndpoint : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapGet("/basket/{userName}", async (string userName, ISender sender) =>
            {
                var result = await sender.Send( new GetBasketQuery(userName));
                var response = result.Adapt<GetBasketResponse>();
                return Results.Ok(response);
            })
            .WithName("GetBasket")
            .Produces<GetBasketResponse>(StatusCodes.Status200OK)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .WithSummary("Get a user's shopping cart")
            .WithDescription("Get a user's shopping cart");
        }
    }
}
```

## services/basket/BasketAPI/Basket/GetBasket/GetBasketHandler.cs

```text
﻿namespace BasketAPI.Basket.GetBasket
{
    public record GetBasketQuery(string Username) : IQuery<GetBasketResult>;
    public record GetBasketResult(ShoppingCart Cart);
    public class GetBasketQueryHandler(IBasketRepository repository)
        : IQueryHandler<GetBasketQuery, GetBasketResult>
    {
        public async Task<GetBasketResult> Handle(GetBasketQuery query, CancellationToken cancellationToken)
        {
            var basket = await repository.GetBasket(query.Username);

            return new GetBasketResult(basket);
        }
    }
}
```

## services/basket/BasketAPI/Basket/StoreBasket/StoreBasketEndpoint.cs

```text
﻿using BasketAPI.Baskt.StoreBasket;

namespace BasketAPI.Basket.StoreBasket
{
    public record StoreBasketRequest(ShoppingCart Cart);
    public record StoreBasketResponse(string UserName);
    public class StoreBasketEndpoint : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapPost("/basket", async (StoreBasketRequest request, ISender sender) =>
            {
                var command = request.Adapt<StoreBasketCommand>();
                var result = await sender.Send(command);
                var response = result.Adapt<StoreBasketResponse>();
                return Results.Ok(response);
            })
            .WithName("StoreBasket")
            .Produces<StoreBasketResponse>(StatusCodes.Status200OK)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .WithSummary("Store basket with items for user")
            .WithDescription("Store basket with items for use");
        }
    }
}
```

## services/basket/BasketAPI/Basket/StoreBasket/StoreBasketHandler.cs

```text
﻿
using DiscountGrpc;
using JasperFx.Events.Daemon;

namespace BasketAPI.Baskt.StoreBasket
{
    public record StoreBasketCommand(ShoppingCart Cart) : ICommand<StoreBasketResult>;
    public record StoreBasketResult(string UserName);
    public class StoreBasketValidator : AbstractValidator<StoreBasketCommand>
    {
        public StoreBasketValidator()
        {
            RuleFor(x => x.Cart).NotNull().WithMessage("Shopping cart cannot be null.");
            RuleFor(x => x.Cart.UserName).NotEmpty().WithMessage("Username is required");
        }
    }

    public class StoreBasketCommandHandler
        (IBasketRepository repository, DiscountProtoService.DiscountProtoServiceClient discountProto)
        : ICommandHandler<StoreBasketCommand, StoreBasketResult>
    {
        public async Task<StoreBasketResult> Handle(StoreBasketCommand command, CancellationToken cancellationToken)
        {
            await DeductDiscount(command.Cart, cancellationToken);

            var basket = await repository.StoreBasket(command.Cart, cancellationToken);
            return new StoreBasketResult(basket.UserName);
        }

        private async Task DeductDiscount(ShoppingCart cart, CancellationToken cancellationToken)
        {
            //communicate with Discount gRPC service to calculate latest prices of products into the basket
            foreach (var item in cart.Items)
            {
                var coupon = await discountProto.GetDiscountAsync(
                    new GetDiscountRequest { ProductName = item.ProductName }, cancellationToken: cancellationToken);
                item.Price -= coupon.Amount;
            }
        }
    }
}
```

## services/basket/BasketAPI/BasketAPI.csproj

```text
﻿<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
    <UserSecretsId>bf0422e1-3e0c-4fb1-8d17-5e59374f458b</UserSecretsId>
    <DockerDefaultTargetOS>Linux</DockerDefaultTargetOS>
    <DockerfileContext>..\..\..</DockerfileContext>
    <DockerComposeProjectPath>..\..\..\docker-compose.dcproj</DockerComposeProjectPath>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="AspNetCore.HealthChecks.NpgSql" Version="9.0.0" />
    <PackageReference Include="AspNetCore.HealthChecks.Redis" Version="9.0.0" />
    <PackageReference Include="AspNetCore.HealthChecks.UI.Client" Version="9.0.0" />
    <PackageReference Include="Carter" Version="10.0.0" />
    <PackageReference Include="Grpc.AspNetCore" Version="2.49.0" />
    <PackageReference Include="Marten" Version="8.17.0" />
    <PackageReference Include="Microsoft.Extensions.Caching.StackExchangeRedis" Version="10.0.2" />
    <PackageReference Include="Microsoft.VisualStudio.Azure.Containers.Tools.Targets" Version="1.23.0" />
    <PackageReference Include="Scrutor" Version="7.0.0" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\..\..\BuildingBlocks\BuildingBlocksMessaging\BuildingBlocksMessaging.csproj" />
    <ProjectReference Include="..\..\..\BuildingBlocks\BuildingBlocks\BuildingBlocks.csproj" />
  </ItemGroup>

  <ItemGroup>
    <Protobuf Include="..\..\discount\DiscountGrpc\Protos\discount.proto" GrpcServices="Client">
      <Link>Protos\discount.proto</Link>
    </Protobuf>
  </ItemGroup>

</Project>
```

## services/basket/BasketAPI/Data/BasketRepository.cs

```text
﻿namespace BasketAPI.Data
{
    public class BasketRepository(IDocumentSession session)
        : IBasketRepository
    {
        public async Task<bool> DeleteBasket(string userName, CancellationToken cancellationToken = default)
        {
            var basket = await session.LoadAsync<ShoppingCart>(userName, cancellationToken);
            if (basket is null) throw new BasketNotFoundException(userName);
            session.Delete<ShoppingCart>(userName);
            await session.SaveChangesAsync(cancellationToken);
            return true;
        }

        public async Task<ShoppingCart> GetBasket(string userName, CancellationToken cancellationToken = default)
        {
            var basket = await session.LoadAsync<ShoppingCart>(userName, cancellationToken);
            return basket is null ? throw new BasketNotFoundException(userName) : basket;
        }

        public async Task<ShoppingCart> StoreBasket(ShoppingCart cart, CancellationToken cancellationToken = default)
        {
            session.Store(cart);
            await session.SaveChangesAsync(cancellationToken);
            return cart;
        }
    }
}
```

## services/basket/BasketAPI/Data/CachedBasketRepository.cs

```text
﻿
using Microsoft.Extensions.Caching.Distributed;
using System.Text.Json;

namespace BasketAPI.Data
{
    public class CachedBasketRepository
        (IBasketRepository repository, IDistributedCache cache)
        : IBasketRepository
    {
        public async Task<ShoppingCart> GetBasket(string userName, CancellationToken cancellationToken = default)
        {
            var cachedBasket = await cache.GetStringAsync(userName, cancellationToken);
            if(!string.IsNullOrEmpty(cachedBasket))
                return JsonSerializer.Deserialize<ShoppingCart>(cachedBasket)!;

            var basekt = await repository.GetBasket(userName, cancellationToken);
            await cache.SetStringAsync(userName, JsonSerializer.Serialize(basekt), cancellationToken);
            return basekt;
        }

        public async Task<ShoppingCart> StoreBasket(ShoppingCart basket, CancellationToken cancellationToken = default)
        {
            var result = await repository.StoreBasket(basket, cancellationToken);
            await cache.SetStringAsync(result.UserName, JsonSerializer.Serialize(result), cancellationToken);
            return result;
        }

        public async Task<bool> DeleteBasket(string userName, CancellationToken cancellationToken = default)
        {
            var result = await repository.DeleteBasket(userName, cancellationToken);
            await cache.RemoveAsync(userName, cancellationToken);
            return result;
        }
    }
}
```

## services/basket/BasketAPI/Data/IBasketRepository.cs

```text
﻿namespace BasketAPI.Data
{
    public interface IBasketRepository
    {
        Task<ShoppingCart> GetBasket(string userName, CancellationToken cancellationToken = default);
        Task<ShoppingCart> StoreBasket(ShoppingCart cart, CancellationToken cancellationToken = default);
        Task<bool> DeleteBasket(string userName, CancellationToken cancellationToken = default);
    }
}
```

## services/basket/BasketAPI/Dockerfile

```text
# See https://aka.ms/customizecontainer to learn how to customize your debug container and how Visual Studio uses this Dockerfile to build your images for faster debugging.

# This stage is used when running from VS in fast mode (Default for Debug configuration)
FROM mcr.microsoft.com/dotnet/aspnet:10.0 AS base
USER $APP_UID
WORKDIR /app
EXPOSE 8080
EXPOSE 8081


# This stage is used to build the service project
FROM mcr.microsoft.com/dotnet/sdk:10.0 AS build
ARG BUILD_CONFIGURATION=Release
WORKDIR /src
COPY ["services/basket/BasketAPI/BasketAPI.csproj", "services/basket/BasketAPI/"]
COPY ["BuildingBlocks/BuildingBlocks/BuildingBlocks.csproj", "BuildingBlocks/BuildingBlocks/"]
RUN dotnet restore "./services/basket/BasketAPI/BasketAPI.csproj"
COPY . .
WORKDIR "/src/services/basket/BasketAPI"
RUN dotnet build "./BasketAPI.csproj" -c $BUILD_CONFIGURATION -o /app/build

# This stage is used to publish the service project to be copied to the final stage
FROM build AS publish
ARG BUILD_CONFIGURATION=Release
RUN dotnet publish "./BasketAPI.csproj" -c $BUILD_CONFIGURATION -o /app/publish /p:UseAppHost=false

# This stage is used in production or when running from VS in regular mode (Default when not using the Debug configuration)
FROM base AS final
WORKDIR /app
COPY --from=publish /app/publish .
ENTRYPOINT ["dotnet", "BasketAPI.dll"]
```

## services/basket/BasketAPI/Dockerfile.original

```text
# See https://aka.ms/customizecontainer to learn how to customize your debug container and how Visual Studio uses this Dockerfile to build your images for faster debugging.

# This stage is used when running from VS in fast mode (Default for Debug configuration)
FROM mcr.microsoft.com/dotnet/aspnet:10.0 AS base
USER $APP_UID
WORKDIR /app
EXPOSE 8080
EXPOSE 8081


# This stage is used to build the service project
FROM mcr.microsoft.com/dotnet/sdk:10.0 AS build
ARG BUILD_CONFIGURATION=Release
WORKDIR /src
COPY ["services/basket/BasketAPI/BasketAPI.csproj", "services/basket/BasketAPI/"]
RUN dotnet restore "./services/basket/BasketAPI/BasketAPI.csproj"
COPY . .
WORKDIR "/src/services/basket/BasketAPI"
RUN dotnet build "./BasketAPI.csproj" -c $BUILD_CONFIGURATION -o /app/build

# This stage is used to publish the service project to be copied to the final stage
FROM build AS publish
ARG BUILD_CONFIGURATION=Release
RUN dotnet publish "./BasketAPI.csproj" -c $BUILD_CONFIGURATION -o /app/publish /p:UseAppHost=false

# This stage is used in production or when running from VS in regular mode (Default when not using the Debug configuration)
FROM base AS final
WORKDIR /app
COPY --from=publish /app/publish .
ENTRYPOINT ["dotnet", "BasketAPI.dll"]
```

## services/basket/BasketAPI/Dtos/BasketCheckoutDto.cs

```text
﻿namespace BasketAPI.Dtos
{
    public class BasketCheckoutDto
    {
        public string UserName { get; set; } = default!;
        public Guid CustomerId { get; set; } = default!;
        public decimal TotalPrice { get; set; } = default!;

        //shipping and billing address
        public string FirstName { get; set; } = default!;
        public string LastName { get; set; } = default!;
        public string EmailAddress { get; set; } = default!;
        public string AddressLine { get; set; } = default!;
        public string Country { get; set; } = default!;
        public string State { get; set; } = default!;
        public string ZipCode { get; set; } = default!;

        //payment
        public string CardName { get; set; } = default!;
        public string CardNumber { get; set; } = default!;
        public string Expiration { get; set; } = default!;
        public string Cvv { get; set; } = default!;
        public int PaymentMethod { get; set; } = default!;
    }
}
```

## services/basket/BasketAPI/Exceptions/BasketNotFoundException.cs

```text
﻿namespace BasketAPI.Exceptions
{
    public class BasketNotFoundException : NotFoundException
    {
        public BasketNotFoundException(string username) : base("Basket", username)
        {
        }
    }
}
```

## services/basket/BasketAPI/GlobalUsings.cs

```text
﻿global using BasketAPI.Models;
global using BuildingBlocks.CQRS;
global using Carter;
global using MediatR;
global using Mapster;
global using FluentValidation;
global using BuildingBlocks.Behaviours;
global using Marten;
global using BuildingBlocks.Exceptions;
global using BasketAPI.Exceptions;
global using BasketAPI.Data;
global using BuildingBlocks.Exceptions.Handler;
global using HealthChecks.UI.Client;
global using Microsoft.AspNetCore.Diagnostics.HealthChecks;
global using DiscountGrpc;
global using BasketAPI.Dtos;
```

## services/basket/BasketAPI/Models/ShoppingCart.cs

```text
﻿namespace BasketAPI.Models
{
    public class ShoppingCart
    {
        public string UserName { get; set; } = default!;
        public List<ShoppingCartItem> Items { get; set; } = new();
        public decimal TotalPrice => Items.Sum(item => item.Price * item.Quantity);
        public ShoppingCart(string userName)
        {
            UserName = userName;
        }

        //for mapping
        public ShoppingCart()
        {
        }
    }
}
```

## services/basket/BasketAPI/Models/ShoppingCartItem.cs

```text
﻿namespace BasketAPI.Models
{
    public class ShoppingCartItem
    {
        public int Quantity { get; set; } = default!;
        public string Color { get; set; } = default!;
        public decimal Price { get; set; } = default!;
        public Guid ProductId {  get; set; } = default!;
        public string ProductName { get; set; } = default!;
    }
}
```

## services/basket/BasketAPI/Program.cs

```text
using BuildingBlocksMessaging.MassTransit;

var builder = WebApplication.CreateBuilder(args);

// Add services to the container.

#region Application Services
var assembly = typeof(Program).Assembly;

builder.Services.AddCarter();

builder.Services.AddMediatR(cfg =>
{
    cfg.RegisterServicesFromAssemblyContaining<Program>();
    cfg.AddOpenBehavior(typeof(ValidationBehaviour<,>));
    cfg.AddOpenBehavior(typeof(LoggingBehaviour<,>));
});
#endregion

#region Data Services
builder.Services.AddMarten(options =>
{
    options.Connection(builder.Configuration.GetConnectionString("Database")!);
    options.Schema.For<ShoppingCart>().Identity(x => x.UserName);
}).UseLightweightSessions();

builder.Services.AddScoped<IBasketRepository, BasketRepository>();
builder.Services.Decorate<IBasketRepository, CachedBasketRepository>();

builder.Services.AddStackExchangeRedisCache(options =>
{
    options.Configuration = builder.Configuration.GetConnectionString("Redis");
});
#endregion

#region gRPC Services
builder.Services.AddGrpcClient<DiscountProtoService.DiscountProtoServiceClient>(options =>
{
    options.Address = new Uri(builder.Configuration["GrpcSettings:DiscountUrl"]!);
})
.ConfigurePrimaryHttpMessageHandler(() =>
{
    var handler = new HttpClientHandler
    {
        ServerCertificateCustomValidationCallback =
        HttpClientHandler.DangerousAcceptAnyServerCertificateValidator
    };
    return handler;
});
#endregion

#region Async Communication Services
builder.Services.AddMessageBroker(builder.Configuration);
#endregion

#region Cross-Cutting Services
builder.Services.AddExceptionHandler<CustomExceptionHandler>();

builder.Services.AddHealthChecks()
    .AddNpgSql(builder.Configuration.GetConnectionString("Database")!)
    .AddRedis(builder.Configuration.GetConnectionString("Redis")!);
#endregion

var app = builder.Build();

// Configure the HTTP request pipeline.
app.UseExceptionHandler(options => { });

app.MapCarter();
app.UseHealthChecks("/health",
    new HealthCheckOptions
    {
        ResponseWriter = UIResponseWriter.WriteHealthCheckUIResponse
    });

app.Run();
```

## services/basket/BasketAPI/Properties/launchSettings.json

```json
{
  "profiles": {
    "http": {
      "commandName": "Project",
      "launchBrowser": false,
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      },
      "dotnetRunMessages": true,
      "applicationUrl": "http://localhost:5001"
    },
    "https": {
      "commandName": "Project",
      "launchBrowser": false,
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      },
      "dotnetRunMessages": true,
      "applicationUrl": "https://localhost:5051;http://localhost:5001"
    },
    "Container (Dockerfile)": {
      "commandName": "Docker",
      "launchBrowser": true,
      "launchUrl": "{Scheme}://{ServiceHost}:{ServicePort}",
      "environmentVariables": {
        "ASPNETCORE_HTTPS_PORTS": "8081",
        "ASPNETCORE_HTTP_PORTS": "8080"
      },
      "publishAllPorts": true,
      "useSSL": true
    }
  },
  "$schema": "https://json.schemastore.org/launchsettings.json"
}
```

## services/catalog/CatalogAPI/appsettings.Development.json

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  }
}
```

## services/catalog/CatalogAPI/appsettings.json

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "ConnectionStrings": {
    "Database": "Server=localhost;Port=5432;Database=CatalogDb;User Id=postgres;Password=postgres;Include Error Detail=true"
  }
}
```

## services/catalog/CatalogAPI/CatalogAPI.csproj

```text
﻿<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
    <UserSecretsId>04322684-be3b-4895-8ce8-5e3f1f8ad396</UserSecretsId>
    <DockerDefaultTargetOS>Linux</DockerDefaultTargetOS>
    <DockerfileContext>..\..\..</DockerfileContext>
    <DockerComposeProjectPath>..\..\..\docker-compose.dcproj</DockerComposeProjectPath>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="AspNetCore.HealthChecks.NpgSql" Version="9.0.0" />
    <PackageReference Include="AspNetCore.HealthChecks.UI.Client" Version="9.0.0" />
    <PackageReference Include="Carter" Version="10.0.0" />
    <PackageReference Include="Marten" Version="8.17.0" />
    <PackageReference Include="Microsoft.VisualStudio.Azure.Containers.Tools.Targets" Version="1.23.0" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\..\..\BuildingBlocks\BuildingBlocks\BuildingBlocks.csproj" />
  </ItemGroup>

</Project>
```

## services/catalog/CatalogAPI/Data/CatalogInitialData.cs

```text
﻿
namespace CatalogAPI.Data
{
    public class CatalogInitialData : IInitialData
    {
        public async Task Populate(IDocumentStore store, CancellationToken cancellation)
        {
            using var session = store.LightweightSession();

            if (await session.Query<Product>().AnyAsync())
                return;

            session.Store(GetPreconfiguredProducts());
            await session.SaveChangesAsync();
        }

        private static IEnumerable<Product> GetPreconfiguredProducts() => new List<Product>()
            {
                new Product()
                {
                    Id = new Guid("5334c996-8457-4cf0-815c-ed2b77c4ff61"),
                    Name = "IPhone X",
                    Description = "This phone is the company's biggest change to its flagship smartphone in years. It includes a borderless.",
                    ImageFile = "product-1.png",
                    Price = 950.00M,
                    Category = new List<string> { "Smart Phone" }
                },
                new Product()
                {
                    Id = new Guid("c67d6323-e8b1-4bdf-9a75-b0d0d2e7e914"),
                    Name = "Samsung 10",
                    Description = "This phone is the company's biggest change to its flagship smartphone in years. It includes a borderless.",
                    ImageFile = "product-2.png",
                    Price = 840.00M,
                    Category = new List<string> { "Smart Phone" }
                },
                new Product()
                {
                    Id = new Guid("4f136e9f-ff8c-4c1f-9a33-d12f689bdab8"),
                    Name = "Huawei Plus",
                    Description = "This phone is the company's biggest change to its flagship smartphone in years. It includes a borderless.",
                    ImageFile = "product-3.png",
                    Price = 650.00M,
                    Category = new List<string> { "White Appliances" }
                },
                new Product()
                {
                    Id = new Guid("6ec1297b-ec0a-4aa1-be25-6726e3b51a27"),
                    Name = "Xiaomi Mi 9",
                    Description = "This phone is the company's biggest change to its flagship smartphone in years. It includes a borderless.",
                    ImageFile = "product-4.png",
                    Price = 470.00M,
                    Category = new List<string> { "White Appliances" }
                },
                new Product()
                {
                    Id = new Guid("b786103d-c621-4f5a-b498-23452610f88c"),
                    Name = "HTC U11+ Plus",
                    Description = "This phone is the company's biggest change to its flagship smartphone in years. It includes a borderless.",
                    ImageFile = "product-5.png",
                    Price = 380.00M,
                    Category = new List<string> { "Smart Phone" }
                },
                new Product()
                {
                    Id = new Guid("c4bbc4a2-4555-45d8-97cc-2a99b2167bff"),
                    Name = "LG G7 ThinQ",
                    Description = "This phone is the company's biggest change to its flagship smartphone in years. It includes a borderless.",
                    ImageFile = "product-6.png",
                    Price = 240.00M,
                    Category = new List<string> { "Home Kitchen" }
                },
                new Product()
                {
                    Id = new Guid("93170c85-7795-489c-8e8f-7dcf3b4f4188"),
                    Name = "Panasonic Lumix",
                    Description = "This phone is the company's biggest change to its flagship smartphone in years. It includes a borderless.",
                    ImageFile = "product-6.png",
                    Price = 240.00M,
                    Category = new List<string> { "Camera" }
                }
            };
    }
}
```

## services/catalog/CatalogAPI/Dockerfile

```text
# See https://aka.ms/customizecontainer to learn how to customize your debug container and how Visual Studio uses this Dockerfile to build your images for faster debugging.

# This stage is used when running from VS in fast mode (Default for Debug configuration)
FROM mcr.microsoft.com/dotnet/aspnet:10.0 AS base
WORKDIR /app
EXPOSE 8080
EXPOSE 8081


# This stage is used to build the service project
FROM mcr.microsoft.com/dotnet/sdk:10.0 AS build
ARG BUILD_CONFIGURATION=Release
WORKDIR /src
COPY ["services/catalog/CatalogAPI/CatalogAPI.csproj", "services/catalog/CatalogAPI/"]
COPY ["BuildingBlocks/BuildingBlocks/BuildingBlocks.csproj", "BuildingBlocks/BuildingBlocks/"]
RUN dotnet restore "./services/catalog/CatalogAPI/CatalogAPI.csproj"
COPY . .
WORKDIR "/src/services/catalog/CatalogAPI"
RUN dotnet build "./CatalogAPI.csproj" -c $BUILD_CONFIGURATION -o /app/build

# This stage is used to publish the service project to be copied to the final stage
FROM build AS publish
ARG BUILD_CONFIGURATION=Release
RUN dotnet publish "./CatalogAPI.csproj" -c $BUILD_CONFIGURATION -o /app/publish /p:UseAppHost=false

# This stage is used in production or when running from VS in regular mode (Default when not using the Debug configuration)
FROM base AS final
WORKDIR /app
COPY --from=publish /app/publish .
ENTRYPOINT ["dotnet", "CatalogAPI.dll"]
```

## services/catalog/CatalogAPI/Dockerfile.original

```text
# See https://aka.ms/customizecontainer to learn how to customize your debug container and how Visual Studio uses this Dockerfile to build your images for faster debugging.

# This stage is used when running from VS in fast mode (Default for Debug configuration)
FROM mcr.microsoft.com/dotnet/aspnet:10.0 AS base
USER $APP_UID
WORKDIR /app
EXPOSE 8080
EXPOSE 8081


# This stage is used to build the service project
FROM mcr.microsoft.com/dotnet/sdk:10.0 AS build
ARG BUILD_CONFIGURATION=Release
WORKDIR /src
COPY ["services/catalog/CatalogAPI/CatalogAPI.csproj", "services/catalog/CatalogAPI/"]
RUN dotnet restore "./services/catalog/CatalogAPI/CatalogAPI.csproj"
COPY . .
WORKDIR "/src/services/catalog/CatalogAPI"
RUN dotnet build "./CatalogAPI.csproj" -c $BUILD_CONFIGURATION -o /app/build

# This stage is used to publish the service project to be copied to the final stage
FROM build AS publish
ARG BUILD_CONFIGURATION=Release
RUN dotnet publish "./CatalogAPI.csproj" -c $BUILD_CONFIGURATION -o /app/publish /p:UseAppHost=false

# This stage is used in production or when running from VS in regular mode (Default when not using the Debug configuration)
FROM base AS final
WORKDIR /app
COPY --from=publish /app/publish .
ENTRYPOINT ["dotnet", "CatalogAPI.dll"]
```

## services/catalog/CatalogAPI/Exceptions/ProductNotFoundException.cs

```text
﻿using BuildingBlocks.Exceptions;

namespace CatalogAPI.Exceptions
{
    public class ProductNotFoundException : NotFoundException
    {
        public ProductNotFoundException(Guid Id) : base("Product", Id) { }
    }
}
```

## services/catalog/CatalogAPI/GlobalUsings.cs

```text
﻿global using Carter;
global using Mapster;
global using MediatR;
global using BuildingBlocks.CQRS;
global using CatalogAPI.Models;
global using Marten;
global using FluentValidation;
global using CatalogAPI.Exceptions;
global using BuildingBlocks.Behaviours;
global using BuildingBlocks.Exceptions.Handler;
global using Marten.Schema;
global using Marten.Pagination;
global using CatalogAPI.Data;
global using HealthChecks.UI.Client;
```

## services/catalog/CatalogAPI/Models/Product.cs

```text
﻿namespace CatalogAPI.Models
{
    public class Product
    {
        public Guid Id { get; set; }
        public string Name { get; set; } = default!;
        public string Description { get; set; } = default!;
        public decimal Price { get; set; }
        public List<string> Category { get; set; } = new();
        public string ImageFile { get; set; } = default!;


    }
}
```

## services/catalog/CatalogAPI/Products/CreateProduct/CreateProductEndpoint.cs

```text
﻿namespace CatalogAPI.Products.CreateProduct
{
    public record CreateProductRequest(string Name, List<string> Category, string Description, string ImageFile, decimal Price);
    public record CreateProductResponse(Guid Id);
    public class UpdateProductEndpoint : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapPost("/products", async (CreateProductRequest request, ISender sender) =>
            {
                var command = request.Adapt<CreateProductCommand>();
                var result = await sender.Send(command);
                var response = result.Adapt<CreateProductResponse>();
                return Results.Created($"/products/{response.Id}", response);
            })
            .WithName("CreateProduct")
            .Produces<CreateProductResponse>(StatusCodes.Status201Created)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .WithSummary("Create Product")
            .WithDescription("Create Product");
        }
    }
}
```

## services/catalog/CatalogAPI/Products/CreateProduct/CreateProductHandler.cs

```text
﻿namespace CatalogAPI.Products.CreateProduct
{
    public record CreateProductCommand(string Name, List<string> category, string Description, string ImageFile, decimal Price)
        : ICommand<CreateProductResult>;
    public record CreateProductResult(Guid Id);

    public class CreateProductCommandValidator : AbstractValidator<CreateProductCommand>
    {
        public CreateProductCommandValidator()
        {
            RuleFor(x => x.Name).NotEmpty().WithMessage("Name is required");
            RuleFor(x => x.category).NotEmpty().WithMessage("Category is required");
            RuleFor(x => x.ImageFile).NotEmpty().WithMessage("ImageFile is required");
            RuleFor(x => x.Price).GreaterThan(0).WithMessage("Price must be greater than zero");
        }
    }

    internal class CreateProductCommandHandler(IDocumentSession session)
        : ICommandHandler<CreateProductCommand, CreateProductResult>
    {
        public async Task<CreateProductResult> Handle(CreateProductCommand command, CancellationToken cancellationToken)
        {
            //create a product entity from command object
            //save to database
            //return CreateProductResult

            var product = new Product
            {
                Name = command.Name,
                Category = command.category,
                Description = command.Description,
                ImageFile = command.ImageFile,
                Price = command.Price
            };

            session.Store(product);
            await session.SaveChangesAsync(cancellationToken);

            return new CreateProductResult(product.Id);
        }
    }
}
```

## services/catalog/CatalogAPI/Products/DeleteProduct/DeleteProductEndpoint.cs

```text
﻿namespace CatalogAPI.Products.DeleteProduct
{
    public record DeleteProductResponse(bool IsSuccess);
    public class DeleteProductEndpoint : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapDelete("/products/{id}", async (Guid id, ISender sender) =>
            {
                var result = await sender.Send(new DeleteProductCommand(id));
                var response = result.Adapt<DeleteProductResponse>();
                return Results.Ok(response);
            })
            .WithName("DeleteProduct")
            .Produces<DeleteProductResponse>(StatusCodes.Status200OK)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .ProducesProblem(StatusCodes.Status404NotFound)
            .WithSummary("Delete Product")
            .WithDescription("Delete Product");
        }
    }
}
```

## services/catalog/CatalogAPI/Products/DeleteProduct/DeleteProductHandler.cs

```text
﻿namespace CatalogAPI.Products.DeleteProduct
{
    public record DeleteProductCommand(Guid Id)
        : ICommand<DeleteProductResult>;
    public record DeleteProductResult(bool IsSuccess);

    public class DeleteCommandValidator : AbstractValidator<DeleteProductCommand>
    {
        public DeleteCommandValidator()
        {
            RuleFor(c => c.Id).NotEmpty().WithMessage("Product ID is required");
        }
    }
    public class DeleteProductCommandHandler(IDocumentSession session)
        : ICommandHandler<DeleteProductCommand, DeleteProductResult>
    {
        public async Task<DeleteProductResult> Handle(DeleteProductCommand command, CancellationToken cancellationToken)
        {
            var product = session.Query<Product>().SingleOrDefault(x => x.Id == command.Id);
            if (product is null)
            {
                throw new ProductNotFoundException(command.Id);
            }
            session.Delete<Product>(product.Id);
            await session.SaveChangesAsync(cancellationToken);

            return new DeleteProductResult(true);
        }
    }
}
```

## services/catalog/CatalogAPI/Products/GetProductByCategory/GetProductByCategoryEndpoint.cs

```text
﻿namespace CatalogAPI.Products.GetProductByCategory
{
    public record GetProductByCategoryResponse(IEnumerable<Product> Products);
    public class GetProductByCategoryEndpoint : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapGet("/products/category/{category}", async (ISender sender, string category) =>
            {
                var result = await sender.Send(new GetProductByCategoryQuery(category));
                var response = result.Adapt<GetProductByCategoryResponse>();
                return Results.Ok(response);
            })
            .WithName("GetProductByCategory")
            .Produces<GetProductByCategoryResponse>(StatusCodes.Status200OK)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .WithSummary("Get Product By Category")
            .WithDescription("Get Product By Category");
        }
    }
}
```

## services/catalog/CatalogAPI/Products/GetProductByCategory/GetProductByCategoryHandler.cs

```text
﻿namespace CatalogAPI.Products.GetProductByCategory
{
    public record GetProductByCategoryQuery(string Category)
        : IQuery<GetProductByCategoryResult>;
    public record GetProductByCategoryResult(IEnumerable<Product> Products);

    internal class GetProductByCategoryQueryHandler
        (IDocumentSession session)
        : IQueryHandler<GetProductByCategoryQuery, GetProductByCategoryResult>
    {
        public async Task<GetProductByCategoryResult> Handle(GetProductByCategoryQuery query, CancellationToken cancellationToken)
        {
            var products = await session.Query<Product>()
                                        .Where(p => p.Category.Contains(query.Category))
                                        .ToListAsync();
            return new GetProductByCategoryResult(products);
        }
    }
}
```

## services/catalog/CatalogAPI/Products/GetProductById/GetProductByIdEndpoint.cs

```text
﻿namespace CatalogAPI.Products.GetProductById
{
    public record GetProductByIdResponse(Product Product);
    public class GetProductByCategoryEndpoint : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapGet("/products/{id}", async (ISender sender, Guid id) =>
            {
                var result = await sender.Send(new GetProductByIdQuery(id));
                var response = result.Adapt<GetProductByIdResponse>();
                return Results.Ok(response);                
            })
            .WithName("GetProductById")
            .Produces<GetProductByIdResponse>(StatusCodes.Status200OK)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .WithSummary("Get Product By Id")
            .WithDescription("Get Product By Id");
        }
    }
}
```

## services/catalog/CatalogAPI/Products/GetProductById/GetProductByIdHandler.cs

```text
﻿namespace CatalogAPI.Products.GetProductById
{
    public record GetProductByIdQuery(Guid id)
        : IQuery<GetProductByIdResult>;
    public record GetProductByIdResult(Product Product);

    internal class GetProductByIdQueryHandler
        (IDocumentSession session)
        : IQueryHandler<GetProductByIdQuery, GetProductByIdResult>
    {
        public async Task<GetProductByIdResult> Handle(GetProductByIdQuery query, CancellationToken cancellationToken)
        {
            var product = await session.Query<Product>().FirstOrDefaultAsync(p => p.Id == query.id, cancellationToken);
            if (product is null) throw new ProductNotFoundException(query.id);
            return new GetProductByIdResult(product!);
        }
    }
}
```

## services/catalog/CatalogAPI/Products/GetProducts/GetProductsEndpoint.cs

```text
﻿namespace CatalogAPI.Products.GetProducts
{
    public record GetProductsRequest(int? PageNumber = 1, int? PageSize = 10);
    public record GetProductsResponse(IEnumerable<Product> Products);
    public class GetProductByIdEndpoint : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapGet("/products", async ([AsParameters] GetProductsRequest request,ISender sender) =>
            {
                var query = request.Adapt<GetProductsQuery>();
                var result = await sender.Send(query);
                var response = result.Adapt<GetProductsResponse>();
                return Results.Ok(response);
            })
            .WithName("GetProducts")
            .Produces<GetProductsResponse>(StatusCodes.Status200OK)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .WithSummary("Get Products")
            .WithDescription("Get Products");
        }
    }
}
```

## services/catalog/CatalogAPI/Products/GetProducts/GetProductsHandler.cs

```text
﻿namespace CatalogAPI.Products.GetProducts
{
    public record GetProductsQuery(int? PageNumber = 1, int? PageSize = 10)
        : IQuery<GetProductsResult>;
    public record GetProductsResult(IEnumerable<Product> Products);

    internal class GetProductsQueryHandler
        (IDocumentSession session)
        : IQueryHandler<GetProductsQuery, GetProductsResult>
    {
        public async Task<GetProductsResult> Handle(GetProductsQuery query, CancellationToken cancellationToken)
        {
            var products = await session.Query<Product>()
                                        .ToPagedListAsync(query.PageNumber ?? 1, query.PageSize ?? 10, cancellationToken);

            return new GetProductsResult(products);
        }
    }
}
```

## services/catalog/CatalogAPI/Products/UpadateProduct/UpdateProductEndpoint.cs

```text
﻿namespace CatalogAPI.Products.UpdateProduct
{
    public record UpdateProductRequest(Guid Id, string Name, List<string> Category, string Description, string ImageFile, decimal Price);
    public record UpdateProductResponse(bool IsSuccess);
    public class DeleteProductEndpoint : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapPut("/products", async (UpdateProductRequest request, ISender sender) =>
            {
                var command = request.Adapt<UpdateProductCommand>();
                var result = await sender.Send(command);
                var response = result.Adapt<UpdateProductResponse>();
                return Results.Ok(response);
            })
            .WithName("UpdateProduct")
            .Produces<UpdateProductResponse>(StatusCodes.Status200OK)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .ProducesProblem(StatusCodes.Status404NotFound)
            .WithSummary("Update Product")
            .WithDescription("Update Product");
        }
    }
}
```

## services/catalog/CatalogAPI/Products/UpadateProduct/UpdateProductHandler.cs

```text
﻿namespace CatalogAPI.Products.UpdateProduct
{
    public record UpdateProductCommand(Guid Id,string Name, List<string> category, string Description, string ImageFile, decimal Price)
        : ICommand<UpdateProductResult>;
    public record UpdateProductResult(bool IsSuccess);

    public class UpdateProductCommandValidator : AbstractValidator<UpdateProductCommand>
    {
        public UpdateProductCommandValidator()
        {
            RuleFor(c => c.Id).NotEmpty().WithMessage("Product ID is required");
            RuleFor(c => c.Name).NotEmpty().WithMessage("Name is required")
                                .Length(2, 150).WithMessage("Name must be between 2 and 150 characters");

            RuleFor(c => c.Price).GreaterThan(0).WithMessage("Price must be greater than 0");        
        }
    }

    internal class UpdateProductCommandHandler(IDocumentSession session)
        : ICommandHandler<UpdateProductCommand, UpdateProductResult>
    {
        public async Task<UpdateProductResult> Handle(UpdateProductCommand command, CancellationToken cancellationToken)
        {
            var product = await session.Query<Product>()
                .FirstOrDefaultAsync(p => p.Id == command.Id, cancellationToken);
            if (product is null)
                throw new ProductNotFoundException(command.Id);

            product.Name = command.Name;
            product.Category = command.category;
            product.Description = command.Description;
            product.ImageFile = command.ImageFile;
            product.Price = command.Price;

            session.Update(product);
            await session.SaveChangesAsync(cancellationToken);

            return new UpdateProductResult(true);
        }
    }
}
```

## services/catalog/CatalogAPI/Program.cs

```text
var builder = WebApplication.CreateBuilder(args);

// Add services to the container.
var assembly = typeof(Program).Assembly;
builder.Services.AddMediatR(config =>
{
    config.RegisterServicesFromAssembly(assembly);
    config.AddOpenBehavior(typeof(ValidationBehaviour<,>));
    config.AddOpenBehavior(typeof(LoggingBehaviour<,>));
});

builder.Services.AddValidatorsFromAssembly(assembly);

builder.Services.AddCarter();

builder.Services.AddMarten(options =>
{
    options.Connection(builder.Configuration.GetConnectionString("Database")!);
}).UseLightweightSessions();

if(builder.Environment.IsDevelopment())
{
    builder.Services.InitializeMartenWith<CatalogInitialData>();
}

builder.Services.AddExceptionHandler<CustomExceptionHandler>();

//adding health checks
builder.Services.AddHealthChecks()
       .AddNpgSql(builder.Configuration.GetConnectionString("Database")!);

var app = builder.Build();

//Configure the HTTP request pipeline.
app.UseExceptionHandler(options => { });

app.MapCarter();

app.UseHealthChecks("/health",
    new Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckOptions
    {
        ResponseWriter = UIResponseWriter.WriteHealthCheckUIResponse
    });

app.Run();
```

## services/catalog/CatalogAPI/Properties/launchSettings.json

```json
{
  "profiles": {
    "http": {
      "commandName": "Project",
      "launchBrowser": false,
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      },
      "dotnetRunMessages": true,
      "applicationUrl": "http://localhost:5000"
    },
    "https": {
      "commandName": "Project",
      "launchBrowser": false,
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      },
      "dotnetRunMessages": true,
      "applicationUrl": "https://localhost:5050;http://localhost:5000"
    },
    "Container (Dockerfile)": {
      "commandName": "Docker",
      "launchBrowser": true,
      "launchUrl": "{Scheme}://{ServiceHost}:{ServicePort}",
      "environmentVariables": {
        "ASPNETCORE_HTTPS_PORTS": "8081",
        "ASPNETCORE_HTTP_PORTS": "8080"
      },
      "publishAllPorts": true,
      "useSSL": true
    }
  },
  "$schema": "https://json.schemastore.org/launchsettings.json"
}
```

## services/discount/DiscountGrpc/appsettings.Development.json

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  }
}
```

## services/discount/DiscountGrpc/appsettings.json

```json
{
  "ConnectionStrings": {
    "Database" : "Data Source=Data/discountdb"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Information"
    }
  },
  "AllowedHosts": "*",
  "Kestrel": {
    "EndpointDefaults": {
      "Protocols": "Http2"
    }
  }
}
```

## services/discount/DiscountGrpc/Data/DiscountContext.cs

```text
﻿using DiscountGrpc.Models;
using Microsoft.EntityFrameworkCore;

namespace DiscountGrpc.Data
{
    public class DiscountContext : DbContext
    {
        public DbSet<Coupon> Coupons { get; set; } = default!;

        public DiscountContext(DbContextOptions<DiscountContext> options)
            : base(options)
        {
        }

        protected override void OnModelCreating(ModelBuilder modelBuilder)
        {
            modelBuilder.Entity<Coupon>().HasData(
                new Coupon
                {
                    Id = 1,
                    ProductName = "IPhone X",
                    Description = "IPhone Discount",
                    Amount = 150
                },
                new Coupon
                {
                    Id = 2,
                    ProductName = "Samsung 10",
                    Description = "Samsung Discount",
                    Amount = 100
                }
            );
        }
    }
}
```

## services/discount/DiscountGrpc/Data/Extentions.cs

```text
﻿using Microsoft.EntityFrameworkCore;

namespace DiscountGrpc.Data
{
    public static class Extentions
    {
        public static IApplicationBuilder UseMigration(this IApplicationBuilder app)
        {
            using (var scope = app.ApplicationServices.CreateScope())
            {
                var context = scope.ServiceProvider.GetRequiredService<DiscountContext>();
                context.Database.MigrateAsync();
            }
            return app;
        }
    }
}
```

## services/discount/DiscountGrpc/DiscountGrpc.csproj

```text
﻿<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
    <UserSecretsId>bfef8992-b39a-4b4d-a06e-594546980f2f</UserSecretsId>
    <DockerDefaultTargetOS>Linux</DockerDefaultTargetOS>
    <DockerfileContext>..\..\..</DockerfileContext>
    <DockerComposeProjectPath>..\..\..\docker-compose.dcproj</DockerComposeProjectPath>
  </PropertyGroup>

  <ItemGroup>
    <None Remove="Protos\discount.proto" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="Grpc.AspNetCore" Version="2.76.0" />
    <PackageReference Include="Mapster" Version="7.4.0" />
    <PackageReference Include="Microsoft.EntityFrameworkCore.Sqlite" Version="10.0.2" />
    <PackageReference Include="Microsoft.EntityFrameworkCore.Tools" Version="10.0.2">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
    <PackageReference Include="Microsoft.VisualStudio.Azure.Containers.Tools.Targets" Version="1.23.0" />
  </ItemGroup>

  <ItemGroup>
    <Protobuf Include="Protos\discount.proto" GrpcServices="Server" />
  </ItemGroup>

</Project>
```

## services/discount/DiscountGrpc/Dockerfile

```text
# See https://aka.ms/customizecontainer to learn how to customize your debug container and how Visual Studio uses this Dockerfile to build your images for faster debugging.

# This stage is used when running from VS in fast mode (Default for Debug configuration)
FROM mcr.microsoft.com/dotnet/aspnet:10.0 AS base
USER $APP_UID
WORKDIR /app
EXPOSE 8080
EXPOSE 8081


# This stage is used to build the service project
FROM mcr.microsoft.com/dotnet/sdk:10.0 AS build
ARG BUILD_CONFIGURATION=Release
WORKDIR /src
COPY ["services/discount/DiscountGrpc/DiscountGrpc.csproj", "services/discount/DiscountGrpc/"]
RUN dotnet restore "./services/discount/DiscountGrpc/DiscountGrpc.csproj"
COPY . .
WORKDIR "/src/services/discount/DiscountGrpc"
RUN dotnet build "./DiscountGrpc.csproj" -c $BUILD_CONFIGURATION -o /app/build

# This stage is used to publish the service project to be copied to the final stage
FROM build AS publish
ARG BUILD_CONFIGURATION=Release
RUN dotnet publish "./DiscountGrpc.csproj" -c $BUILD_CONFIGURATION -o /app/publish /p:UseAppHost=false

# This stage is used in production or when running from VS in regular mode (Default when not using the Debug configuration)
FROM base AS final
WORKDIR /app
COPY --from=publish /app/publish .
ENTRYPOINT ["dotnet", "DiscountGrpc.dll"]
```

## services/discount/DiscountGrpc/Migrations/20260116154734_InitialCreate.Designer.cs

```text
﻿// <auto-generated />
using DiscountGrpc.Data;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;

#nullable disable

namespace DiscountGrpc.Migrations
{
    [DbContext(typeof(DiscountContext))]
    [Migration("20260116154734_InitialCreate")]
    partial class InitialCreate
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder.HasAnnotation("ProductVersion", "10.0.2");

            modelBuilder.Entity("DiscountGrpc.Models.Coupon", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("INTEGER");

                    b.Property<double>("Amount")
                        .HasColumnType("REAL");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasColumnType("TEXT");

                    b.Property<string>("ProductName")
                        .IsRequired()
                        .HasColumnType("TEXT");

                    b.HasKey("Id");

                    b.ToTable("Coupons");

                    b.HasData(
                        new
                        {
                            Id = 1,
                            Amount = 150.0,
                            Description = "IPhone Discount",
                            ProductName = "IPhone X"
                        },
                        new
                        {
                            Id = 2,
                            Amount = 100.0,
                            Description = "Samsung Discount",
                            ProductName = "Samsung 10"
                        });
                });
#pragma warning restore 612, 618
        }
    }
}
```

## services/discount/DiscountGrpc/Migrations/20260119062353_Amount datatype change in coupon model.cs

```text
﻿using Microsoft.EntityFrameworkCore.Migrations;

#nullable disable

namespace DiscountGrpc.Migrations
{
    /// <inheritdoc />
    public partial class Amountdatatypechangeincouponmodel : Migration
    {
        /// <inheritdoc />
        protected override void Up(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.AlterColumn<int>(
                name: "Amount",
                table: "Coupons",
                type: "INTEGER",
                nullable: false,
                oldClrType: typeof(double),
                oldType: "REAL");

            migrationBuilder.UpdateData(
                table: "Coupons",
                keyColumn: "Id",
                keyValue: 1,
                column: "Amount",
                value: 150);

            migrationBuilder.UpdateData(
                table: "Coupons",
                keyColumn: "Id",
                keyValue: 2,
                column: "Amount",
                value: 100);
        }

        /// <inheritdoc />
        protected override void Down(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.AlterColumn<double>(
                name: "Amount",
                table: "Coupons",
                type: "REAL",
                nullable: false,
                oldClrType: typeof(int),
                oldType: "INTEGER");

            migrationBuilder.UpdateData(
                table: "Coupons",
                keyColumn: "Id",
                keyValue: 1,
                column: "Amount",
                value: 150.0);

            migrationBuilder.UpdateData(
                table: "Coupons",
                keyColumn: "Id",
                keyValue: 2,
                column: "Amount",
                value: 100.0);
        }
    }
}
```

## services/discount/DiscountGrpc/Migrations/20260119062353_Amount datatype change in coupon model.Designer.cs

```text
﻿// <auto-generated />
using DiscountGrpc.Data;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;

#nullable disable

namespace DiscountGrpc.Migrations
{
    [DbContext(typeof(DiscountContext))]
    [Migration("20260119062353_Amount datatype change in coupon model")]
    partial class Amountdatatypechangeincouponmodel
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder.HasAnnotation("ProductVersion", "10.0.2");

            modelBuilder.Entity("DiscountGrpc.Models.Coupon", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("INTEGER");

                    b.Property<int>("Amount")
                        .HasColumnType("INTEGER");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasColumnType("TEXT");

                    b.Property<string>("ProductName")
                        .IsRequired()
                        .HasColumnType("TEXT");

                    b.HasKey("Id");

                    b.ToTable("Coupons");

                    b.HasData(
                        new
                        {
                            Id = 1,
                            Amount = 150,
                            Description = "IPhone Discount",
                            ProductName = "IPhone X"
                        },
                        new
                        {
                            Id = 2,
                            Amount = 100,
                            Description = "Samsung Discount",
                            ProductName = "Samsung 10"
                        });
                });
#pragma warning restore 612, 618
        }
    }
}
```

## services/discount/DiscountGrpc/Migrations/DiscountContextModelSnapshot.cs

```text
﻿// <auto-generated />
using DiscountGrpc.Data;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;

#nullable disable

namespace DiscountGrpc.Migrations
{
    [DbContext(typeof(DiscountContext))]
    partial class DiscountContextModelSnapshot : ModelSnapshot
    {
        protected override void BuildModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder.HasAnnotation("ProductVersion", "10.0.2");

            modelBuilder.Entity("DiscountGrpc.Models.Coupon", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("INTEGER");

                    b.Property<int>("Amount")
                        .HasColumnType("INTEGER");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasColumnType("TEXT");

                    b.Property<string>("ProductName")
                        .IsRequired()
                        .HasColumnType("TEXT");

                    b.HasKey("Id");

                    b.ToTable("Coupons");

                    b.HasData(
                        new
                        {
                            Id = 1,
                            Amount = 150,
                            Description = "IPhone Discount",
                            ProductName = "IPhone X"
                        },
                        new
                        {
                            Id = 2,
                            Amount = 100,
                            Description = "Samsung Discount",
                            ProductName = "Samsung 10"
                        });
                });
#pragma warning restore 612, 618
        }
    }
}
```

## services/discount/DiscountGrpc/Models/Coupon.cs

```text
﻿namespace DiscountGrpc.Models
{
    public class Coupon
    {
        public int Id { get; set; }
        public string ProductName { get; set; } = default!;
        public string Description { get; set; } = default!;
        public int Amount { get; set; }
    }
}
```

## services/discount/DiscountGrpc/Program.cs

```text
using DiscountGrpc.Data;
using DiscountGrpc.Services;
using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);

// Add services to the container.
builder.Services.AddGrpc();

builder.Services.AddDbContext<DiscountContext>(options =>
{
    options.UseSqlite(builder.Configuration.GetConnectionString("Database"));
});

var app = builder.Build();

// Configure the HTTP request  pipeline.
app.UseMigration();
app.MapGrpcService<DiscountService>();
app.MapGet("/", () => "Communication with gRPC endpoints must be made through a gRPC client. To learn how to create a client, visit: https://go.microsoft.com/fwlink/?linkid=2086909");

app.Run();
```

## services/discount/DiscountGrpc/Properties/launchSettings.json

```json
{
  "profiles": {
    "http": {
      "commandName": "Project",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      },
      "dotnetRunMessages": true,
      "applicationUrl": "http://localhost:5002"
    },
    "https": {
      "commandName": "Project",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      },
      "dotnetRunMessages": true,
      "applicationUrl": "https://localhost:5052;http://localhost:5002"
    },
    "Container (Dockerfile)": {
      "commandName": "Docker",
      "launchUrl": "{Scheme}://{ServiceHost}:{ServicePort}",
      "environmentVariables": {
        "ASPNETCORE_HTTPS_PORTS": "8081",
        "ASPNETCORE_HTTP_PORTS": "8080"
      },
      "publishAllPorts": true,
      "useSSL": true
    }
  },
  "$schema": "https://json.schemastore.org/launchsettings.json"
}
```

## services/discount/DiscountGrpc/Protos/discount.proto

```text
syntax = "proto3";

option csharp_namespace = "DiscountGrpc";

package discount;

//The discount service definition.
service DiscountProtoService {
	//Gets the discount for a product by its name.
	rpc GetDiscount (GetDiscountRequest) returns (CouponModel);

	//Creates a new discount for a product.
	rpc CreateDiscount (CreateDiscountRequest) returns (CouponModel);

	//Updates an existing discount for a product.
	rpc UpdateDiscount (UpdateDiscountRequest) returns (CouponModel);

	//Deletes the discount for a product by its name.
	rpc DeleteDiscount (DeleteDiscountRequest) returns (DeleteDiscountResponse);
}

message GetDiscountRequest {
	string productName = 1;
}

message CouponModel{
	int32 id = 1;
	string productName = 2;
	string description = 3;
	int32 amount = 4;
}

message CreateDiscountRequest {
	CouponModel coupon = 1;
}

message UpdateDiscountRequest {
	CouponModel coupon = 1;
}

message DeleteDiscountRequest {
	string productName = 1;
}

message DeleteDiscountResponse {
	bool success = 1;
}
```

## services/discount/DiscountGrpc/Services/DiscountService.cs

```text
﻿using DiscountGrpc.Data;
using Grpc.Core;
using Mapster;
using Microsoft.EntityFrameworkCore;

namespace DiscountGrpc.Services
{
    public class DiscountService
        (DiscountContext dbContext, ILogger<DiscountService> logger)
        : DiscountProtoService.DiscountProtoServiceBase
    {
        public override async Task<CouponModel> GetDiscount(GetDiscountRequest request, ServerCallContext context)
        {
            //todo get discount from database
            var coupon = await dbContext.Coupons.FirstOrDefaultAsync(x => x.ProductName == request.ProductName);
            if (coupon is null) 
                coupon = new Models.Coupon { ProductName="No Discount", Amount=0, Description="No Discount Discription"};
            logger.LogInformation("Discount is retrvied for ProductName : {productName}, Amount : {amount}", coupon.ProductName, coupon.Amount);
            return coupon.Adapt<CouponModel>();
        }

        public async override Task<CouponModel> CreateDiscount(CreateDiscountRequest request, ServerCallContext context)
        {
            var coupon = request.Coupon.Adapt<Models.Coupon>();
            if(coupon is null)
                throw new RpcException(new Status(StatusCode.InvalidArgument, "Coupon data is null"));
            dbContext.Coupons.Add(coupon);
            await dbContext.SaveChangesAsync();
            logger.LogInformation("Discount is successfully created. ProductName : {ProductName}", coupon.ProductName);
            return coupon.Adapt<CouponModel>();
        }
        
        public async override Task<CouponModel> UpdateDiscount(UpdateDiscountRequest request, ServerCallContext context)
        {
            var coupon = request.Coupon.Adapt<Models.Coupon>();
            if(coupon is null)
                throw new RpcException(new Status(StatusCode.InvalidArgument, "Coupon data is null"));
            var existingCoupon = await dbContext.Coupons
                                .FirstOrDefaultAsync(x => x.Id == request.Coupon.Id);

            if (existingCoupon is null)
                throw new RpcException(new Status(
                    StatusCode.NotFound, "Coupon not found"));

            existingCoupon.ProductName = request.Coupon.ProductName;
            existingCoupon.Description = request.Coupon.Description;
            existingCoupon.Amount = request.Coupon.Amount;

            await dbContext.SaveChangesAsync();

            logger.LogInformation("Discount is successfully updated. ProductName : {ProductName}", coupon.ProductName);
            return existingCoupon.Adapt<CouponModel>();
        }

        public async override Task<DeleteDiscountResponse> DeleteDiscount(DeleteDiscountRequest request, ServerCallContext context)
        {
            var existingCoupon = await dbContext.Coupons
                                .FirstOrDefaultAsync(x => x.ProductName == request.ProductName);

            if (existingCoupon is null)
                throw new RpcException(new Status(
                    StatusCode.NotFound, "Coupon not found"));
            dbContext.Coupons.Remove(existingCoupon);
            await dbContext.SaveChangesAsync();

            logger.LogInformation("Discount is successfully deleted. ProductName : {ProductName}", request.ProductName);
            return new DeleteDiscountResponse { Success = true };
        }
    }
}
```

## services/ordering/OrderingAPI/appsettings.Development.json

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  }
}
```

## services/ordering/OrderingAPI/DependencyInjection.cs

```text
﻿using BuildingBlocks.Exceptions.Handler;

namespace OrderingAPI
{
    public static class DependencyInjection
    {
        public static IServiceCollection AddApiServices(this IServiceCollection services, IConfiguration configuration)
        {
            services.AddCarter();

            services.AddExceptionHandler<CustomExceptionHandler>();

            services.AddHealthChecks()
                .AddSqlServer(configuration.GetConnectionString("Database")!);

            return services;
        }

        public static WebApplication UseApiServices(this WebApplication app)
        {
            app.UseExceptionHandler(options => { });

            app.MapCarter();

            app.UseHealthChecks("/health",
                new HealthCheckOptions
                {
                    ResponseWriter = UIResponseWriter.WriteHealthCheckUIResponse
                });

            return app;
        }
    }
}
```

## services/ordering/OrderingAPI/Dockerfile

```text
# See https://aka.ms/customizecontainer to learn how to customize your debug container and how Visual Studio uses this Dockerfile to build your images for faster debugging.

# This stage is used when running from VS in fast mode (Default for Debug configuration)
FROM mcr.microsoft.com/dotnet/aspnet:10.0 AS base
USER $APP_UID
WORKDIR /app
EXPOSE 8080
EXPOSE 8081


# This stage is used to build the service project
FROM mcr.microsoft.com/dotnet/sdk:10.0 AS build
ARG BUILD_CONFIGURATION=Release
WORKDIR /src
COPY ["services/ordering/OrderingAPI/OrderingAPI.csproj", "services/ordering/OrderingAPI/"]
COPY ["services/ordering/OrderingApplication/OrderingApplication.csproj", "services/ordering/OrderingApplication/"]
COPY ["BuildingBlocks/BuildingBlocksMessaging/BuildingBlocksMessaging.csproj", "BuildingBlocks/BuildingBlocksMessaging/"]
COPY ["BuildingBlocks/BuildingBlocks/BuildingBlocks.csproj", "BuildingBlocks/BuildingBlocks/"]
COPY ["services/ordering/OrderingDomain/OrderingDomain.csproj", "services/ordering/OrderingDomain/"]
COPY ["services/ordering/OrderingInfrastructure/OrderingInfrastructure.csproj", "services/ordering/OrderingInfrastructure/"]
RUN dotnet restore "./services/ordering/OrderingAPI/OrderingAPI.csproj"
COPY . .
WORKDIR "/src/services/ordering/OrderingAPI"
RUN dotnet build "./OrderingAPI.csproj" -c $BUILD_CONFIGURATION -o /app/build

# This stage is used to publish the service project to be copied to the final stage
FROM build AS publish
ARG BUILD_CONFIGURATION=Release
RUN dotnet publish "./OrderingAPI.csproj" -c $BUILD_CONFIGURATION -o /app/publish /p:UseAppHost=false

# This stage is used in production or when running from VS in regular mode (Default when not using the Debug configuration)
FROM base AS final
WORKDIR /app
COPY --from=publish /app/publish .
ENTRYPOINT ["dotnet", "OrderingAPI.dll"]
```

## services/ordering/OrderingAPI/Dockerfile.original

```text
# See https://aka.ms/customizecontainer to learn how to customize your debug container and how Visual Studio uses this Dockerfile to build your images for faster debugging.

# This stage is used when running from VS in fast mode (Default for Debug configuration)
FROM mcr.microsoft.com/dotnet/aspnet:10.0 AS base
USER $APP_UID
WORKDIR /app
EXPOSE 8080
EXPOSE 8081


# This stage is used to build the service project
FROM mcr.microsoft.com/dotnet/sdk:10.0 AS build
ARG BUILD_CONFIGURATION=Release
WORKDIR /src
COPY ["services/ordering/OrderingAPI/OrderingAPI.csproj", "services/ordering/OrderingAPI/"]
RUN dotnet restore "./services/ordering/OrderingAPI/OrderingAPI.csproj"
COPY . .
WORKDIR "/src/services/ordering/OrderingAPI"
RUN dotnet build "./OrderingAPI.csproj" -c $BUILD_CONFIGURATION -o /app/build

# This stage is used to publish the service project to be copied to the final stage
FROM build AS publish
ARG BUILD_CONFIGURATION=Release
RUN dotnet publish "./OrderingAPI.csproj" -c $BUILD_CONFIGURATION -o /app/publish /p:UseAppHost=false

# This stage is used in production or when running from VS in regular mode (Default when not using the Debug configuration)
FROM base AS final
WORKDIR /app
COPY --from=publish /app/publish .
ENTRYPOINT ["dotnet", "OrderingAPI.dll"]
```

## services/ordering/OrderingAPI/Endpoints/CreateOrder.cs

```text
﻿using OrderingApplication.Orders.Commands.CreateOrder;

namespace OrderingAPI.Endpoints
{
    public record CreateOrderRequest(OrderDto Order);
    public record CreateOrderResponse(Guid Id);

    public class CreateOrder
        : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapPost("/orders", async (CreateOrderRequest request, ISender sender) =>
            {
                var command = request.Adapt<CreateOrderCommand>();

                var result = await sender.Send(command);

                var response = result.Adapt<CreateOrderResponse>();

                return Results.Created($"/orders/{response.Id}", response);
            })
            .WithName("CreateOrder")
            .Produces<CreateOrderResponse>(StatusCodes.Status201Created)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .WithSummary("Create Order")
            .WithDescription("Create Order");
        }
    }
}
```

## services/ordering/OrderingAPI/Endpoints/DeleteOrder.cs

```text
﻿using OrderingApplication.Orders.Commands.DeleteOrder;

namespace OrderingAPI.Endpoints
{
    //public record DeleteOrderRequest(Guid Id);
    public record DeleteOrderResponse(bool IsSuccess);

    public class DeleteOrder : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapDelete("/orders/{id}", async (Guid id, ISender sender) =>
            {
                var result = await sender.Send(new DeleteOrderCommand(id));
                
                var response = result.Adapt<DeleteOrderResponse>();

                return Results.Ok(response);
            })
            .WithName("DeleteOrder")
            .Produces < DeleteOrderResponse>(StatusCodes.Status200OK)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .ProducesProblem(StatusCodes.Status404NotFound)
            .WithSummary("Delete Order")
            .WithDescription("Delete Order");
        }
    }
}
```

## services/ordering/OrderingAPI/Endpoints/GetOrders.cs

```text
﻿using BuildingBlocks.Pagination;
using OrderingApplication.Orders.Queries.GetOrders;

namespace OrderingAPI.Endpoints
{
    //public record GetOrdersRequest(PaginationRequest PaginationRequest);
    public record GetOrdersResponse(PaginatedResult<OrderDto> Orders);

    public class GetOrders : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapGet("/orders", async ([AsParameters] PaginationRequest request, ISender sender) =>
            {
                var result = await sender.Send(new GetOrdersQuery(request));

                var response = result.Adapt<GetOrdersResponse>();

                return Results.Ok(response);
            })
            .WithName("GetOrders")
            .Produces<GetOrdersResponse>(StatusCodes.Status200OK)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .ProducesProblem(StatusCodes.Status404NotFound)
            .WithSummary("Get Orders")
            .WithDescription("Get Orders");
        }
    }
}
```

## services/ordering/OrderingAPI/Endpoints/GetOrdersByCustomer.cs

```text
﻿using OrderingApplication.Orders.Queries.GetOrdersByCustomer;

namespace OrderingAPI.Endpoints
{
    //public record GetOrdersByCustomerRequest(Guid CustomerId);
    public record GetOrdersByCustomerResponse(IEnumerable<OrderDto> Orders);

    public class GetOrdersByCustomer : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapGet("/orders/customer/{customerId}", async (Guid customerId, ISender sender) =>
            {
                var result = await sender.Send(new GetOrdersByCustomerQuery(customerId));

                var response = result.Adapt<GetOrdersByCustomerResponse>();

                return Results.Ok(response);
            })
            .WithName("GetOrdersByCustomer")
            .Produces<GetOrdersByCustomerResponse>(StatusCodes.Status200OK)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .ProducesProblem(StatusCodes.Status404NotFound)
            .WithSummary("Get Orders By Customer")
            .WithDescription("Get Orders By Customer");
        }
    }
}
```

## services/ordering/OrderingAPI/Endpoints/GetOrdersByName.cs

```text
﻿using OrderingApplication.Orders.Queries.GetOrdersByName;

namespace OrderingAPI.Endpoints
{
    //public record GetOrdersByNameRequest(string Name);
    public record GetOrdersByNameResponse(IEnumerable<OrderDto> Orders);

    public class GetOrdersByName : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapGet("/orders/{orderName}", async (string orderName, ISender sender) =>
            {
                var result = await sender.Send(new GetOrdersByNameQuery(orderName));

                var response = result.Adapt<GetOrdersByNameResponse>();

                return Results.Ok(response);
            })
            .WithName("GetOrdersByName")
            .Produces<GetOrdersByNameResponse>(StatusCodes.Status200OK)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .ProducesProblem(StatusCodes.Status404NotFound)
            .WithSummary("Get Orders By Name")
            .WithDescription("Get Orders By Name");
        }
    }
}
```

## services/ordering/OrderingAPI/Endpoints/UpdateOrder.cs

```text
﻿using OrderingApplication.Orders.Commands.UpadateOrder;

namespace OrderingAPI.Endpoints
{
    public record UpdateOrderRequest(OrderDto Order);
    public record UpdateOrderResponse(bool IsSuccess);

    public class UpdateOrder : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapPut("/orders", async (UpdateOrderRequest request, ISender sender) =>
            {
                var command = request.Adapt<UpdateOrderCommand>();

                var result = await sender.Send(command);

                var response = result.Adapt<UpdateOrderResponse>();

                return Results.Ok(response);
            })
            .WithName("UpdateOrder")
            .Produces<UpdateOrderResponse>(StatusCodes.Status200OK)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .WithSummary("Update Order")
            .WithDescription("Update Order");
        }
    }
}
```

## services/ordering/OrderingAPI/GlobalUsing.cs

```text
﻿global using OrderingAPI;
global using OrderingApplication;
global using OrderingInfrastructure;
global using OrderingInfrastructure.Data.Extentions;
global using Carter;
global using Mapster;
global using MediatR;
global using OrderingApplication.Dtos;
global using Microsoft.AspNetCore.Diagnostics.HealthChecks;
global using HealthChecks.UI.Client;
```

## services/ordering/OrderingAPI/OrderingAPI.csproj

```text
﻿<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
    <UserSecretsId>493a6192-286a-4e27-88b5-d20ade55c85b</UserSecretsId>
    <DockerDefaultTargetOS>Linux</DockerDefaultTargetOS>
    <DockerfileContext>..\..\..</DockerfileContext>
    <DockerComposeProjectPath>..\..\..\docker-compose.dcproj</DockerComposeProjectPath>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="AspNetCore.HealthChecks.SqlServer" Version="9.0.0" />
    <PackageReference Include="AspNetCore.HealthChecks.UI.Client" Version="9.0.0" />
    <PackageReference Include="Carter" Version="10.0.0" />
    <PackageReference Include="Microsoft.EntityFrameworkCore.Design" Version="10.0.2">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
    <PackageReference Include="Microsoft.VisualStudio.Azure.Containers.Tools.Targets" Version="1.23.0" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\OrderingApplication\OrderingApplication.csproj" />
    <ProjectReference Include="..\OrderingInfrastructure\OrderingInfrastructure.csproj" />
  </ItemGroup>

</Project>
```

## services/ordering/OrderingAPI/Program.cs

```text
var builder = WebApplication.CreateBuilder(args);

// Add services to the container.
builder.Services
    .AddApplicationServices(builder.Configuration)
    .AddInfrastructureServices(builder.Configuration)
    .AddApiServices(builder.Configuration);

var app = builder.Build();

// Configure the HTTP request pipeline.
app.UseApiServices();

if (app.Environment.IsDevelopment())
{
    await app.InitializeDatabaseAsync();
}

app.Run();
```

## services/ordering/OrderingAPI/Properties/launchSettings.json

```json
{
  "profiles": {
    "http": {
      "commandName": "Project",
      "launchBrowser": false,
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      },
      "dotnetRunMessages": true,
      "applicationUrl": "http://localhost:5003"
    },
    "https": {
      "commandName": "Project",
      "launchBrowser": false,
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      },
      "dotnetRunMessages": true,
      "applicationUrl": "https://localhost:5053;http://localhost:5003"
    },
    "Container (Dockerfile)": {
      "commandName": "Docker",
      "launchBrowser": true,
      "launchUrl": "{Scheme}://{ServiceHost}:{ServicePort}",
      "environmentVariables": {
        "ASPNETCORE_HTTPS_PORTS": "8081",
        "ASPNETCORE_HTTP_PORTS": "8080"
      },
      "publishAllPorts": true,
      "useSSL": true
    }
  },
  "$schema": "https://json.schemastore.org/launchsettings.json"
}
```

## services/ordering/OrderingApplication/Data/IApplicationDbContext.cs

```text
﻿using Microsoft.EntityFrameworkCore;
using OrderingDomain.Models;

namespace OrderingApplication.Data
{
    public interface IApplicationDbContext
    {
        DbSet<Customer> Customers { get; }
        DbSet<Product> Products { get; }
        DbSet<Order> Orders { get; }
        DbSet<OrderItem> OrderItems { get; }

        Task<int> SaveChangesAsync(CancellationToken cancellationToken);
    }
}
```

## services/ordering/OrderingApplication/DependencyInjection.cs

```text
﻿using BuildingBlocks.Behaviours;
using BuildingBlocksMessaging.MassTransit;
using Microsoft.Extensions.Configuration;
using Microsoft.FeatureManagement;

namespace OrderingApplication
{
    public static class DependencyInjection
    {
        public static IServiceCollection  AddApplicationServices
            (this IServiceCollection services, IConfiguration configuration)
        {
            services.AddMediatR(cfg =>
            {
                cfg.RegisterServicesFromAssembly(Assembly.GetExecutingAssembly());
                cfg.AddOpenBehavior(typeof(ValidationBehaviour<,>));
                cfg.AddOpenBehavior(typeof(LoggingBehaviour<,>));
            });

            services.AddFeatureManagement();
            services.AddMessageBroker(configuration, Assembly.GetExecutingAssembly());

            return services;
        }
    }
}
```

## services/ordering/OrderingApplication/Dtos/AddressDto.cs

```text
﻿namespace OrderingApplication.Dtos
{
    public record AddressDto
    (
        string FirstName,
        string LastName,
        string EmailAddress,
        string AddressLine,
        string Country,
        string State,
        string ZipCode
    );
}
```

## services/ordering/OrderingApplication/Dtos/OrderDto.cs

```text
﻿namespace OrderingApplication.Dtos
{
    public record OrderDto
    (
        Guid Id,
        Guid CustomerId,
        string OrderName,
        AddressDto ShippingAddress,
        AddressDto BillingAddress,
        PaymentDto Payment,
        OrderStatus Status,
        List<OrderItemDto> OrderItems
    );
}
```

## services/ordering/OrderingApplication/Dtos/OrderItemDto.cs

```text
﻿namespace OrderingApplication.Dtos
{
    public record OrderItemDto
    (
        Guid OrderId,
        Guid ProductId,
        int Quantity,
        decimal Price
    );
}
```

## services/ordering/OrderingApplication/Dtos/PaymentDto.cs

```text
﻿namespace OrderingApplication.Dtos
{
    public record PaymentDto
    (
        string CardName,
        string CardNumber,
        string Expiration,
        string Cvv,
        int PaymentMethod
    );
}
```

## services/ordering/OrderingApplication/Exceptions/OrderNotFoundException.cs

```text
﻿namespace OrderingApplication.Exceptions
{
    public class OrderNotFoundException : NotFoundException
    {
        public OrderNotFoundException(Guid id) : base("Order", id)
        {   
        }
    }
}
```

## services/ordering/OrderingApplication/Extensions/OrderExtensions.cs

```text
﻿namespace OrderingApplication.Extensions
{
    public static class OrderExtensions
    {
        public static IEnumerable<OrderDto> ToOrderDtoList(this IEnumerable<Order> orders)
        {
            return orders.Select(order => new OrderDto(
                    Id: order.Id.Value,
                    CustomerId: order.CustomerId.Value,
                    OrderName: order.OrderName.Value,
                    ShippingAddress: new AddressDto(
                        order.ShippingAddress.FirstName,
                        order.ShippingAddress.LastName,
                        order.ShippingAddress.EmailAddress,
                        order.ShippingAddress.AddressLine,
                        order.ShippingAddress.Country,
                        order.ShippingAddress.State,
                        order.ShippingAddress.ZipCode),
                    BillingAddress: new AddressDto(
                        order.BillingAddress.FirstName,
                        order.BillingAddress.LastName,
                        order.BillingAddress.EmailAddress,
                        order.BillingAddress.AddressLine,
                        order.BillingAddress.Country,
                        order.BillingAddress.State,
                        order.BillingAddress.ZipCode),
                    Payment: new PaymentDto(
                        order.Payment.CardName,
                        order.Payment.CardNumber,
                        order.Payment.Expiration,
                        order.Payment.Cvv,
                        order.Payment.PaymentMethod),
                    Status: order.Status,
                    OrderItems: order.OrderItems.Select(oi =>
                                new OrderItemDto(
                                    oi.OrderId.Value,
                                    oi.ProductId.Value,
                                    oi.Quantity,
                                    oi.Price)).ToList()
            ));
        }
    
        public static OrderDto ToOrderDto(this Order order)
        {
            return new OrderDto(
                    Id: order.Id.Value,
                    CustomerId: order.CustomerId.Value,
                    OrderName: order.OrderName.Value,
                    ShippingAddress: new AddressDto(order.ShippingAddress.FirstName, order.ShippingAddress.LastName, order.ShippingAddress.EmailAddress, order.ShippingAddress.AddressLine, order.ShippingAddress.Country, order.ShippingAddress.State, order.ShippingAddress.ZipCode),
                    BillingAddress: new AddressDto(order.ShippingAddress.FirstName, order.ShippingAddress.LastName, order.ShippingAddress.EmailAddress, order.ShippingAddress.AddressLine, order.ShippingAddress.Country, order.ShippingAddress.State, order.ShippingAddress.ZipCode),
                    Payment: new PaymentDto(order.Payment.CardName, order.Payment.CardNumber, order.Payment.Expiration, order.Payment.Cvv, order.Payment.PaymentMethod),
                    Status: order.Status,
                    OrderItems: order.OrderItems.Select(oi => new OrderItemDto(oi.OrderId.Value, oi.ProductId.Value, oi.Quantity, oi.Price)).ToList()
                );
        }
    }
}
```

## services/ordering/OrderingApplication/GlobalUsing.cs

```text
﻿global using Microsoft.Extensions.DependencyInjection;
global using System.Reflection;
global using OrderingDomain.Enums;
global using BuildingBlocks.CQRS;
global using OrderingApplication.Dtos;
global using FluentValidation;
global using OrderingApplication.Data;
global using OrderingDomain.Models;
global using OrderingDomain.ValueObjects;
global using BuildingBlocks.Exceptions;
global using OrderingApplication.Exceptions;
global using MediatR;
global using Microsoft.Extensions.Logging;
global using OrderingDomain.Events;
global using Microsoft.EntityFrameworkCore;
global using OrderingApplication.Extensions;
global using BuildingBlocks.Pagination;
```

## services/ordering/OrderingApplication/OrderingApplication.csproj

```text
﻿<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>

  <ItemGroup>
    <ProjectReference Include="..\..\..\BuildingBlocks\BuildingBlocksMessaging\BuildingBlocksMessaging.csproj" />
    <ProjectReference Include="..\..\..\BuildingBlocks\BuildingBlocks\BuildingBlocks.csproj" />
    <ProjectReference Include="..\OrderingDomain\OrderingDomain.csproj" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.EntityFrameworkCore" Version="10.0.2" />
  </ItemGroup>

</Project>
```

## services/ordering/OrderingApplication/Orders/Commands/CreateOrder/CreateOrderCommand.cs

```text
﻿namespace OrderingApplication.Orders.Commands.CreateOrder
{
    public record CreateOrderCommand(OrderDto Order)
        : ICommand<CreateOrderResult>;

    public record CreateOrderResult(Guid Id);

    public class CreateOrderCommandValidator
        : AbstractValidator<CreateOrderCommand>
    {
        public CreateOrderCommandValidator()
        {
            RuleFor(x => x.Order.OrderName).NotEmpty()
                .WithMessage("Name is required");
            RuleFor(x => x.Order.CustomerId).NotEmpty()
                .WithMessage("CustomerId is required");
            RuleFor(x => x.Order.OrderItems).NotEmpty()
                .WithMessage("OrderItems should not be empty");
        }
    }
}
```

## services/ordering/OrderingApplication/Orders/Commands/CreateOrder/CreateOrderHandler.cs

```text
﻿namespace OrderingApplication.Orders.Commands.CreateOrder
{
    public class CreateOrderHandler
        (IApplicationDbContext dbContext)
        : ICommandHandler<CreateOrderCommand, CreateOrderResult>
    {
        public async Task<CreateOrderResult> Handle(CreateOrderCommand command, CancellationToken cancellationToken)
        {
            var order = CreateNewOrder(command.Order);
            dbContext.Orders.Add(order);
            await dbContext.SaveChangesAsync(cancellationToken);

            return new CreateOrderResult(order.Id.Value);
        }

        private Order CreateNewOrder(OrderDto orderDto)
        {
            var shippingAddress = Address.Of(orderDto.ShippingAddress.FirstName,
                                             orderDto.ShippingAddress.LastName,
                                             orderDto.ShippingAddress.EmailAddress,
                                             orderDto.ShippingAddress.AddressLine,
                                             orderDto.ShippingAddress.Country,
                                             orderDto.ShippingAddress.State,
                                             orderDto.ShippingAddress.ZipCode);

            var billingAddress = Address.Of(orderDto.BillingAddress.FirstName,
                                            orderDto.BillingAddress.LastName,   
                                            orderDto.BillingAddress.EmailAddress,
                                            orderDto.BillingAddress.AddressLine,
                                            orderDto.BillingAddress.Country,
                                            orderDto.BillingAddress.State,
                                            orderDto.BillingAddress.ZipCode);

            var newOrder = Order.Create(
                id: OrderId.Of(Guid.NewGuid()),
                customerId: CustomerId.Of(orderDto.CustomerId),
                orderName: OrderName.Of(orderDto.OrderName),
                shippingAddress: shippingAddress,
                billingAddress: billingAddress,
                payment: Payment.Of(
                    orderDto.Payment.CardName,
                    orderDto.Payment.CardNumber,
                    orderDto.Payment.Expiration,
                    orderDto.Payment.Cvv,
                    orderDto.Payment.PaymentMethod));

            foreach (var orderItemDto in orderDto.OrderItems)
            {
                newOrder.Add(ProductId.Of(orderItemDto.ProductId), orderItemDto.Quantity, orderItemDto.Price);
            }
            return newOrder;
        }
    }
}
```

## services/ordering/OrderingApplication/Orders/Commands/DeleteOrder/DeleteOrderCommand.cs

```text
﻿namespace OrderingApplication.Orders.Commands.DeleteOrder
{
    public record DeleteOrderCommand(Guid OrderId)
        : ICommand<DeleteOrderResult>;

    public record DeleteOrderResult(bool IsSuccess);

    public class DeleteOrderCommandValidator
        : AbstractValidator<DeleteOrderCommand>
    {
        public DeleteOrderCommandValidator()
        {
            RuleFor(x => x.OrderId)
                .NotEmpty().WithMessage("OrderId is required");
        }
    }   
}
```

## services/ordering/OrderingApplication/Orders/Commands/DeleteOrder/DeleteOrderHandler.cs

```text
﻿namespace OrderingApplication.Orders.Commands.DeleteOrder
{
    public class DeleteOrderHandler(IApplicationDbContext dbContext)
        : ICommandHandler<DeleteOrderCommand, DeleteOrderResult>
    {
        public async Task<DeleteOrderResult> Handle(DeleteOrderCommand command, CancellationToken cancellationToken)
        {
            var orderId = OrderId.Of(command.OrderId);
            var order = await dbContext.Orders
                .FindAsync([orderId], cancellationToken: cancellationToken);

            if (order is null)
                throw new OrderNotFoundException(command.OrderId);

            dbContext.Orders.Remove(order);
            await dbContext.SaveChangesAsync(cancellationToken);

            return new DeleteOrderResult(true);
        }
    }
}
```

## services/ordering/OrderingApplication/Orders/Commands/UpadateOrder/UpdateOrderCommand.cs

```text
﻿namespace OrderingApplication.Orders.Commands.UpadateOrder
{
    public record UpdateOrderCommand(OrderDto Order)
        : ICommand<UpdateOrderResult>;

    public record UpdateOrderResult(bool IsSuccess);

    public class UpdateOrderCommandValidator
        : AbstractValidator<UpdateOrderCommand>
    {
        public UpdateOrderCommandValidator()
        {
            RuleFor(x => x.Order.Id).NotEmpty()
                .WithMessage("Id is required");
            RuleFor(x => x.Order.OrderName).NotEmpty()
                .WithMessage("Name is required");
            RuleFor(x => x.Order.CustomerId).NotEmpty()
                .WithMessage("CustomerId is required");
        }
    }
}
```

## services/ordering/OrderingApplication/Orders/Commands/UpadateOrder/UpdateOrderHandler.cs

```text
﻿namespace OrderingApplication.Orders.Commands.UpadateOrder
{
    public class UpdateOrderHandler(IApplicationDbContext dbContext)
        : ICommandHandler<UpdateOrderCommand, UpdateOrderResult>
    {
        public async Task<UpdateOrderResult> Handle(UpdateOrderCommand command, CancellationToken cancellationToken)
        {
            var orderId = OrderId.Of(command.Order.Id);
            var order = await dbContext.Orders
                .Include(o => o.OrderItems)
                .SingleOrDefaultAsync(o => o.Id == orderId);

            if(order is null)
                throw new OrderNotFoundException(command.Order.Id);

            UpdateOrderWithNewValues(order, command.Order);

            dbContext.Orders.Update(order);
            await dbContext.SaveChangesAsync(cancellationToken);

            return new UpdateOrderResult(true);
        }

        public void UpdateOrderWithNewValues(Order order, OrderDto orderDto)
        {
            var updatedShippingAddress = Address.Of(orderDto.ShippingAddress.FirstName,
                                             orderDto.ShippingAddress.LastName,
                                             orderDto.ShippingAddress.EmailAddress,
                                             orderDto.ShippingAddress.AddressLine,
                                             orderDto.ShippingAddress.Country,
                                             orderDto.ShippingAddress.State,
                                             orderDto.ShippingAddress.ZipCode);

            var updatedBillingAddress = Address.Of(orderDto.BillingAddress.FirstName,
                                            orderDto.BillingAddress.LastName,
                                            orderDto.BillingAddress.EmailAddress,
                                            orderDto.BillingAddress.AddressLine,
                                            orderDto.BillingAddress.Country,
                                            orderDto.BillingAddress.State,
                                            orderDto.BillingAddress.ZipCode);
            
            var updatedPayment = Payment.Of(
                                    orderDto.Payment.CardName,
                                    orderDto.Payment.CardNumber,
                                    orderDto.Payment.Expiration,
                                    orderDto.Payment.Cvv,
                                    orderDto.Payment.PaymentMethod);

            order.Update(
                orderName: OrderName.Of(orderDto.OrderName),
                shippingAddress: updatedShippingAddress,
                billingAddress: updatedBillingAddress,
                payment: updatedPayment,
                status: orderDto.Status);

            order.UpdateOrderItems(
                    orderDto.OrderItems.Select(x =>
                        new UpdateOrderItem(
                            ProductId.Of(x.ProductId),
                            x.Quantity,
                            x.Price
                        )));
        }
    }
}
```

## services/ordering/OrderingApplication/Orders/EventHandlers/Domain/OrderCreatedEventHandler.cs

```text
﻿using MassTransit;
using Microsoft.FeatureManagement;

namespace OrderingApplication.Orders.EventHandlers.Domain
{
    public class OrderCreatedEventHandler
        (IPublishEndpoint publishEndpoint, IFeatureManager featureManager, ILogger<OrderCreatedEventHandler> logger)
        : INotificationHandler<OrderCreatedEvent>
    {
        public async Task Handle(OrderCreatedEvent notification, CancellationToken cancellationToken)
        {
            logger.LogInformation("Domain Event handled: {DomainEvent}", notification.GetType().Name);
            
            if(await featureManager.IsEnabledAsync("OrderFullfilment"))
            {
                var orderCreatedInterairedEvent = notification.order.ToOrderDto();
                await publishEndpoint.Publish(orderCreatedInterairedEvent, cancellationToken);
            }
        }
    }
}
```

## services/ordering/OrderingApplication/Orders/EventHandlers/Domain/OrderUpdatedEventHandler.cs

```text
﻿namespace OrderingApplication.Orders.EventHandlers.Domain
{
    public class OrderUpdatedEventHandler(ILogger<OrderUpdatedEventHandler> logger)
        : INotificationHandler<OrderUpdatedEvent>
    {
        public Task Handle(OrderUpdatedEvent notification, CancellationToken cancellationToken)
        {
            logger.LogInformation("Domain Event handled: {DomainEvent}", notification.GetType().Name);
            return Task.CompletedTask;
        }
    }
}
```

## services/ordering/OrderingApplication/Orders/EventHandlers/Integration/BasketCheckoutEventHandler.cs

```text
﻿using BuildingBlocksMessaging.Events;
using MassTransit;
using OrderingApplication.Orders.Commands.CreateOrder;

namespace OrderingApplication.Orders.EventHandlers.Integration
{
    public class BasketCheckoutEventHandler
        (ISender sender, ILogger<BasketCheckoutEventHandler> logger)
        : IConsumer<BasketCheckoutEvent>
    {
        public async Task Consume(ConsumeContext<BasketCheckoutEvent> context)
        {
            // create new order and start order fullfillment process
            logger.LogInformation("Integration Event handled: {IntegrationEvent}", context.Message.GetType().Name);

            var command = MapToCreateOrderCommand(context.Message);
            await sender.Send(command);
        }

        private CreateOrderCommand MapToCreateOrderCommand(BasketCheckoutEvent message)
        {
            //create full order with incoming event data
            var addressDto = new AddressDto(message.FirstName, message.LastName, message.EmailAddress, message.AddressLine, message.Country, message.State, message.ZipCode);
            var paymentDto = new PaymentDto(message.CardName, message.CardNumber, message.Expiration, message.Cvv, message.PaymentMethod);
            var orderId = Guid.NewGuid();

            var orderDto = new OrderDto(
                Id: orderId,
                CustomerId: message.CustomerId,
                OrderName: message.UserName,
                ShippingAddress: addressDto,
                BillingAddress: addressDto,
                Payment: paymentDto,
                Status: OrderStatus.Pending,
                OrderItems:
                [
                    new OrderItemDto(orderId, new Guid("5334c996-8457-4cf0-815c-ed2b77c4ff61"), 2, 500),
                    new OrderItemDto(orderId, new Guid("c67d6323-e8b1-4bdf-9a75-b0d0d2e7e914"), 1, 400)
                ]);

            return new CreateOrderCommand(orderDto);
        }
    }
}
```

## services/ordering/OrderingApplication/Orders/Queries/GetOrders/GetOrdersHandler.cs

```text
﻿using Microsoft.EntityFrameworkCore;

namespace OrderingApplication.Orders.Queries.GetOrders
{
    public class GetOrdersHandler
        (IApplicationDbContext dbContext)
        : IQueryHandler<GetOrdersQuery, GetOrdersResult>
    {
        public async Task<GetOrdersResult> Handle(GetOrdersQuery query, CancellationToken cancellationToken)
        {
            //get orders with pagination 
            //return result
            var pageIndex = query.PaginationRequest.pageIndex;
            var pageSize = query.PaginationRequest.pageSize;
            var totalCount = await dbContext.Orders.LongCountAsync();
            var orders = await dbContext.Orders
                .Include(o => o.OrderItems)
                .OrderBy(o => o.OrderName.Value)
                .Skip(pageSize * pageIndex)
                .Take(pageSize)
                .ToListAsync();

            return new GetOrdersResult(
                new PaginatedResult<OrderDto>(
                    pageIndex,
                    pageSize,
                    totalCount,
                    orders.ToOrderDtoList())); 
        }
    }
}
```

## services/ordering/OrderingApplication/Orders/Queries/GetOrders/GetOrdersQuery.cs

```text
﻿namespace OrderingApplication.Orders.Queries.GetOrders
{
    public record GetOrdersQuery
        (PaginationRequest PaginationRequest)
        : IQuery<GetOrdersResult>;

    public record GetOrdersResult(PaginatedResult<OrderDto> Orders);
}
```

## services/ordering/OrderingApplication/Orders/Queries/GetOrdersByCustomer/GetOrdersByCustomerHandler.cs

```text
﻿namespace OrderingApplication.Orders.Queries.GetOrdersByCustomer
{
    public class GetOrdersByCustomerHandler
        (IApplicationDbContext dbContext)
        : IQueryHandler<GetOrdersByCustomerQuery, GetOrdersByCustomerResult>
    {
        public async Task<GetOrdersByCustomerResult> Handle(GetOrdersByCustomerQuery query, CancellationToken cancellationToken)
        {
            //get orders by customer using dbContext and
            //return coverted result to OrderDto using our Custom extension method
            var orders = await dbContext.Orders
                .Include(o => o.OrderItems)
                .AsNoTracking()
                .Where(o => o.CustomerId == CustomerId.Of(query.CustomerId))
                .OrderBy(o => o.OrderName.Value)
                .ToListAsync();

            return new GetOrdersByCustomerResult(orders.ToOrderDtoList());
        }
    }
}
```

## services/ordering/OrderingApplication/Orders/Queries/GetOrdersByCustomer/GetOrdersByCustomerQuery.cs

```text
﻿
namespace OrderingApplication.Orders.Queries.GetOrdersByCustomer
{
    public record GetOrdersByCustomerQuery(Guid CustomerId)
        : IQuery<GetOrdersByCustomerResult>;

    public record GetOrdersByCustomerResult(IEnumerable<OrderDto> Orders);
}
```

## services/ordering/OrderingApplication/Orders/Queries/GetOrdersByName/GetOrdersByNameHandler.cs

```text
﻿using OrderingApplication.Extensions;

namespace OrderingApplication.Orders.Queries.GetOrdersByName
{
    public class GetOrdersByNameHandler
        (IApplicationDbContext dbContext)
        : IQueryHandler<GetOrdersByNameQuery, GetOrdersByNameResult>
    {
        public async Task<GetOrdersByNameResult> Handle(GetOrdersByNameQuery query, CancellationToken cancellationToken)
        {
            var orders = await dbContext.Orders
                .Include(o => o.OrderItems)
                .AsNoTracking()
                .Where(o => o.OrderName.Value.Contains(query.name))
                .OrderBy(o => o.OrderName.Value)
                .ToListAsync(cancellationToken);

            return new GetOrdersByNameResult(orders.ToOrderDtoList());
        }
    }
}
```

## services/ordering/OrderingApplication/Orders/Queries/GetOrdersByName/GetOrdersByNameQuery.cs

```text
﻿namespace OrderingApplication.Orders.Queries.GetOrdersByName
{
    public record GetOrdersByNameQuery(string name)
        : IQuery<GetOrdersByNameResult>;

    public record GetOrdersByNameResult(IEnumerable<OrderDto> Orders);
}
```

## services/ordering/OrderingDomain/Abstractions/Aggregate.cs

```text
﻿
namespace OrderingDomain.Abstractions
{
    public class Aggregate<TId> : Entity<TId>, IAggregate<TId>
    {
        private readonly List<IDomainEvent> _domainEvents = new();
        public IReadOnlyList<IDomainEvent> DomainEvents => _domainEvents.AsReadOnly();

        public void AddDomainEvent(IDomainEvent domainEvent)
        {
            _domainEvents.Add(domainEvent);
        }

        public IDomainEvent[] ClearDomainEvents()
        {
            IDomainEvent[] dequeuedEvents = _domainEvents.ToArray();
            _domainEvents.Clear();
            return dequeuedEvents;
        }
    }
}
```

## services/ordering/OrderingDomain/Abstractions/Entity.cs

```text
﻿using System;
using System.Collections.Generic;
using System.Text;

namespace OrderingDomain.Abstractions
{
    public abstract class Entity<T> : IEntity<T>
    {
        public T Id { get; set; }
        public DateTime? CreatedAt { get; set; }
        public string? CreatedBy { get; set; }
        public DateTime? LastModifiedAt { get; set; }
        public string? LastModifiedBy { get; set; }
    }
}
```

## services/ordering/OrderingDomain/Abstractions/IAggregate.cs

```text
﻿namespace OrderingDomain.Abstractions
{
    public interface IAggregate<T> : IAggregate, IEntity<T>
    {
    }
    public interface IAggregate : IEntity
    {
        IReadOnlyList<IDomainEvent> DomainEvents { get; }
        IDomainEvent[] ClearDomainEvents();
    }
}
```

## services/ordering/OrderingDomain/Abstractions/IDomainEvent.cs

```text
﻿using MediatR;

namespace OrderingDomain.Abstractions
{
    public interface IDomainEvent : INotification
    {
        Guid EventId => Guid.NewGuid();
        public DateTime OccuredOn => DateTime.Now;
        public string EventType => GetType().AssemblyQualifiedName;
    }
}
```

## services/ordering/OrderingDomain/Abstractions/IEntity.cs

```text
﻿namespace OrderingDomain.Abstractions
{
    public interface IEntity<T> : IEntity
    {
        public T Id { get; set; }
    }

    public interface IEntity
    {
        public DateTime? CreatedAt {  get; set; }
        public string? CreatedBy { get; set; }
        public DateTime? LastModifiedAt { get; set; }
        public string? LastModifiedBy { get; set; }
    }
}
```

## services/ordering/OrderingDomain/Enums/OrderStatus.cs

```text
﻿namespace OrderingDomain.Enums
{
    public enum OrderStatus
    {
        Draft = 1,
        Pending = 2,
        Completed = 3,
        Cancelled = 4
    }
}
```

## services/ordering/OrderingDomain/Events/OrderCreatedEvent.cs

```text
﻿namespace OrderingDomain.Events
{
    public record OrderCreatedEvent(Order order) : IDomainEvent;
}
```

## services/ordering/OrderingDomain/Events/OrderUpdatedEvent.cs

```text
﻿namespace OrderingDomain.Events
{
    public record OrderUpdatedEvent(Order order) : IDomainEvent;
}
```

## services/ordering/OrderingDomain/Exceptions/DomainException.cs

```text
﻿ namespace OrderingDomain.Exceptions
{
    public class DomainException : Exception
    {
        public DomainException(string message) 
            : base($"Domain Exception: \"{message}\" throws for Domain Layer.")
        {
        }
    }
}
```

## services/ordering/OrderingDomain/GlobalUsing.cs

```text
﻿global using OrderingDomain.Abstractions;
global using OrderingDomain.Enums;
global using OrderingDomain.ValueObjects;
global using OrderingDomain.Exceptions;
global using OrderingDomain.Models;
global using OrderingDomain.Events;
```

## services/ordering/OrderingDomain/Models/Customer.cs

```text
﻿namespace OrderingDomain.Models
{
    public class Customer : Entity<CustomerId>
    {
        public string Name { get; private set; } = default!;
        public string Email { get; private set; } = default!;

        public static Customer Create(CustomerId id,string name, string email)
        {
            ArgumentException.ThrowIfNullOrEmpty(name);
            ArgumentException.ThrowIfNullOrEmpty(email);

            var customer = new Customer
            {
                Id = id,
                Name = name,
                Email = email
            };

            return customer;
        }
    }
}
```

## services/ordering/OrderingDomain/Models/Order.cs

```text
﻿namespace OrderingDomain.Models
{
    public record UpdateOrderItem(
        ProductId ProductId,
        int Quantity,
        decimal Price
    );


    public class Order : Aggregate<OrderId>
    {
        private readonly List<OrderItem> _orderItems = new();
        public IReadOnlyList<OrderItem> OrderItems => _orderItems.AsReadOnly();
        public CustomerId CustomerId { get; private set; } = default!;
        public OrderName OrderName { get; private set; } = default!;
        public Address ShippingAddress { get; private set; } = default!;  
        public Address BillingAddress { get; private set; } = default!;
        public Payment Payment { get; private set; } = default!;
        public OrderStatus Status { get; private set; } = OrderStatus.Pending;
        public decimal TotalPrice
        {
            get => OrderItems.Sum(item => item.Price * item.Quantity);
            private set { }
        }

        public static Order Create(OrderId id, CustomerId customerId, OrderName orderName, Address shippingAddress, Address billingAddress, Payment payment)
        {
            var order = new Order
            {
                Id = id,
                CustomerId = customerId,
                OrderName = orderName,
                ShippingAddress = shippingAddress,
                BillingAddress = billingAddress,
                Payment = payment,
                Status = OrderStatus.Pending
            };
            order.AddDomainEvent(new OrderCreatedEvent(order));
            return order;
        }

        public void Update(OrderName orderName, Address shippingAddress, Address billingAddress, Payment payment, OrderStatus status)
        {
            OrderName = orderName;
            ShippingAddress = shippingAddress;
            BillingAddress = billingAddress;
            Payment = payment;
            Status = status;
                
            AddDomainEvent(new OrderUpdatedEvent(this));
        }

        public void Add(ProductId productId, int quantity, decimal price)
        {
            ArgumentOutOfRangeException.ThrowIfNegativeOrZero(quantity);
            ArgumentOutOfRangeException.ThrowIfNegativeOrZero(price);
            var orderItem = new OrderItem(Id,productId, quantity, price);
            _orderItems.Add(orderItem);
        }

        public void Remove(ProductId productId)
        {
            var orderItem = _orderItems.FirstOrDefault(oi => oi.ProductId == productId);
            if (orderItem is not null) 
                _orderItems.Remove(orderItem);
        }
        public void UpdateOrderItems(IEnumerable<UpdateOrderItem> items)
        {
            var itemsByProductId = items.ToDictionary(i => i.ProductId.Value);

            _orderItems.RemoveAll(
                item => !itemsByProductId.ContainsKey(item.ProductId.Value)
            );

            foreach (var item in items)
            {
                var existing = _orderItems
                    .SingleOrDefault(i => i.ProductId == item.ProductId);

                if (existing is not null)
                {
                    existing.Update(item.Quantity, item.Price);
                }
                else
                {
                    _orderItems.Add(
                        new OrderItem(
                            orderId: Id,
                            productId: item.ProductId,
                            quantity: item.Quantity,
                            price: item.Price
                        )
                    );
                }
            }
        }
    }
}
```

## services/ordering/OrderingDomain/Models/OrderItem.cs

```text
﻿namespace OrderingDomain.Models
{
    public class OrderItem : Entity<OrderItemId>
    {
        public OrderItem(OrderId orderId, ProductId productId, int quantity, decimal price)
        {
            Id = OrderItemId.Of(Guid.NewGuid());
            OrderId = orderId;
            ProductId = productId;
            Quantity = quantity;
            Price = price;
        }

        public OrderId OrderId { get; private set; } = default!;
        public ProductId ProductId { get; private set; } = default!;
        public int Quantity { get; private set; } = default!;
        public decimal Price { get; private set; } = default!;

        public void Update(int quantity, decimal price)
        {
            ArgumentOutOfRangeException.ThrowIfNegativeOrZero(quantity);
            ArgumentOutOfRangeException.ThrowIfNegativeOrZero(price);

            Quantity = quantity;
            Price = price;
        }

    }
}
```

## services/ordering/OrderingDomain/Models/Product.cs

```text
﻿namespace OrderingDomain.Models
{
    public class Product : Entity<ProductId>
    {
        public string Name { get; private set; } = default!;
        public decimal Price { get; private set; } = default!;
        public static Product Create(ProductId id, string name, decimal price)
        {
            ArgumentException.ThrowIfNullOrEmpty(name);
            ArgumentOutOfRangeException.ThrowIfNegativeOrZero(price);

            var product = new Product
            {
                Id = id,
                Name = name,
                Price = price,
            };

            return product;
        }
    }
}
```

## services/ordering/OrderingDomain/OrderingDomain.csproj

```text
﻿<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="MediatR" Version="14.0.0" />
  </ItemGroup>

</Project>
```

## services/ordering/OrderingDomain/ValueObjects/Address.cs

```text
﻿namespace OrderingDomain.ValueObjects
{
    public record Address
    {

        public string FirstName { get; } = default!;
        public string LastName { get; } = default!;
        public string? EmailAddress { get; } = default!;
        public string AddressLine { get; } = default!;
        public string Country { get; } = default!;
        public string State { get; } = default!;
        public string ZipCode { get; } = default!;
        protected Address() { }
        private Address(string firstName, string lastName, string? emailAddress, string addressLine, string country, string state, string zipCode)
        {
            FirstName = firstName;
            LastName = lastName;
            EmailAddress = emailAddress;
            AddressLine = addressLine;
            Country = country;
            State = state;
            ZipCode = zipCode;
        }
        public static Address Of(string firstName, string lastName, string? emailAddress, string addressLine, string country, string state, string zipCode)
        {
            ArgumentException.ThrowIfNullOrWhiteSpace(emailAddress);
            ArgumentException.ThrowIfNullOrWhiteSpace(addressLine);
            return new Address(firstName, lastName, emailAddress, addressLine, country, state, zipCode);
        }
    }
}
```

## services/ordering/OrderingDomain/ValueObjects/CustomerId.cs

```text
﻿namespace OrderingDomain.ValueObjects
{
    public record CustomerId
    {
        public Guid Value { get; }
        private CustomerId(Guid value) => Value = value;
        public static CustomerId Of(Guid value)
        {
            ArgumentNullException.ThrowIfNull(value);
            if(value == Guid.Empty)
            {
                throw new DomainException("CustomerId cannot be empty");
            }

            return new CustomerId(value);
        }
    }
}
```

## services/ordering/OrderingDomain/ValueObjects/OrderId.cs

```text
﻿namespace OrderingDomain.ValueObjects
{
    public record OrderId
    {
        public Guid Value { get; }
        private OrderId(Guid value) => Value = value;
        public static OrderId Of(Guid value)
        {
            ArgumentNullException.ThrowIfNull(value);
            if (value == Guid.Empty)
            {
                throw new DomainException("OrderId cannot be empty");
            }

            return new OrderId(value);
        }
    }
}
```

## services/ordering/OrderingDomain/ValueObjects/OrderItemId.cs

```text
﻿namespace OrderingDomain.ValueObjects
{
    public record OrderItemId
    {
        public Guid Value { get; }
        private OrderItemId(Guid value) => Value = value;
        public static OrderItemId Of(Guid value)
        {
            ArgumentNullException.ThrowIfNull(value);
            if (value == Guid.Empty)
            {
                throw new DomainException("OrderItemId cannot be empty");
            }

            return new OrderItemId(value);
        }
    }
}
```

## services/ordering/OrderingDomain/ValueObjects/OrderName.cs

```text
﻿namespace OrderingDomain.ValueObjects
{
    public record OrderName
    {
        private const int DefautLength = 5;
        public string Value { get; }
        private OrderName(string value) => Value = value;
        public static OrderName Of(string value)
        {
            ArgumentException.ThrowIfNullOrWhiteSpace(value);
            //ArgumentOutOfRangeException.ThrowIfNotEqual(value.Length, DefautLength);

            return new OrderName(value);
        }

    }
}
```

## services/ordering/OrderingDomain/ValueObjects/Payment.cs

```text
﻿using System.Diagnostics.Metrics;
using System.Net.Mail;
using System.Reflection.Emit;

namespace OrderingDomain.ValueObjects
{
    public record Payment
    {
        public string? CardName { get; } = default!;
        public string CardNumber { get; } = default!;
        public string Expiration { get; } = default!;
        public string Cvv { get; } = default!;
        public int PaymentMethod { get; } = default!;
        protected Payment() { }
        private Payment(string cardName, string cardNumber, string expiration, string cvv, int paymentMethod)
        {
            CardName = cardName;
            CardNumber = cardNumber;
            Expiration = expiration;
            Cvv = cvv;
            PaymentMethod = paymentMethod;
        }

        public static Payment Of(string cardName, string cardNumber, string expiration, string cvv, int paymentMethod)
        {
            ArgumentException.ThrowIfNullOrWhiteSpace(cardNumber);
            ArgumentException.ThrowIfNullOrWhiteSpace(expiration);
            ArgumentException.ThrowIfNullOrWhiteSpace(cvv);
            ArgumentOutOfRangeException.ThrowIfGreaterThan(cvv.Length, 3);
            
            return new Payment(cardName, cardNumber, expiration, cvv, paymentMethod);
        }
    }
}
```

## services/ordering/OrderingDomain/ValueObjects/ProductId.cs

```text
﻿namespace OrderingDomain.ValueObjects
{
    public record ProductId
    {
        public Guid Value { get; }
        private ProductId(Guid value) => Value = value;
        public static ProductId Of(Guid value)
        {
            ArgumentNullException.ThrowIfNull(value);
            if (value == Guid.Empty)
            {
                throw new DomainException("ProductId cannot be empty");
            }

            return new ProductId(value);
        }
    }
}
```

## services/ordering/OrderingInfrastructure/Data/ApplicationDbContext.cs

```text
﻿using OrderingApplication.Data;
using OrderingDomain.Models;
using System.Reflection;

namespace OrderingInfrastructure.Data
{
    public class ApplicationDbContext : DbContext, IApplicationDbContext
    {
        public ApplicationDbContext
            (DbContextOptions<ApplicationDbContext> options)
            : base(options)
        {
        }

        public DbSet<Customer> Customers => Set<Customer>();
        public DbSet<Product> Products => Set<Product>();
        public DbSet<Order> Orders => Set<Order>();
        public DbSet<OrderItem> OrderItems => Set<OrderItem>();

        protected override void OnModelCreating(ModelBuilder builder)
        {
            builder.ApplyConfigurationsFromAssembly(Assembly.GetExecutingAssembly());
            base.OnModelCreating(builder);
        }
    }
}
```

## services/ordering/OrderingInfrastructure/Data/Configurations/CustomerConfiguration.cs

```text
﻿namespace OrderingInfrastructure.Data.Configurations
{
    public class CustomerConfiguration : IEntityTypeConfiguration<Customer>
    {
        public void Configure(EntityTypeBuilder<Customer> builder)
        {
            builder.HasKey(c => c.Id);
            builder.Property(c => c.Id)
                   .HasConversion(
                    customerId => customerId.Value,
                    dbId => CustomerId.Of(dbId));

            builder.Property(c => c.Name)
                .HasMaxLength(100)
                .IsRequired();

            builder.Property(c => c.Email)
                .HasMaxLength(255);

            builder.HasIndex(c => c.Email).IsUnique();
        }
    }
}
```

## services/ordering/OrderingInfrastructure/Data/Configurations/OrderConfiguration.cs

```text
﻿
using OrderingDomain.Enums;

namespace OrderingInfrastructure.Data.Configurations
{
    public class OrderConfiguration : IEntityTypeConfiguration<Order>
    {
        public void Configure(EntityTypeBuilder<Order> builder)
        {
            builder.HasKey(o => o.Id);
            builder.Property(o => o.Id)
                .HasConversion(
                    orderId => orderId.Value,
                    dbId => OrderId.Of(dbId));

            builder.HasOne<Customer>()
                .WithMany()
                .HasForeignKey(o => o.CustomerId)
                .IsRequired();

            builder.HasMany<OrderItem>()
                .WithOne()
                .HasForeignKey(oi => oi.OrderId);

            builder.ComplexProperty(o => o.OrderName, nameBuilder =>
            {
                nameBuilder.Property(n => n.Value)
                .HasColumnName("OrderName")
                .HasMaxLength(100)
                .IsRequired();
            });

            builder.ComplexProperty(
                o => o.ShippingAddress, addressBuilder =>
            {
                addressBuilder.Property(a => a.FirstName)
                              .HasMaxLength(50)
                              .IsRequired();

                addressBuilder.Property(a => a.LastName)
                              .HasMaxLength(50)
                              .IsRequired();

                addressBuilder.Property(a => a.EmailAddress)
                              .HasMaxLength(50);

                addressBuilder.Property(a => a.AddressLine)
                              .HasMaxLength(180)
                              .IsRequired();

                addressBuilder.Property(a => a.Country)
                              .HasMaxLength(50);

                addressBuilder.Property(a => a.State)
                              .HasMaxLength(50);

                addressBuilder.Property(a => a.ZipCode)
                              .HasMaxLength(6)
                              .IsRequired();
            });
            
            builder.ComplexProperty(
                o => o.BillingAddress, addressBuilder =>
            {
                addressBuilder.Property(a => a.FirstName)
                              .HasMaxLength(50)
                              .IsRequired();

                addressBuilder.Property(a => a.LastName)
                              .HasMaxLength(50)
                              .IsRequired();

                addressBuilder.Property(a => a.EmailAddress)
                              .HasMaxLength(50);

                addressBuilder.Property(a => a.AddressLine)
                              .HasMaxLength(180)
                              .IsRequired();

                addressBuilder.Property(a => a.Country)
                              .HasMaxLength(50);

                addressBuilder.Property(a => a.State)
                              .HasMaxLength(50);

                addressBuilder.Property(a => a.ZipCode)
                              .HasMaxLength(6)
                              .IsRequired();
            });

            builder.ComplexProperty(
                o => o.Payment, paymentBuilder =>
            {
                paymentBuilder.Property(p => p.CardName)
                              .HasMaxLength(50);

                paymentBuilder.Property(p => p.CardNumber)
                              .HasMaxLength(24)
                              .IsRequired();

                paymentBuilder.Property(p => p.Expiration)
                              .HasMaxLength(10);

                paymentBuilder.Property(p => p.Cvv)
                              .HasMaxLength(3);

                paymentBuilder.Property(p => p.PaymentMethod);
            });

            builder.Property(o => o.Status)
                .HasDefaultValue(OrderStatus.Draft)
                .HasConversion(
                    s => s.ToString(), 
                    dbStatus => (OrderStatus)Enum.Parse(typeof(OrderStatus), dbStatus));

            builder.Property(o => o.TotalPrice);
        }
    }
}
```

## services/ordering/OrderingInfrastructure/Data/Configurations/OrderItemConfiguration.cs

```text
﻿
namespace OrderingInfrastructure.Data.Configurations
{
    public class OrderItemConfiguration : IEntityTypeConfiguration<OrderItem>
    {
        public void Configure(EntityTypeBuilder<OrderItem> builder)
        {
            builder.HasKey(oi => oi.Id);
            builder.Property(oi => oi.Id)
                .HasConversion(
                    orderItemId => orderItemId.Value,
                    dbId => OrderItemId.Of(dbId));

            builder.HasOne<Product>()
                .WithMany()
                .HasForeignKey(oi => oi.ProductId);

            builder.Property(oi => oi.Quantity)
                .IsRequired();

            builder.Property(oi => oi.Price)
                .IsRequired();
        }
    }
}
```

## services/ordering/OrderingInfrastructure/Data/Configurations/ProductConfiguration.cs

```text
﻿namespace OrderingInfrastructure.Data.Configurations
{
    public class ProductConfiguration : IEntityTypeConfiguration<Product>
    {
        public void Configure(EntityTypeBuilder<Product> builder)
        {
            builder.HasKey(p => p.Id);
            builder.Property(p => p.Id)
                   .HasConversion(
                    productId => productId.Value,
                    dbId => ProductId.Of(dbId));

            builder.Property(p => p.Name)
                .HasMaxLength(100)
                .IsRequired();
        }
    }
}
```

## services/ordering/OrderingInfrastructure/Data/Extentions/DatabaseExtentions.cs

```text
﻿namespace OrderingInfrastructure.Data.Extentions
{
    public static class DatabaseExtentions
    {
        public static async Task InitializeDatabaseAsync(this WebApplication app)
        {
            using var scope = app.Services.CreateScope();

            var context = scope.ServiceProvider.GetRequiredService<ApplicationDbContext>();

            const int maxRetries = 10;

            for (int retry = 1; retry <= maxRetries; retry++)
            {
                try
                {
                    await context.Database.MigrateAsync();
                    await SeedAsync(context);
                    return;
                }
                catch (Exception ex)
                {
                    await Task.Delay(3000);
                }
            }
        }

        private static async Task SeedAsync(ApplicationDbContext context)
        {
            await SeedCustomerAsync(context);
            await SeedProductsAsync(context);
            await SeedOrdersWithItemsAsync(context);
        }

        private static async Task SeedCustomerAsync(ApplicationDbContext context)
        {
            if (!await context.Customers.AnyAsync())
            {
                await context.Customers.AddRangeAsync(InitialData.Customers);
                await context.SaveChangesAsync();
            }
        }

        private static async Task SeedProductsAsync(ApplicationDbContext context)
        {
            if (!await context.Products.AnyAsync())
            {
                await context.Products.AddRangeAsync(InitialData.Products);
                await context.SaveChangesAsync();
            }
        }

        private static async Task SeedOrdersWithItemsAsync(ApplicationDbContext context)
        {
            if (!await context.Orders.AnyAsync())
            {
                await context.Orders.AddRangeAsync(InitialData.OrdersWithItems);
                await context.SaveChangesAsync();
            }
        }

    }
}
```

## services/ordering/OrderingInfrastructure/Data/Extentions/InitialData.cs

```text
﻿namespace OrderingInfrastructure.Data.Extentions
{
    internal class InitialData
    {
        public static IEnumerable<Customer> Customers =>
        new List<Customer>
        {
            Customer.Create(CustomerId.Of(new Guid("58c49479-ec65-4de2-86e7-033c546291aa")), "mehmet", "mehmet@gmail.com"),
            Customer.Create(CustomerId.Of(new Guid("189dc8dc-990f-48e0-a37b-e6f2b60b9d7d")), "john", "john@gmail.com")
        };

        public static IEnumerable<Product> Products =>
        new List<Product>
        {
            Product.Create(ProductId.Of(new Guid("5334c996-8457-4cf0-815c-ed2b77c4ff61")), "IPhone X", 500),
            Product.Create(ProductId.Of(new Guid("c67d6323-e8b1-4bdf-9a75-b0d0d2e7e914")), "Samsung 10", 400),
            Product.Create(ProductId.Of(new Guid("4f136e9f-ff8c-4c1f-9a33-d12f689bdab8")), "Huawei Plus", 650),
            Product.Create(ProductId.Of(new Guid("6ec1297b-ec0a-4aa1-be25-6726e3b51a27")), "Xiaomi Mi", 450)
        };

        public static IEnumerable<Order> OrdersWithItems
        {
            get
            {
                var address1 = Address.Of("mehmet", "ozkaya", "mehmet@gmail.com", "Bahcelievler No:4", "Turkey", "Istanbul", "38050");
                var address2 = Address.Of("john", "doe", "john@gmail.com", "Broadway No:1", "England", "Nottingham", "08050");

                var payment1 = Payment.Of("mehmet", "5555555555554444", "12/28", "355", 1);
                var payment2 = Payment.Of("john", "8885555555554444", "06/30", "222", 2);

                var order1 = Order.Create(
                                OrderId.Of(Guid.NewGuid()),
                                CustomerId.Of(new Guid("58c49479-ec65-4de2-86e7-033c546291aa")),
                                OrderName.Of("ORD_1"),
                                shippingAddress: address1,
                                billingAddress: address1,
                                payment1);
                order1.Add(ProductId.Of(new Guid("5334c996-8457-4cf0-815c-ed2b77c4ff61")), 2, 500);
                order1.Add(ProductId.Of(new Guid("c67d6323-e8b1-4bdf-9a75-b0d0d2e7e914")), 1, 400);

                var order2 = Order.Create(
                                OrderId.Of(Guid.NewGuid()),
                                CustomerId.Of(new Guid("189dc8dc-990f-48e0-a37b-e6f2b60b9d7d")),
                                OrderName.Of("ORD_2"),
                                shippingAddress: address2,
                                billingAddress: address2,
                                payment2);
                order2.Add(ProductId.Of(new Guid("4f136e9f-ff8c-4c1f-9a33-d12f689bdab8")), 1, 650);
                order2.Add(ProductId.Of(new Guid("6ec1297b-ec0a-4aa1-be25-6726e3b51a27")), 2, 450);

                return new List<Order> { order1, order2 };
            }
        }
    }
}
```

## services/ordering/OrderingInfrastructure/Data/Interceptors/AuditableEntityInterceptor.cs

```text
﻿
namespace OrderingInfrastructure.Data.Interceptors
{
    public class AuditableEntityInterceptor : SaveChangesInterceptor
    {
        public override InterceptionResult<int> SavingChanges(DbContextEventData eventData, InterceptionResult<int> result)
        {
            UpdateEntities(eventData.Context);
            return base.SavingChanges(eventData, result);
        }

        public override ValueTask<InterceptionResult<int>> SavingChangesAsync(DbContextEventData eventData, InterceptionResult<int> result, CancellationToken cancellationToken = default)
        {
            UpdateEntities(eventData.Context);
            return base.SavingChangesAsync(eventData, result, cancellationToken);
        }

        public void UpdateEntities(DbContext? context)
        {
            if (context is null) return;

            foreach (var entry in context.ChangeTracker.Entries<IEntity>())
            {
                if (entry.State == EntityState.Added)
                {
                    entry.Entity.CreatedBy = "premal_kadam";
                    entry.Entity.CreatedAt = DateTime.UtcNow;
                }

                if (entry.State == EntityState.Added || entry.State == EntityState.Modified || entry.HasChangedOwnedEntities())
                {
                    entry.Entity.LastModifiedBy = "premal_kadam";
                    entry.Entity.LastModifiedAt = DateTime.UtcNow;
                }
            }
        }
    }

    public static class  Extensions
    {
        public static bool HasChangedOwnedEntities(this EntityEntry entry) =>
            entry.References.Any(r => 
                r.TargetEntry is not null &&
                r.TargetEntry.Metadata.IsOwned() &&
                (r.TargetEntry.State == EntityState.Added || r.TargetEntry.State == EntityState.Modified));
    }
}
```

## services/ordering/OrderingInfrastructure/Data/Interceptors/DispatchDomainEventInterceptor.cs

```text
﻿using MediatR;

namespace OrderingInfrastructure.Data.Interceptors
{
    public class DispatchDomainEventInterceptor
        (IMediator mediator)
        : SaveChangesInterceptor
    {
        public override InterceptionResult<int> SavingChanges(DbContextEventData eventData, InterceptionResult<int> result)
        {
            DispatchDomainEvents(eventData.Context).GetAwaiter().GetResult();
            return base.SavingChanges(eventData, result);
        }

        public override async ValueTask<InterceptionResult<int>> SavingChangesAsync(DbContextEventData eventData, InterceptionResult<int> result, CancellationToken cancellationToken = default)
        {
            await DispatchDomainEvents(eventData.Context);
            return await base.SavingChangesAsync(eventData, result, cancellationToken);
        }

        public async Task DispatchDomainEvents(DbContext? context)
        {
            if (context is null) return;

            var aggregates = context.ChangeTracker
                .Entries<IAggregate>()
                .Where(e => e.Entity.DomainEvents.Any())
                .Select(e => e.Entity);

            var domainEvents = aggregates
                .SelectMany(e => e.DomainEvents)
                .ToList();

            aggregates.ToList().ForEach(e => e.ClearDomainEvents());

            foreach (var domainEvent in domainEvents)
            {
                await mediator.Publish(domainEvent);
            }
        }
    }
}
```

## services/ordering/OrderingInfrastructure/Data/Migrations/20260120091721_InitialCreate.Designer.cs

```text
﻿// <auto-generated />
using System;
using System.Collections.Generic;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Metadata;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using OrderingInfrastructure.Data;

#nullable disable

namespace OrderingInfrastructure.Data.Migrations
{
    [DbContext(typeof(ApplicationDbContext))]
    [Migration("20260120091721_InitialCreate")]
    partial class InitialCreate
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "10.0.2")
                .HasAnnotation("Relational:MaxIdentifierLength", 128);

            SqlServerModelBuilderExtensions.UseIdentityColumns(modelBuilder);

            modelBuilder.Entity("OrderingDomain.Models.Customer", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uniqueidentifier");

                    b.Property<DateTime?>("CreatedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("CreatedBy")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("nvarchar(255)");

                    b.Property<DateTime?>("LastModifiedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("LastModifiedBy")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("Id");

                    b.HasIndex("Email")
                        .IsUnique();

                    b.ToTable("Customers");
                });

            modelBuilder.Entity("OrderingDomain.Models.Order", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uniqueidentifier");

                    b.Property<DateTime?>("CreatedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("CreatedBy")
                        .HasColumnType("nvarchar(max)");

                    b.Property<Guid>("CustomerId")
                        .HasColumnType("uniqueidentifier");

                    b.Property<DateTime?>("LastModifiedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("LastModifiedBy")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Status")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("nvarchar(max)")
                        .HasDefaultValue("Draft");

                    b.Property<decimal>("TotalPrice")
                        .HasColumnType("decimal(18,2)");

                    b.ComplexProperty(typeof(Dictionary<string, object>), "BillingAddress", "OrderingDomain.Models.Order.BillingAddress#Address", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<string>("AddressLine")
                                .IsRequired()
                                .HasMaxLength(180)
                                .HasColumnType("nvarchar(180)");

                            b1.Property<string>("Country")
                                .IsRequired()
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("EmailAddress")
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("FirstName")
                                .IsRequired()
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("LastName")
                                .IsRequired()
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("State")
                                .IsRequired()
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("ZipCode")
                                .IsRequired()
                                .HasMaxLength(6)
                                .HasColumnType("nvarchar(6)");
                        });

                    b.ComplexProperty(typeof(Dictionary<string, object>), "OrderName", "OrderingDomain.Models.Order.OrderName#OrderName", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<string>("Value")
                                .IsRequired()
                                .HasMaxLength(100)
                                .HasColumnType("nvarchar(100)")
                                .HasColumnName("OrderName");
                        });

                    b.ComplexProperty(typeof(Dictionary<string, object>), "Payment", "OrderingDomain.Models.Order.Payment#Payment", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<string>("CardName")
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("CardNumber")
                                .IsRequired()
                                .HasMaxLength(24)
                                .HasColumnType("nvarchar(24)");

                            b1.Property<string>("Cvv")
                                .IsRequired()
                                .HasMaxLength(3)
                                .HasColumnType("nvarchar(3)");

                            b1.Property<string>("Expiration")
                                .IsRequired()
                                .HasMaxLength(10)
                                .HasColumnType("nvarchar(10)");

                            b1.Property<int>("PaymentMethod")
                                .HasColumnType("int");
                        });

                    b.ComplexProperty(typeof(Dictionary<string, object>), "ShippingAddress", "OrderingDomain.Models.Order.ShippingAddress#Address", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<string>("AddressLine")
                                .IsRequired()
                                .HasMaxLength(180)
                                .HasColumnType("nvarchar(180)");

                            b1.Property<string>("Country")
                                .IsRequired()
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("EmailAddress")
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("FirstName")
                                .IsRequired()
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("LastName")
                                .IsRequired()
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("State")
                                .IsRequired()
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("ZipCode")
                                .IsRequired()
                                .HasMaxLength(6)
                                .HasColumnType("nvarchar(6)");
                        });

                    b.HasKey("Id");

                    b.HasIndex("CustomerId");

                    b.ToTable("Orders");
                });

            modelBuilder.Entity("OrderingDomain.Models.OrderItem", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uniqueidentifier");

                    b.Property<DateTime?>("CreatedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("CreatedBy")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime?>("LastModifiedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("LastModifiedBy")
                        .HasColumnType("nvarchar(max)");

                    b.Property<Guid>("OrderId")
                        .HasColumnType("uniqueidentifier");

                    b.Property<Guid?>("OrderId1")
                        .HasColumnType("uniqueidentifier");

                    b.Property<decimal>("Price")
                        .HasColumnType("decimal(18,2)");

                    b.Property<Guid>("ProductId")
                        .HasColumnType("uniqueidentifier");

                    b.Property<int>("Quantity")
                        .HasColumnType("int");

                    b.HasKey("Id");

                    b.HasIndex("OrderId");

                    b.HasIndex("OrderId1");

                    b.HasIndex("ProductId");

                    b.ToTable("OrderItems");
                });

            modelBuilder.Entity("OrderingDomain.Models.Product", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uniqueidentifier");

                    b.Property<DateTime?>("CreatedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("CreatedBy")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime?>("LastModifiedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("LastModifiedBy")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<decimal>("Price")
                        .HasColumnType("decimal(18,2)");

                    b.HasKey("Id");

                    b.ToTable("Products");
                });

            modelBuilder.Entity("OrderingDomain.Models.Order", b =>
                {
                    b.HasOne("OrderingDomain.Models.Customer", null)
                        .WithMany()
                        .HasForeignKey("CustomerId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("OrderingDomain.Models.OrderItem", b =>
                {
                    b.HasOne("OrderingDomain.Models.Order", null)
                        .WithMany()
                        .HasForeignKey("OrderId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("OrderingDomain.Models.Order", null)
                        .WithMany("OrderItems")
                        .HasForeignKey("OrderId1");

                    b.HasOne("OrderingDomain.Models.Product", null)
                        .WithMany()
                        .HasForeignKey("ProductId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("OrderingDomain.Models.Order", b =>
                {
                    b.Navigation("OrderItems");
                });
#pragma warning restore 612, 618
        }
    }
}
```

## services/ordering/OrderingInfrastructure/Data/Migrations/ApplicationDbContextModelSnapshot.cs

```text
﻿// <auto-generated />
using System;
using System.Collections.Generic;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Metadata;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using OrderingInfrastructure.Data;

#nullable disable

namespace OrderingInfrastructure.Data.Migrations
{
    [DbContext(typeof(ApplicationDbContext))]
    partial class ApplicationDbContextModelSnapshot : ModelSnapshot
    {
        protected override void BuildModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "10.0.2")
                .HasAnnotation("Relational:MaxIdentifierLength", 128);

            SqlServerModelBuilderExtensions.UseIdentityColumns(modelBuilder);

            modelBuilder.Entity("OrderingDomain.Models.Customer", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uniqueidentifier");

                    b.Property<DateTime?>("CreatedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("CreatedBy")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("nvarchar(255)");

                    b.Property<DateTime?>("LastModifiedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("LastModifiedBy")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("Id");

                    b.HasIndex("Email")
                        .IsUnique();

                    b.ToTable("Customers");
                });

            modelBuilder.Entity("OrderingDomain.Models.Order", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uniqueidentifier");

                    b.Property<DateTime?>("CreatedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("CreatedBy")
                        .HasColumnType("nvarchar(max)");

                    b.Property<Guid>("CustomerId")
                        .HasColumnType("uniqueidentifier");

                    b.Property<DateTime?>("LastModifiedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("LastModifiedBy")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Status")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("nvarchar(max)")
                        .HasDefaultValue("Draft");

                    b.Property<decimal>("TotalPrice")
                        .HasColumnType("decimal(18,2)");

                    b.ComplexProperty(typeof(Dictionary<string, object>), "BillingAddress", "OrderingDomain.Models.Order.BillingAddress#Address", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<string>("AddressLine")
                                .IsRequired()
                                .HasMaxLength(180)
                                .HasColumnType("nvarchar(180)");

                            b1.Property<string>("Country")
                                .IsRequired()
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("EmailAddress")
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("FirstName")
                                .IsRequired()
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("LastName")
                                .IsRequired()
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("State")
                                .IsRequired()
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("ZipCode")
                                .IsRequired()
                                .HasMaxLength(6)
                                .HasColumnType("nvarchar(6)");
                        });

                    b.ComplexProperty(typeof(Dictionary<string, object>), "OrderName", "OrderingDomain.Models.Order.OrderName#OrderName", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<string>("Value")
                                .IsRequired()
                                .HasMaxLength(100)
                                .HasColumnType("nvarchar(100)")
                                .HasColumnName("OrderName");
                        });

                    b.ComplexProperty(typeof(Dictionary<string, object>), "Payment", "OrderingDomain.Models.Order.Payment#Payment", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<string>("CardName")
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("CardNumber")
                                .IsRequired()
                                .HasMaxLength(24)
                                .HasColumnType("nvarchar(24)");

                            b1.Property<string>("Cvv")
                                .IsRequired()
                                .HasMaxLength(3)
                                .HasColumnType("nvarchar(3)");

                            b1.Property<string>("Expiration")
                                .IsRequired()
                                .HasMaxLength(10)
                                .HasColumnType("nvarchar(10)");

                            b1.Property<int>("PaymentMethod")
                                .HasColumnType("int");
                        });

                    b.ComplexProperty(typeof(Dictionary<string, object>), "ShippingAddress", "OrderingDomain.Models.Order.ShippingAddress#Address", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<string>("AddressLine")
                                .IsRequired()
                                .HasMaxLength(180)
                                .HasColumnType("nvarchar(180)");

                            b1.Property<string>("Country")
                                .IsRequired()
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("EmailAddress")
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("FirstName")
                                .IsRequired()
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("LastName")
                                .IsRequired()
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("State")
                                .IsRequired()
                                .HasMaxLength(50)
                                .HasColumnType("nvarchar(50)");

                            b1.Property<string>("ZipCode")
                                .IsRequired()
                                .HasMaxLength(6)
                                .HasColumnType("nvarchar(6)");
                        });

                    b.HasKey("Id");

                    b.HasIndex("CustomerId");

                    b.ToTable("Orders");
                });

            modelBuilder.Entity("OrderingDomain.Models.OrderItem", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uniqueidentifier");

                    b.Property<DateTime?>("CreatedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("CreatedBy")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime?>("LastModifiedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("LastModifiedBy")
                        .HasColumnType("nvarchar(max)");

                    b.Property<Guid>("OrderId")
                        .HasColumnType("uniqueidentifier");

                    b.Property<Guid?>("OrderId1")
                        .HasColumnType("uniqueidentifier");

                    b.Property<decimal>("Price")
                        .HasColumnType("decimal(18,2)");

                    b.Property<Guid>("ProductId")
                        .HasColumnType("uniqueidentifier");

                    b.Property<int>("Quantity")
                        .HasColumnType("int");

                    b.HasKey("Id");

                    b.HasIndex("OrderId");

                    b.HasIndex("OrderId1");

                    b.HasIndex("ProductId");

                    b.ToTable("OrderItems");
                });

            modelBuilder.Entity("OrderingDomain.Models.Product", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uniqueidentifier");

                    b.Property<DateTime?>("CreatedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("CreatedBy")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime?>("LastModifiedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("LastModifiedBy")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<decimal>("Price")
                        .HasColumnType("decimal(18,2)");

                    b.HasKey("Id");

                    b.ToTable("Products");
                });

            modelBuilder.Entity("OrderingDomain.Models.Order", b =>
                {
                    b.HasOne("OrderingDomain.Models.Customer", null)
                        .WithMany()
                        .HasForeignKey("CustomerId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("OrderingDomain.Models.OrderItem", b =>
                {
                    b.HasOne("OrderingDomain.Models.Order", null)
                        .WithMany()
                        .HasForeignKey("OrderId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("OrderingDomain.Models.Order", null)
                        .WithMany("OrderItems")
                        .HasForeignKey("OrderId1");

                    b.HasOne("OrderingDomain.Models.Product", null)
                        .WithMany()
                        .HasForeignKey("ProductId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("OrderingDomain.Models.Order", b =>
                {
                    b.Navigation("OrderItems");
                });
#pragma warning restore 612, 618
        }
    }
}
```

## services/ordering/OrderingInfrastructure/DependencyInjection.cs

```text
﻿using OrderingApplication.Data;
using OrderingInfrastructure.Data.Interceptors;

namespace OrderingInfrastructure
{
    public static class DependencyInjection
    {
        public static IServiceCollection AddInfrastructureServices
            (this IServiceCollection services, IConfiguration configuration)
        {
            var connectionString = configuration.GetConnectionString("Database");

            services.AddScoped<ISaveChangesInterceptor, AuditableEntityInterceptor>();
            services.AddScoped<ISaveChangesInterceptor, DispatchDomainEventInterceptor>();

            services.AddDbContext<ApplicationDbContext>((sp, options) =>
            {
                options.AddInterceptors(sp.GetServices<ISaveChangesInterceptor>()!);
                options.UseSqlServer(connectionString);
            });

            services.AddScoped<IApplicationDbContext, ApplicationDbContext>();
            return services;
        }
    }
}
```

## services/ordering/OrderingInfrastructure/GlobalUsing.cs

```text
﻿global using Microsoft.EntityFrameworkCore;
global using Microsoft.EntityFrameworkCore.Metadata.Builders;
global using OrderingDomain.Models;
global using OrderingDomain.ValueObjects;
global using OrderingDomain.Abstractions;
global using Microsoft.Extensions.Configuration;
global using Microsoft.Extensions.DependencyInjection;
global using OrderingInfrastructure.Data;
global using Microsoft.AspNetCore.Builder;
global using Microsoft.EntityFrameworkCore.Diagnostics;
global using Microsoft.EntityFrameworkCore.ChangeTracking;
```

## services/ordering/OrderingInfrastructure/OrderingInfrastructure.csproj

```text
﻿<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.EntityFrameworkCore.SqlServer" Version="10.0.2" />
    <PackageReference Include="Microsoft.EntityFrameworkCore.Tools" Version="10.0.2">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\OrderingApplication\OrderingApplication.csproj" />
  </ItemGroup>

</Project>
```

## WebApps/shopping-web-react/.gitignore

```text
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
```

## WebApps/shopping-web-react/docs/pages/checkout.md

````markdown
# `Checkout` Component – Summary & Flow

## Quick Summary ✅

The **Checkout** component:

* Renders a **validated checkout form**
* Displays an **order summary**
* Submits a **checkout request** to the backend
* Clears the cart on success
* Navigates the user to the **confirmation page**

---

## Step-by-Step Flow 🔁

### Imports & Setup

* Uses **`react-hook-form`** with **Yup** validation via `yupResolver`
* Reads `cart` and `clearCart` from `useCartStore`
* Uses:

  * `basketService` to call the checkout API
  * `useNavigate` from React Router for redirection

---

### Validation Schema

* A Yup `schema` defines required fields for:

  * Shipping details (first name, last name, email, address, etc.)
  * Payment details (card number, expiry, CVV, etc.)
* Client-side validation runs **before** any API call

---

### Guard / Early Redirect

* If `cart` is `null` or contains no items:

  * Redirects to `/cart`
  * Stops rendering the checkout UI

---

### UI Rendering

#### Left Column – Shipping Information

* Form fields registered using `register`
* Inline validation errors displayed using `errors`

#### Right Column – Payment & Order Summary

* Payment input fields
* Order summary:

  * **Total Items**

    ```ts
    cart.items.reduce((sum, i) => sum + i.quantity, 0)
    ```
  * **Total Price**

    ```ts
    cart.totalPrice.toFixed(2)
    ```
* Submit button:

  * Disabled while `submitting === true`

---

### Submit Handler (`onSubmit`)

1. Returns early if `cart` is missing
2. Sets `submitting` to `true`
3. Builds a `BasketCheckout` object containing:

   * `userName`
   * Placeholder `customerId`
   * `totalPrice`
   * `paymentMethod`
4. Calls checkout API:

   ```ts
   await basketService.checkoutBasket({
     basketCheckoutDto: checkoutData
   })
   ```
5. On success:

   * `await clearCart()`
   * Navigate to `/confirmation`
6. On error:

   * Logs the error
   * Shows an alert
7. Finally:

   * Resets `submitting` to `false`

---

## Behavior Notes & Possible Improvements 💡

* Form validation is fully **client-side** via Yup
* `clearCart()` is awaited to ensure cart state is cleared before navigation

### Potential Enhancements

* Replace placeholder `customerId` with a real user identifier
* Use Zustand selectors:

  ```ts
  useCartStore(s => s.cart)
  ```

  to reduce unnecessary re-renders
* Replace `alert()` with a better error UI
* Add loading indicators or spinner feedback during submission
````

## WebApps/shopping-web-react/docs/store/cartStore.md

````markdown
# `cartStore.ts` – Overview & Usage Guide

## Quick Overview ✅

### What this file is

`cartStore.ts` defines a **Zustand store** for the shopping cart. It declares:

* The cart **state shape**
* **Async and sync actions**
* **Persistence** using middleware

The store is exported as `useCartStore` and is consumed by React components to **read and update cart data**.

---

## Core Concepts (Zustand) 🔧

* **Zustand** is a tiny, unopinionated state manager for React.
* It exposes a **hook** (`useCartStore`) that components use to access and manipulate state.
* The store initializer receives:

  * `set` → update state
  * `get` → read current state
* **Middlewares** (like `persist`) add extra behavior such as `localStorage` persistence.
* Stores are created using:

```ts
create<T>()(initializer)
```

Where `T` is a TypeScript interface describing the store’s shape.

---

## How `cartStore.ts` Uses Zustand 📌

### Store Creation

* Uses `persist` middleware
* Saves state to `localStorage` under the key:

```txt
shopping-cart
```

* Automatically **rehydrates** state on app load

---

### State Fields

```ts
cart: ShoppingCart | null   // items, totalPrice, userName
loading: boolean
error: string | null
```

---

### Actions (Async & Sync)

#### `loadCart()`

* Loads user basket via:

```ts
basketService.loadUserBasket()
```

* Updates `cart` state

#### `addItem(item)`

* Adds a new item or increments quantity
* Recalculates `totalPrice`
* Calls `syncCart()` to persist changes to backend

#### `removeItem(productId)`

* Removes item from cart
* Recalculates total price
* Calls `syncCart()`

#### `updateQuantity(productId, quantity)`

* Updates item quantity
* Removes item if `quantity <= 0`
* Calls `syncCart()`

#### `clearCart()`

* Calls:

```ts
basketService.deleteBasket(...)
```

* Clears local cart state

#### `syncCart()`

* Syncs local cart to backend using:

```ts
basketService.storeBasket({ cart })
```

---

### Implementation Pattern

* Use `get()` inside actions to read current state
* Use `set()` to update state
* Actions perform **optimistic updates**:

  * Update UI immediately
  * Then sync changes to server via `syncCart()`

---

## Example Usage in a Component 👩‍💻

### Best Practices

* Use **selectors** to avoid unnecessary re-renders
* Trigger `loadCart()` on component mount
* Use `await addItem(item)` inside event handlers

---

## Tips & Gotchas ⚠️

* `persist` uses `localStorage`

  * ❌ Not SSR-safe (undefined on server)
* Always use **selectors**

  * Avoid reading the entire cart if you only need `items.length`
* Optimistic updates are used

  * Errors are stored in `error`
  * Consider retry logic or better error handling
* For frequent updates:

  * **Debounce `syncCart()`** to reduce backend calls 💡
````

## WebApps/shopping-web-react/eslint.config.js

```javascript
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import tseslint from 'typescript-eslint'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      js.configs.recommended,
      tseslint.configs.recommended,
      reactHooks.configs.flat.recommended,
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
    rules: {
      '@typescript-eslint/no-explicit-any': 'off',
    },
  },
])
```

## WebApps/shopping-web-react/index.html

```html
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>shopping-web-react</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
```

## WebApps/shopping-web-react/package.json

```json
{
  "name": "shopping-web-react",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "@hookform/resolvers": "^5.2.2",
    "axios": "^1.13.4",
    "bootstrap": "^5.3.8",
    "bootstrap-icons": "^1.13.1",
    "date-fns": "^4.1.0",
    "react": "^19.2.0",
    "react-bootstrap": "^2.10.10",
    "react-dom": "^19.2.0",
    "react-hook-form": "^7.71.1",
    "react-router-dom": "^7.13.0",
    "uuid": "^13.0.0",
    "yup": "^1.7.1",
    "zustand": "^5.0.10"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@types/node": "^24.10.1",
    "@types/react": "^19.2.5",
    "@types/react-dom": "^19.2.3",
    "@types/react-router-dom": "^5.3.3",
    "@types/uuid": "^10.0.0",
    "@vitejs/plugin-react": "^5.1.1",
    "eslint": "^9.39.1",
    "eslint-plugin-react-hooks": "^7.0.1",
    "eslint-plugin-react-refresh": "^0.4.24",
    "globals": "^16.5.0",
    "typescript": "~5.9.3",
    "typescript-eslint": "^8.46.4",
    "vite": "^7.2.4"
  }
}
```

## WebApps/shopping-web-react/README.md

````markdown
# React + TypeScript + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) (or [oxc](https://oxc.rs) when used in [rolldown-vite](https://vite.dev/guide/rolldown)) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## React Compiler

The React Compiler is not enabled on this template because of its impact on dev & build performances. To add it, see [this documentation](https://react.dev/learn/react-compiler/installation).

## Expanding the ESLint configuration

If you are developing a production application, we recommend updating the configuration to enable type-aware lint rules:

```js
export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...

      // Remove tseslint.configs.recommended and replace with this
      tseslint.configs.recommendedTypeChecked,
      // Alternatively, use this for stricter rules
      tseslint.configs.strictTypeChecked,
      // Optionally, add this for stylistic rules
      tseslint.configs.stylisticTypeChecked,

      // Other configs...
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```

You can also install [eslint-plugin-react-x](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-x) and [eslint-plugin-react-dom](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-dom) for React-specific lint rules:

```js
// eslint.config.js
import reactX from 'eslint-plugin-react-x'
import reactDom from 'eslint-plugin-react-dom'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...
      // Enable lint rules for React
      reactX.configs['recommended-typescript'],
      // Enable lint rules for React DOM
      reactDom.configs.recommended,
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```
````

## WebApps/shopping-web-react/src/api/basketService.ts

```typescript
import type { CheckoutBasketRequest, CheckoutBasketResponse, DeleteBasketResponse, GetBasketResponse, ShoppingCart, StoreBasketRequest, StoreBasketResponse } from '../types/cart';
import apiClient from './client';

const DEFAULT_USERNAME = import.meta.env.VITE_DEFAULT_USERNAME || 'swn';

export const basketService = {
  getBasket: async (userName: string = DEFAULT_USERNAME): Promise<GetBasketResponse> => {
    const response = await apiClient.get<GetBasketResponse>(
      `/basket-service/basket/${userName}`
    );
    return response.data;
  },

  storeBasket: async (request: StoreBasketRequest): Promise<StoreBasketResponse> => {
    const response = await apiClient.post<StoreBasketResponse>(
      `/basket-service/basket`,
      request
    );
    return response.data;
  },

  deleteBasket: async (userName: string = DEFAULT_USERNAME): Promise<DeleteBasketResponse> => {
    const response = await apiClient.delete<DeleteBasketResponse>(
      `/basket-service/basket/${userName}`
    );
    return response.data;
  },

  checkoutBasket: async (request: CheckoutBasketRequest): Promise<CheckoutBasketResponse> => {
    const response = await apiClient.post<CheckoutBasketResponse>(
      `/basket-service/basket/checkout`,
      request
    );
    return response.data;
  },

  loadUserBasket: async (): Promise<ShoppingCart> => {
    try {
      const response = await basketService.getBasket(DEFAULT_USERNAME);
      return response.cart;
    } catch (error : any) {
      if (error.response?.status === 404) {
        // Return empty basket if not found
        return {
          userName: DEFAULT_USERNAME,
          items: [],
          totalPrice: 0,
        };
      }
      throw error;
    }
  },
};
```

## WebApps/shopping-web-react/src/api/catalogService.ts

```typescript
import type { GetProductByCategoryResponse, GetProductByIdResponse, GetProductsResponse, PaginationParams } from '../types/product';
import apiClient from './client';

export const catalogService = {
  getProducts: async (params?: PaginationParams): Promise<GetProductsResponse> => {
    const { pageNumber = 1, pageSize = 10 } = params || {};
    const response = await apiClient.get<GetProductsResponse>(
      `/catalog-service/products`,
      { params: { pageNumber, pageSize } }
    );
    return response.data;
  },

  getProduct: async (id: string): Promise<GetProductByIdResponse> => {
    const response = await apiClient.get<GetProductByIdResponse>(
      `/catalog-service/products/${id}`
    );
    return response.data;
  },

  getProductsByCategory: async (category: string): Promise<GetProductByCategoryResponse> => {
    const response = await apiClient.get<GetProductByCategoryResponse>(
      `/catalog-service/products/category/${category}`
    );
    return response.data;
  },
};
```

## WebApps/shopping-web-react/src/api/orderingService.ts

```typescript
import type { GetOrdersByCustomerResponse, GetOrdersByNameResponse, GetOrdersResponse } from '../types/order';
import apiClient from './client';

export const orderingService = {
  getOrders: async (pageIndex: number = 1, pageSize: number = 10): Promise<GetOrdersResponse> => {
    const response = await apiClient.get<GetOrdersResponse>(
      `/ordering-service/orders`,
      { params: { pageIndex, pageSize } }
    );
    return response.data;
  },

  getOrdersByName: async (orderName: string): Promise<GetOrdersByNameResponse> => {
    const response = await apiClient.get<GetOrdersByNameResponse>(
      `/ordering-service/orders/${orderName}`
    );
    return response.data;
  },

  getOrdersByCustomer: async (customerId: string): Promise<GetOrdersByCustomerResponse> => {
    const response = await apiClient.get<GetOrdersByCustomerResponse>(
      `/ordering-service/orders/customer/${customerId}`
    );
    return response.data;
  },
};
```

## WebApps/shopping-web-react/src/App.css

```css
#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}
```

## WebApps/shopping-web-react/src/App.tsx

```text
import React, { useEffect, useState } from 'react';
import { Outlet } from 'react-router-dom';
import Header from './components/common/Header';
import Footer from './components/common/Footer';
import ErrorBoundary from './components/common/ErrorBoundary';
import Loading from './components/common/Loading';
import { useCartStore } from './store/cartStore';

const App: React.FC = () => {
  const loadCart = useCartStore((state) => state.loadCart);
  const [initializing, setInitializing] = useState(true);

  useEffect(() => {
    const initialize = async () => {
      try {
        await loadCart();
      } catch (error) {
        console.error('Failed to load cart:', error);
      } finally {
        setInitializing(false);
      }
    };

    initialize();
  }, [loadCart]);

  if (initializing) {
    return <Loading fullScreen message="Initializing application..." />;
  }

  return (
    <ErrorBoundary>
      <div className="d-flex flex-column min-vh-100">
        <Header />
        <main className="flex-grow-1">
          <Outlet />
        </main>
        <Footer />
      </div>
    </ErrorBoundary>
  );
};

export default App;
```

## WebApps/shopping-web-react/src/components/cart/CartItem.tsx

```text
import React from 'react';
import type { ShoppingCartItem } from '../../types/cart';

interface CartItemProps {
  item: ShoppingCartItem;
  onUpdateQuantity: (productId: string, quantity: number) => void;
  onRemove: (productId: string) => void;
}

const CartItem: React.FC<CartItemProps> = ({
  item,
  onUpdateQuantity,
  onRemove,
}) => {
  return (
    <tr>
      <td>{item.productName}</td>
      <td>${item.price.toFixed(2)}</td>
      <td>
        <input
          type="number"
          min="1"
          value={item.quantity}
          onChange={(e) => onUpdateQuantity(item.productId, parseInt(e.target.value))}
          className="form-control"
          style={{ width: '80px' }}
        />
      </td>
      <td>${(item.price * item.quantity).toFixed(2)}</td>
      <td>
        <button
          onClick={() => onRemove(item.productId)}
          className="btn btn-danger btn-sm"
        >
          Remove
        </button>
      </td>
    </tr>
  );
};

export default CartItem;
```

## WebApps/shopping-web-react/src/components/common/ErrorBoundary.tsx

```text
import { Component } from 'react';
import type { ErrorInfo, ReactNode } from 'react';
import { Link } from 'react-router-dom';

interface Props {
  children: ReactNode;
  fallback?: ReactNode;
}

interface State {
  hasError: boolean;
  error: Error | null;
  errorInfo: ErrorInfo | null;
}

class ErrorBoundary extends Component<Props, State> {
  constructor(props: Props) {
    super(props);
    this.state = {
      hasError: false,
      error: null,
      errorInfo: null,
    };
  }

  static getDerivedStateFromError(error: Error): State {
    return {
      hasError: true,
      error,
      errorInfo: null,
    };
  }

  componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    console.error('Error caught by ErrorBoundary:', error, errorInfo);
    this.setState({
      error,
      errorInfo,
    });

    // You can also log the error to an error reporting service here
    // logErrorToService(error, errorInfo);
  }

  handleReset = () => {
    this.setState({
      hasError: false,
      error: null,
      errorInfo: null,
    });
  };

  render() {
    if (this.state.hasError) {
      // Custom fallback UI
      if (this.props.fallback) {
        return this.props.fallback;
      }

      // Default error UI
      return (
        <div className="container">
          <div className="row min-vh-100 align-items-center justify-content-center">
            <div className="col-md-8 col-lg-6">
              <div className="card border-danger">
                <div className="card-header bg-danger text-white">
                  <h4 className="mb-0">
                    <i className="bi bi-exclamation-triangle me-2"></i>
                    Something Went Wrong
                  </h4>
                </div>
                <div className="card-body">
                  <p className="card-text">
                    We're sorry, but something unexpected happened. Please try
                    refreshing the page or return to the homepage.
                  </p>

                  {import.meta.env?.MODE === 'development' && this.state.error && (
                    <div className="mt-3">
                      <h6 className="text-danger">Error Details (Development Only):</h6>
                      <div className="alert alert-secondary">
                        <strong>Error:</strong> {this.state.error.toString()}
                        <details className="mt-2">
                          <summary>Stack Trace</summary>
                          <pre className="mt-2" style={{ fontSize: '0.75rem' }}>
                            {this.state.errorInfo?.componentStack}
                          </pre>
                        </details>
                      </div>
                    </div>
                  )}

                  <div className="d-flex gap-2 mt-4">
                    <button
                      onClick={this.handleReset}
                      className="btn btn-primary"
                    >
                      Try Again
                    </button>
                    <Link to="/" className="btn btn-outline-secondary">
                      Go to Homepage
                    </Link>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    }

    return this.props.children;
  }
}

export default ErrorBoundary;
```

## WebApps/shopping-web-react/src/components/common/Footer.tsx

```text
import React from 'react';
import { Link } from 'react-router-dom';

const Footer: React.FC = () => {
  return (
    <footer className="bg-dark text-white mt-5">
      <div className="container py-4">
        <div className="row">
          <div className="col-md-4">
            <h5>Shopping App</h5>
            <p>Your one-stop shop for all your needs.</p>
          </div>
          <div className="col-md-4">
            <h5>Quick Links</h5>
            <ul className="list-unstyled">
              <li>
                <Link to="/products" className="text-white">
                  Products
                </Link>
              </li>
              <li>
                <Link to="/orders" className="text-white">
                  Orders
                </Link>
              </li>
              <li>
                <Link to="/contact" className="text-white">
                  Contact
                </Link>
              </li>
            </ul>
          </div>
          <div className="col-md-4">
            <h5>Legal</h5>
            <ul className="list-unstyled">
              <li>
                <Link to="/privacy" className="text-white">
                  Privacy Policy
                </Link>
              </li>
            </ul>
          </div>
        </div>
        <div className="row mt-3">
          <div className="col text-center">
            <p className="mb-0">
              &copy; {new Date().getFullYear()} Shopping App. All rights reserved.
            </p>
          </div>
        </div>
      </div>
    </footer>
  );
};

export default Footer;
```

## WebApps/shopping-web-react/src/components/common/Header.tsx

```text
import React from 'react';
import { Link } from 'react-router-dom';
import { useCartStore } from '../../store/cartStore';

const Header: React.FC = () => {
  const cart = useCartStore((state) => state.cart);
  const itemCount = cart?.items.reduce((sum, item) => sum + item.quantity, 0) || 0;

  return (
    <nav className="navbar navbar-expand-md navbar-dark bg-dark">
      <div className="container">
        <Link className="navbar-brand" to="/">
          Shopping App
        </Link>
        <button
          className="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span className="navbar-toggler-icon"></span>
        </button>
        <div className="collapse navbar-collapse" id="navbarNav">
          <ul className="navbar-nav ms-auto">
            <li className="nav-item">
              <Link className="nav-link" to="/">
                Home
              </Link>
            </li>
            <li className="nav-item">
              <Link className="nav-link" to="/products">
                Products
              </Link>
            </li>
            <li className="nav-item">
              <Link className="nav-link" to="/orders">
                Orders
              </Link>
            </li>
            <li className="nav-item">
              <Link className="nav-link" to="/contact">
                Contact
              </Link>
            </li>
            <li className="nav-item">
              <Link className="nav-link" to="/cart">
                Cart
                {itemCount > 0 && (
                  <span className="badge bg-danger ms-1">{itemCount}</span>
                )}
              </Link>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  );
};

export default Header;
```

## WebApps/shopping-web-react/src/components/common/Loading.tsx

```text
import React from 'react';

interface LoadingProps {
  message?: string;
  fullScreen?: boolean;
}

const Loading: React.FC<LoadingProps> = ({ 
  message = 'Loading...', 
  fullScreen = false 
}) => {
  const containerClass = fullScreen
    ? 'min-vh-100 d-flex align-items-center justify-content-center'
    : 'd-flex align-items-center justify-content-center py-5';

  return (
    <div className={containerClass}>
      <div className="text-center">
        <div className="spinner-border text-primary" role="status" style={{ width: '3rem', height: '3rem' }}>
          <span className="visually-hidden">Loading...</span>
        </div>
        {message && <p className="mt-3 text-muted">{message}</p>}
      </div>
    </div>
  );
};

export default Loading;
```

## WebApps/shopping-web-react/src/components/order/OrderItem.tsx

```text

```

## WebApps/shopping-web-react/src/components/product/ProductCard.tsx

```text
import React from 'react';
import { Link } from 'react-router-dom';
import type { Product } from '../../types/product';

interface ProductCardProps {
  product: Product;
  onAddToCart?: (product: Product) => void;
}

const ProductCard: React.FC<ProductCardProps> = ({ product, onAddToCart }) => {
  return (
    <div className="col-md-4 mb-4">
      <div className="card h-100">
        <Link to={`/products/${product.id}`}>
          <img
            src={`/images/product/${product.imageFile}`}
            className="card-img-top"
            alt={product.name}
            style={{ height: '200px', objectFit: 'cover' }}
          />
        </Link>
        <div className="card-body d-flex flex-column">
          <h5 className="card-title">
            <Link to={`/products/${product.id}`} className="text-decoration-none">
              {product.name}
            </Link>
          </h5>
          <p className="card-text flex-grow-1">
            {product.description.substring(0, 100)}...
          </p>
          <div className="row mt-auto">
            <div className="col">
              <p className="btn btn-danger btn-block mb-0">${product.price}</p>
            </div>
            <div className="col">
              {onAddToCart ? (
                <button
                  onClick={() => onAddToCart(product)}
                  className="btn btn-success btn-block"
                >
                  Add to Cart
                </button>
              ) : (
                <Link
                  to={`/products/${product.id}`}
                  className="btn btn-success btn-block"
                >
                  View Details
                </Link>
              )}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default ProductCard;
```

## WebApps/shopping-web-react/src/components/product/ProductItem.tsx

```text

```

## WebApps/shopping-web-react/src/components/product/TopProduct.tsx

```text
import React from 'react';
import { Link } from 'react-router-dom';
import type { Product } from '../../types/product';

interface TopProductProps {
  product: Product;
}

const TopProduct: React.FC<TopProductProps> = ({ product }) => {
  return (
    <div className="col-12 col-md-3">
      <div className="card">
        <div className="card-header bg-success text-white text-uppercase">
          <i className="fa fa-heart"></i> Top product
        </div>
        <Link to={`/products/${product.id}`}>
          <img
            className="img-fluid border-0"
            src={`/images/product/${product.imageFile}`}
            alt={product.name}
          />
        </Link>
        <div className="card-body">
          <h4 className="card-title text-center">
            <Link to={`/products/${product.id}`} title="View Product">
              {product.name}
            </Link>
          </h4>
          <div className="row">
            <div className="col">
              <p className="btn btn-danger btn-block">${product.price}</p>
            </div>
            <div className="col">
              <Link
                to={`/products/${product.id}`}
                className="btn btn-success btn-block"
              >
                View
              </Link>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default TopProduct;
```

## WebApps/shopping-web-react/src/config/constants.ts

```typescript

```

## WebApps/shopping-web-react/src/hooks/useCart.ts

```typescript

```

## WebApps/shopping-web-react/src/hooks/useOrders.ts

```typescript
import { useState, useEffect } from 'react';
import { orderingService } from '../api/orderingService';
import type { Order, PaginatedResult } from '../types/order';

export const useOrders = (pageIndex: number = 1, pageSize: number = 10) => {
  const [orders, setOrders] = useState<PaginatedResult<Order> | null>(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    const fetchOrders = async () => {
      setLoading(true);
      setError(null);
      try {
        const response = await orderingService.getOrders(pageIndex, pageSize);
        setOrders(response.orders);
      } catch (err: any) {
        setError(err.message);
      } finally {
        setLoading(false);
      }
    };

    fetchOrders();
  }, [pageIndex, pageSize]);

  const refetch = async () => {
    setLoading(true);
    setError(null);
    try {
      const response = await orderingService.getOrders(pageIndex, pageSize);
      setOrders(response.orders);
    } catch (err: any) {
      setError(err.message);
    } finally {
      setLoading(false);
    }
  };

  return { orders, loading, error, refetch };
};
```

## WebApps/shopping-web-react/src/hooks/useProducts.ts

```typescript
import { useState, useEffect } from 'react';
import { catalogService } from '../api/catalogService';
import type { Product } from '../types/product';

export const useProducts = (pageNumber: number = 1, pageSize: number = 10) => {
  const [products, setProducts] = useState<Product[]>([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    const fetchProducts = async () => {
      setLoading(true);
      setError(null);
      try {
        const response = await catalogService.getProducts({ pageNumber, pageSize });
        setProducts(response.products);
      } catch (err: any) {
        setError(err.message);
      } finally {
        setLoading(false);
      }
    };

    fetchProducts();
  }, [pageNumber, pageSize]);

  return { products, loading, error };
};

export const useProduct = (id: string) => {
  const [product, setProduct] = useState<Product | null>(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    if (!id) return;

    const fetchProduct = async () => {
      setLoading(true);
      setError(null);
      try {
        const response = await catalogService.getProduct(id);
        setProduct(response.product);
      } catch (err: any) {
        setError(err.message);
      } finally {
        setLoading(false);
      }
    };

    fetchProduct();
  }, [id]);

  return { product, loading, error };
};

export const useProductsByCategory = (category: string) => {
  const [products, setProducts] = useState<Product[]>([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    if (!category) return;

    const fetchProducts = async () => {
      setLoading(true);
      setError(null);
      try {
        const response = await catalogService.getProductsByCategory(category);
        setProducts(response.products);
      } catch (err: any) {
        setError(err.message);
      } finally {
        setLoading(false);
      }
    };

    fetchProducts();
  }, [category]);

  return { products, loading, error };
};
```

## WebApps/shopping-web-react/src/index.css

```css
:root {
  font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;

  color-scheme: light dark;
  color: rgba(255, 255, 255, 0.87);
  background-color: #242424;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a {
  font-weight: 500;
  color: #646cff;
  text-decoration: inherit;
}
a:hover {
  color: #535bf2;
}

body {
  margin: 0;
  display: flex;
  place-items: center;
  min-width: 320px;
  min-height: 100vh;
}

h1 {
  font-size: 3.2em;
  line-height: 1.1;
}

button {
  border-radius: 8px;
  border: 1px solid transparent;
  padding: 0.6em 1.2em;
  font-size: 1em;
  font-weight: 500;
  font-family: inherit;
  background-color: #1a1a1a;
  cursor: pointer;
  transition: border-color 0.25s;
}
button:hover {
  border-color: #646cff;
}
button:focus,
button:focus-visible {
  outline: 4px auto -webkit-focus-ring-color;
}

@media (prefers-color-scheme: light) {
  :root {
    color: #213547;
    background-color: #ffffff;
  }
  a:hover {
    color: #747bff;
  }
  button {
    background-color: #f9f9f9;
  }
}
```

## WebApps/shopping-web-react/src/main.tsx

```text
import React, { Suspense } from 'react';
import ReactDOM from 'react-dom/client';
import { RouterProvider } from 'react-router-dom';
import { router } from './router';
import Loading from './components/common/Loading';
import 'bootstrap/dist/css/bootstrap.min.css';
import 'bootstrap-icons/font/bootstrap-icons.css';
import './styles/global.css';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <Suspense fallback={<Loading fullScreen message="Loading application..." />}>
      <RouterProvider router={router} />
    </Suspense>
  </React.StrictMode>
);
```

## WebApps/shopping-web-react/src/pages/Cart.tsx

```text
import React, { useEffect, useState } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import { useCartStore } from '../store/cartStore';
import CartItem from '../components/cart/CartItem';
import Loading from '../components/common/Loading';

const Cart: React.FC = () => {
  const navigate = useNavigate();
  const { cart, loading, loadCart, updateQuantity, removeItem, clearCart } =
    useCartStore();
  const [clearing, setClearing] = useState(false);

  useEffect(() => {
    loadCart();
  }, [loadCart]);

  const handleCheckout = () => {
    navigate('/checkout');
  };

  const handleClearCart = async () => {
    if (window.confirm('Are you sure you want to clear your cart?')) {
      setClearing(true);
      try {
        await clearCart();
      } catch (error) {
        console.error('Failed to clear cart:', error);
        alert('Failed to clear cart. Please try again.');
      } finally {
        setClearing(false);
      }
    }
  };

  if (loading) return <Loading fullScreen message="Loading your cart..." />;

  if (!cart || cart.items.length === 0) {
    return (
      <div className="container mt-5 text-center">
        <div className="py-5">
          <svg
            width="120"
            height="120"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            className="text-muted mb-4"
          >
            <path
              d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"
              fill="currentColor"
            />
          </svg>
          <h2>Your cart is empty</h2>
          <p className="text-muted">Start shopping to add items to your cart</p>
          <Link to="/products" className="btn btn-primary btn-lg mt-3">
            Browse Products
          </Link>
        </div>
      </div>
    );
  }

  return (
    <div className="container mt-5">
      <h1>Shopping Cart</h1>
      <table className="table table-striped mt-4">
        <thead>
          <tr>
            <th>Product</th>
            <th>Price</th>
            <th>Quantity</th>
            <th>Total</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          {cart.items.map((item) => (
            <CartItem
              key={item.productId}
              item={item}
              onUpdateQuantity={updateQuantity}
              onRemove={removeItem}
            />
          ))}
        </tbody>
      </table>
      <div className="row mt-4">
        <div className="col-md-8"></div>
        <div className="col-md-4">
          <div className="card">
            <div className="card-body">
              <h4 className="card-title">Order Summary</h4>
              <hr />
              <div className="d-flex justify-content-between mb-2">
                <span>Subtotal:</span>
                <span>${cart.totalPrice.toFixed(2)}</span>
              </div>
              <div className="d-flex justify-content-between mb-2">
                <span>Tax:</span>
                <span>$0.00</span>
              </div>
              <hr />
              <div className="d-flex justify-content-between">
                <strong>Total:</strong>
                <strong className="text-success">${cart.totalPrice.toFixed(2)}</strong>
              </div>
              <button 
                onClick={handleCheckout} 
                className="btn btn-success btn-lg w-100 mt-3"
              >
                Proceed to Checkout
              </button>
              <button 
                onClick={handleClearCart} 
                className="btn btn-outline-danger w-100 mt-2"
                disabled={clearing}
              >
                {clearing ? (
                  <>
                    <span className="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                    Clearing...
                  </>
                ) : (
                  'Clear Cart'
                )}
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default Cart;
```

## WebApps/shopping-web-react/src/pages/Checkout.tsx

```text
import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { useForm } from 'react-hook-form';
import { yupResolver } from '@hookform/resolvers/yup';
import * as yup from 'yup';
import { useCartStore } from '../store/cartStore';
import { basketService } from '../api/basketService';
import Loading from '../components/common/Loading';
import type { BasketCheckout } from '../types/cart';

const schema = yup.object({
  firstName: yup.string().required('First name is required'),
  lastName: yup.string().required('Last name is required'),
  emailAddress: yup.string().email('Invalid email').required('Email is required'),
  addressLine: yup.string().required('Address is required'),
  country: yup.string().required('Country is required'),
  state: yup.string().required('State is required'),
  zipCode: yup.string().required('Zip code is required'),
  cardName: yup.string().required('Card name is required'),
  cardNumber: yup.string().required('Card number is required'),
  expiration: yup.string().required('Expiration is required'),
  cvv: yup.string().required('CVV is required'),
});

const Checkout: React.FC = () => {
  const navigate = useNavigate();
  const { cart, clearCart, loadCart, loading: cartLoading } = useCartStore();
  const [submitting, setSubmitting] = useState(false);

  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm({
    resolver: yupResolver(schema),
  });

  useEffect(() => {
    loadCart();
  }, [loadCart]);

  const onSubmit = async (data: any) => {
    if (!cart) return;

    setSubmitting(true);
    try {
      const checkoutData: BasketCheckout = {
        ...data,
        userName: cart.userName,
        customerId: '58C49479-EC65-4DE2-86E7-033C546291AA',
        totalPrice: cart.totalPrice,
        paymentMethod: 1,
      };

      await basketService.checkoutBasket({
        basketCheckoutDto: checkoutData,
      });

      await clearCart();
      navigate('/confirmation');
    } catch (error) {
      console.error('Checkout failed:', error);
      alert('Checkout failed. Please try again.');
    } finally {
      setSubmitting(false);
    }
  };

  // Show loading while cart is being loaded
  if (cartLoading) {
    return <Loading fullScreen message="Loading checkout..." />;
  }

  // Redirect if cart is empty
  if (!cart || cart.items.length === 0) {
    navigate('/cart');
    return null;
  }

  return (
    <div className="container mt-5">
      <h1>Checkout</h1>
      
      {submitting && (
        <div className="position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center" 
             style={{ backgroundColor: 'rgba(0,0,0,0.5)', zIndex: 9999 }}>
          <div className="bg-white p-5 rounded shadow">
            <Loading message="Processing your order..." />
          </div>
        </div>
      )}

      <form onSubmit={handleSubmit(onSubmit)}>
        <div className="row mt-4">
          <div className="col-md-6">
            <div className="card mb-4">
              <div className="card-header">
                <h3 className="mb-0">Shipping Information</h3>
              </div>
              <div className="card-body">
                <div className="mb-3">
                  <label className="form-label">First Name</label>
                  <input {...register('firstName')} className={`form-control ${errors.firstName ? 'is-invalid' : ''}`} />
                  {errors.firstName && (
                    <div className="invalid-feedback">{errors.firstName.message}</div>
                  )}
                </div>
                <div className="mb-3">
                  <label className="form-label">Last Name</label>
                  <input {...register('lastName')} className={`form-control ${errors.lastName ? 'is-invalid' : ''}`} />
                  {errors.lastName && (
                    <div className="invalid-feedback">{errors.lastName.message}</div>
                  )}
                </div>
                <div className="mb-3">
                  <label className="form-label">Email</label>
                  <input {...register('emailAddress')} className={`form-control ${errors.emailAddress ? 'is-invalid' : ''}`} />
                  {errors.emailAddress && (
                    <div className="invalid-feedback">{errors.emailAddress.message}</div>
                  )}
                </div>
                <div className="mb-3">
                  <label className="form-label">Address</label>
                  <input {...register('addressLine')} className={`form-control ${errors.addressLine ? 'is-invalid' : ''}`} />
                  {errors.addressLine && (
                    <div className="invalid-feedback">{errors.addressLine.message}</div>
                  )}
                </div>
                <div className="row">
                  <div className="col-md-6 mb-3">
                    <label className="form-label">Country</label>
                    <input {...register('country')} className={`form-control ${errors.country ? 'is-invalid' : ''}`} />
                    {errors.country && (
                      <div className="invalid-feedback">{errors.country.message}</div>
                    )}
                  </div>
                  <div className="col-md-6 mb-3">
                    <label className="form-label">State</label>
                    <input {...register('state')} className={`form-control ${errors.state ? 'is-invalid' : ''}`} />
                    {errors.state && (
                      <div className="invalid-feedback">{errors.state.message}</div>
                    )}
                  </div>
                </div>
                <div className="mb-3">
                  <label className="form-label">Zip Code</label>
                  <input {...register('zipCode')} className={`form-control ${errors.zipCode ? 'is-invalid' : ''}`} />
                  {errors.zipCode && (
                    <div className="invalid-feedback">{errors.zipCode.message}</div>
                  )}
                </div>
              </div>
            </div>
          </div>
          
          <div className="col-md-6">
            <div className="card mb-4">
              <div className="card-header">
                <h3 className="mb-0">Payment Information</h3>
              </div>
              <div className="card-body">
                <div className="mb-3">
                  <label className="form-label">Card Name</label>
                  <input {...register('cardName')} className={`form-control ${errors.cardName ? 'is-invalid' : ''}`} />
                  {errors.cardName && (
                    <div className="invalid-feedback">{errors.cardName.message}</div>
                  )}
                </div>
                <div className="mb-3">
                  <label className="form-label">Card Number</label>
                  <input {...register('cardNumber')} className={`form-control ${errors.cardNumber ? 'is-invalid' : ''}`} placeholder="1234 5678 9012 3456" />
                  {errors.cardNumber && (
                    <div className="invalid-feedback">{errors.cardNumber.message}</div>
                  )}
                </div>
                <div className="row">
                  <div className="col-md-6 mb-3">
                    <label className="form-label">Expiration</label>
                    <input
                      {...register('expiration')}
                      placeholder="MM/YY"
                      className={`form-control ${errors.expiration ? 'is-invalid' : ''}`}
                    />
                    {errors.expiration && (
                      <div className="invalid-feedback">{errors.expiration.message}</div>
                    )}
                  </div>
                  <div className="col-md-6 mb-3">
                    <label className="form-label">CVV</label>
                    <input {...register('cvv')} className={`form-control ${errors.cvv ? 'is-invalid' : ''}`} placeholder="123" />
                    {errors.cvv && <div className="invalid-feedback">{errors.cvv.message}</div>}
                  </div>
                </div>
              </div>
            </div>

            <div className="card">
              <div className="card-header bg-light">
                <h4 className="mb-0">Order Summary</h4>
              </div>
              <div className="card-body">
                <div className="d-flex justify-content-between mb-2">
                  <span>Items ({cart.items.reduce((sum, i) => sum + i.quantity, 0)}):</span>
                  <span>${cart.totalPrice.toFixed(2)}</span>
                </div>
                <div className="d-flex justify-content-between mb-2">
                  <span>Shipping:</span>
                  <span className="text-success">FREE</span>
                </div>
                <hr />
                <div className="d-flex justify-content-between">
                  <strong>Total:</strong>
                  <strong className="text-success">${cart.totalPrice.toFixed(2)}</strong>
                </div>

                <button
                  type="submit"
                  className="btn btn-success btn-lg w-100 mt-3"
                  disabled={submitting}
                >
                  {submitting ? (
                    <>
                      <span className="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                      Processing...
                    </>
                  ) : (
                    'Place Order'
                  )}
                </button>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  );
};

export default Checkout;
```

## WebApps/shopping-web-react/src/pages/Confirmation.tsx

```text
import React from 'react';
import { Link } from 'react-router-dom';

const Confirmation: React.FC = () => {
  return (
    <div className="container mt-5 text-center">
      <div className="alert alert-success">
        <h1>Order Placed Successfully!</h1>
        <p className="lead mt-3">Thank you for your purchase.</p>
        <p>Your order has been confirmed and will be processed soon.</p>
        <div className="mt-4">
          <Link to="/orders" className="btn btn-primary me-2">
            View Orders
          </Link>
          <Link to="/products" className="btn btn-secondary">
            Continue Shopping
          </Link>
        </div>
      </div>
    </div>
  );
};

export default Confirmation;
```

## WebApps/shopping-web-react/src/pages/Contact.tsx

```text
import React, { useState } from 'react';
import { useForm } from 'react-hook-form';
import { yupResolver } from '@hookform/resolvers/yup';
import * as yup from 'yup';

interface ContactFormData {
  name: string;
  email: string;
  subject: string;
  message: string;
}

const schema = yup.object({
  name: yup.string().required('Name is required'),
  email: yup
    .string()
    .email('Invalid email address')
    .required('Email is required'),
  subject: yup.string().required('Subject is required'),
  message: yup
    .string()
    .min(10, 'Message must be at least 10 characters')
    .required('Message is required'),
});

const Contact: React.FC = () => {
  const [submitSuccess, setSubmitSuccess] = useState(false);
  const [submitError, setSubmitError] = useState<string | null>(null);

  const {
    register,
    handleSubmit,
    formState: { errors },
    reset,
  } = useForm<ContactFormData>({
    resolver: yupResolver(schema),
  });

  const onSubmit = async (data: ContactFormData) => {
    try {
      // TODO: Replace with actual API call to send contact form
      console.log('Contact form data:', data);
      
      // Simulate API call
      await new Promise((resolve) => setTimeout(resolve, 1000));
      
      setSubmitSuccess(true);
      setSubmitError(null);
      reset();

      // Clear success message after 5 seconds
      setTimeout(() => setSubmitSuccess(false), 5000);
    } catch (error: any) {
        console.log(error);
        
      setSubmitError('Failed to send message. Please try again.');
      setSubmitSuccess(false);
    }
  };

  return (
    <div className="container mt-5">
      <div className="row">
        <div className="col-md-8 mx-auto">
          <h1 className="mb-4">Contact Us</h1>
          
          <div className="card mb-4">
            <div className="card-body">
              <h5 className="card-title">Get in Touch</h5>
              <p className="card-text">
                Have a question or feedback? We'd love to hear from you. Fill out
                the form below and we'll get back to you as soon as possible.
              </p>
            </div>
          </div>

          {submitSuccess && (
            <div className="alert alert-success alert-dismissible fade show" role="alert">
              <strong>Thank you!</strong> Your message has been sent successfully.
              We'll get back to you soon.
              <button
                type="button"
                className="btn-close"
                onClick={() => setSubmitSuccess(false)}
                aria-label="Close"
              ></button>
            </div>
          )}

          {submitError && (
            <div className="alert alert-danger alert-dismissible fade show" role="alert">
              <strong>Error!</strong> {submitError}
              <button
                type="button"
                className="btn-close"
                onClick={() => setSubmitError(null)}
                aria-label="Close"
              ></button>
            </div>
          )}

          <div className="card">
            <div className="card-body">
              <form onSubmit={handleSubmit(onSubmit)}>
                <div className="mb-3">
                  <label htmlFor="name" className="form-label">
                    Name <span className="text-danger">*</span>
                  </label>
                  <input
                    type="text"
                    className={`form-control ${errors.name ? 'is-invalid' : ''}`}
                    id="name"
                    {...register('name')}
                    placeholder="Enter your name"
                  />
                  {errors.name && (
                    <div className="invalid-feedback">{errors.name.message}</div>
                  )}
                </div>

                <div className="mb-3">
                  <label htmlFor="email" className="form-label">
                    Email <span className="text-danger">*</span>
                  </label>
                  <input
                    type="email"
                    className={`form-control ${errors.email ? 'is-invalid' : ''}`}
                    id="email"
                    {...register('email')}
                    placeholder="Enter your email"
                  />
                  {errors.email && (
                    <div className="invalid-feedback">{errors.email.message}</div>
                  )}
                </div>

                <div className="mb-3">
                  <label htmlFor="subject" className="form-label">
                    Subject <span className="text-danger">*</span>
                  </label>
                  <input
                    type="text"
                    className={`form-control ${errors.subject ? 'is-invalid' : ''}`}
                    id="subject"
                    {...register('subject')}
                    placeholder="Enter message subject"
                  />
                  {errors.subject && (
                    <div className="invalid-feedback">{errors.subject.message}</div>
                  )}
                </div>

                <div className="mb-3">
                  <label htmlFor="message" className="form-label">
                    Message <span className="text-danger">*</span>
                  </label>
                  <textarea
                    className={`form-control ${errors.message ? 'is-invalid' : ''}`}
                    id="message"
                    rows={6}
                    {...register('message')}
                    placeholder="Enter your message"
                  ></textarea>
                  {errors.message && (
                    <div className="invalid-feedback">{errors.message.message}</div>
                  )}
                </div>

                <button type="submit" className="btn btn-primary btn-lg w-100">
                  Send Message
                </button>
              </form>
            </div>
          </div>

          <div className="row mt-4">
            <div className="col-md-6">
              <div className="card h-100">
                <div className="card-body">
                  <h5 className="card-title">
                    <i className="bi bi-envelope"></i> Email
                  </h5>
                  <p className="card-text">support@shoppingapp.com</p>
                </div>
              </div>
            </div>
            <div className="col-md-6">
              <div className="card h-100">
                <div className="card-body">
                  <h5 className="card-title">
                    <i className="bi bi-telephone"></i> Phone
                  </h5>
                  <p className="card-text">+1 (555) 123-4567</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default Contact;
```

## WebApps/shopping-web-react/src/pages/Error.tsx

```text
import React from 'react';
import { useRouteError, isRouteErrorResponse, Link } from 'react-router-dom';

const ErrorPage: React.FC = () => {
  const error = useRouteError();
  
  let errorMessage: string;
  let errorStatus: number | string = 'Unknown';

  if (isRouteErrorResponse(error)) {
    // React Router error
    errorStatus = error.status;
    errorMessage = error.statusText || error.data?.message || 'An error occurred';
  } else if (error instanceof Error) {
    // Standard JavaScript error
    errorMessage = error.message;
  } else if (typeof error === 'string') {
    errorMessage = error;
  } else {
    errorMessage = 'An unexpected error occurred';
  }

  const getErrorTitle = () => {
    switch (errorStatus) {
      case 404:
        return 'Page Not Found';
      case 403:
        return 'Access Forbidden';
      case 500:
        return 'Internal Server Error';
      case 503:
        return 'Service Unavailable';
      default:
        return 'Oops! Something Went Wrong';
    }
  };

  const getErrorDescription = () => {
    switch (errorStatus) {
      case 404:
        return "The page you're looking for doesn't exist or has been moved.";
      case 403:
        return "You don't have permission to access this resource.";
      case 500:
        return 'Our server encountered an error while processing your request.';
      case 503:
        return 'Our service is temporarily unavailable. Please try again later.';
      default:
        return 'We apologize for the inconvenience. Please try again or contact support if the problem persists.';
    }
  };

  return (
    <div className="container">
      <div className="row min-vh-100 align-items-center justify-content-center">
        <div className="col-md-8 col-lg-6 text-center">
          <div className="error-container">
            {/* Error Icon */}
            <div className="mb-4">
              {errorStatus === 404 ? (
                <svg
                  width="120"
                  height="120"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                  className="text-danger"
                >
                  <path
                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"
                    fill="currentColor"
                  />
                </svg>
              ) : (
                <svg
                  width="120"
                  height="120"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                  className="text-warning"
                >
                  <path
                    d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"
                    fill="currentColor"
                  />
                </svg>
              )}
            </div>

            {/* Error Status */}
            {typeof errorStatus === 'number' && (
              <h1 className="display-1 fw-bold text-muted mb-3">{errorStatus}</h1>
            )}

            {/* Error Title */}
            <h2 className="mb-3">{getErrorTitle()}</h2>

            {/* Error Description */}
            <p className="lead text-muted mb-4">{getErrorDescription()}</p>

            {/* Error Message (for development) */}
            {import.meta.env.MODE === 'development' && (
              <div className="alert alert-danger text-start mb-4">
                <h6 className="alert-heading">Error Details (Development Only):</h6>
                <pre className="mb-0" style={{ whiteSpace: 'pre-wrap', fontSize: '0.875rem' }}>
                  {errorMessage}
                </pre>
              </div>
            )}

            {/* Action Buttons */}
            <div className="d-flex gap-3 justify-content-center">
              <Link to="/" className="btn btn-primary btn-lg">
                <i className="bi bi-house me-2"></i>
                Go to Homepage
              </Link>
              <button
                onClick={() => window.history.back()}
                className="btn btn-outline-secondary btn-lg"
              >
                <i className="bi bi-arrow-left me-2"></i>
                Go Back
              </button>
            </div>

            {/* Help Text */}
            <div className="mt-5">
              <p className="text-muted">
                Need help?{' '}
                <Link to="/contact" className="text-decoration-none">
                  Contact our support team
                </Link>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default ErrorPage;
```

## WebApps/shopping-web-react/src/pages/Home.tsx

```text
import React from 'react';
import { useProducts } from '../hooks/useProducts';
import ProductCard from '../components/product/ProductCard';
import TopProduct from '../components/product/TopProduct';
import Loading from '../components/common/Loading';
import { useCartStore } from '../store/cartStore';
import type { Product } from '../types/product';

const Home: React.FC = () => {
  const { products, loading, error } = useProducts(1, 6);
  const addItem = useCartStore((state) => state.addItem);

  const handleAddToCart = (product: Product) => {
    addItem({
      productId: product.id,
      productName: product.name,
      price: product.price,
      quantity: 1,
      color: 'default',
    });
  };

  if (loading) return <Loading fullScreen message="Loading featured products..." />;
  
  if (error) {
    return (
      <div className="container mt-5">
        <div className="alert alert-danger" role="alert">
          <h4 className="alert-heading">Error Loading Products</h4>
          <p>{error}</p>
          <hr />
          <button className="btn btn-danger" onClick={() => window.location.reload()}>
            Retry
          </button>
        </div>
      </div>
    );
  }

  const topProduct = products[0];
  const regularProducts = products.slice(1);

  return (
    <div className="container mt-5">
      <div className="row">
        {topProduct && <TopProduct product={topProduct} />}
        <div className="col-md-9">
          <div className="row">
            {regularProducts.map((product) => (
              <ProductCard
                key={product.id}
                product={product}
                onAddToCart={handleAddToCart}
              />
            ))}
          </div>
        </div>
      </div>
    </div>
  );
};

export default Home;
```

## WebApps/shopping-web-react/src/pages/OrderList.tsx

```text
import React, { useState } from 'react';
import { useOrders } from '../hooks/useOrders';
import { OrderStatus } from '../types/order';
import Loading from '../components/common/Loading';
import { Link } from 'react-router-dom';

const OrderList: React.FC = () => {
  const [pageIndex, setPageIndex] = useState(0);
  const pageSize = 10;
  const { orders, loading, error } = useOrders(pageIndex, pageSize);

  if (loading) return <Loading fullScreen message="Loading your orders..." />;
  
  if (error) {
    return (
      <div className="container mt-5">
        <div className="alert alert-danger" role="alert">
          <h4 className="alert-heading">Error Loading Orders</h4>
          <p>{error}</p>
          <button className="btn btn-danger" onClick={() => window.location.reload()}>
            Retry
          </button>
        </div>
      </div>
    );
  }

  const getStatusBadge = (status: OrderStatus) => {
    const statusMap = {
      [OrderStatus.Draft]: 'secondary',
      [OrderStatus.Pending]: 'warning',
      [OrderStatus.Completed]: 'success',
      [OrderStatus.Cancelled]: 'danger',
    };
    return `badge bg-${statusMap[status]}`;
  };

  const getStatusText = (status: OrderStatus) => {
    const statusTextMap: Record<OrderStatus, string> = {
      [OrderStatus.Draft]: 'Draft',
      [OrderStatus.Pending]: 'Pending',
      [OrderStatus.Completed]: 'Completed',
      [OrderStatus.Cancelled]: 'Cancelled',
    };
    return statusTextMap[status];
  };

  return (
    <div className="container mt-5">
      <h1 className="mb-4">Order History</h1>
      
      {orders && orders.data.length > 0 ? (
        <>
          <div className="table-responsive">
            <table className="table table-hover">
              <thead className="table-light">
                <tr>
                  <th>Order ID</th>
                  <th>Order Name</th>
                  <th>Status</th>
                  <th>Items</th>
                  <th>Total</th>
                  <th>Date</th>
                </tr>
              </thead>
              <tbody>
                {orders.data.map((order) => (
                  <tr key={order.id}>
                    <td>
                      <small className="text-muted">{order.id.substring(0, 8)}...</small>
                    </td>
                    <td>
                      <strong>{order.orderName}</strong>
                    </td>
                    <td>
                      <span className={getStatusBadge(order.status)}>
                        {getStatusText(order.status)}
                      </span>
                    </td>
                    <td>{order.orderItems.length} items</td>
                    <td>
                      <strong>
                        $
                        {order.orderItems
                          .reduce((sum, item) => sum + item.price * item.quantity, 0)
                          .toFixed(2)}
                      </strong>
                    </td>
                    <td>
                      <small className="text-muted">
                        {/* Add date if available in order object */}
                        N/A
                      </small>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
          
          <div className="d-flex justify-content-center align-items-center mt-4">
            <button
              className="btn btn-outline-primary me-2"
              onClick={() => setPageIndex((p) => Math.max(1, p - 1))}
              disabled={pageIndex === 1}
            >
              <i className="bi bi-chevron-left"></i> Previous
            </button>
            <span className="mx-3">
              Page <strong>{pageIndex}</strong> of{' '}
              <strong>{Math.ceil(orders.count / pageSize)}</strong>
            </span>
            <button
              className="btn btn-outline-primary ms-2"
              onClick={() => setPageIndex((p) => p + 1)}
              disabled={pageIndex >= Math.ceil(orders.count / pageSize)}
            >
              Next <i className="bi bi-chevron-right"></i>
            </button>
          </div>
        </>
      ) : (
        <div className="text-center py-5">
          <svg
            width="120"
            height="120"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            className="text-muted mb-4"
          >
            <path
              d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"
              fill="currentColor"
            />
          </svg>
          <h3>No Orders Yet</h3>
          <p className="text-muted">You haven't placed any orders yet.</p>
          <Link to="/products" className="btn btn-primary mt-3">
            Start Shopping
          </Link>
        </div>
      )}
    </div>
  );
};

export default OrderList;
```

## WebApps/shopping-web-react/src/pages/Privacy.tsx

```text
import React from 'react';

const Privacy: React.FC = () => {
  return (
    <div className="container mt-5">
      <div className="row">
        <div className="col-md-10 mx-auto">
          <h1 className="mb-4">Privacy Policy</h1>
          
          <div className="card mb-3">
            <div className="card-body">
              <p className="text-muted">
                <strong>Last Updated:</strong> {new Date().toLocaleDateString()}
              </p>
              <p>
                This Privacy Policy describes how Shopping App ("we", "us", or "our")
                collects, uses, and shares your personal information when you use our
                website and services.
              </p>
            </div>
          </div>

          <section className="mb-4">
            <h2>1. Information We Collect</h2>
            <div className="card">
              <div className="card-body">
                <h5>Personal Information</h5>
                <p>
                  When you use our services, we may collect the following types of
                  personal information:
                </p>
                <ul>
                  <li>Name and contact information (email address, phone number)</li>
                  <li>Billing and shipping address</li>
                  <li>Payment information (processed securely by our payment provider)</li>
                  <li>Order history and preferences</li>
                  <li>Account credentials (username and password)</li>
                </ul>

                <h5 className="mt-3">Automatically Collected Information</h5>
                <p>We automatically collect certain information about your device, including:</p>
                <ul>
                  <li>IP address and browser type</li>
                  <li>Operating system and device information</li>
                  <li>Pages visited and time spent on our site</li>
                  <li>Referring website and search terms used</li>
                </ul>
              </div>
            </div>
          </section>

          <section className="mb-4">
            <h2>2. How We Use Your Information</h2>
            <div className="card">
              <div className="card-body">
                <p>We use the information we collect to:</p>
                <ul>
                  <li>Process and fulfill your orders</li>
                  <li>Communicate with you about your orders and account</li>
                  <li>Provide customer support</li>
                  <li>Send marketing communications (with your consent)</li>
                  <li>Improve our website and services</li>
                  <li>Detect and prevent fraud</li>
                  <li>Comply with legal obligations</li>
                </ul>
              </div>
            </div>
          </section>

          <section className="mb-4">
            <h2>3. Information Sharing and Disclosure</h2>
            <div className="card">
              <div className="card-body">
                <p>
                  We do not sell your personal information. We may share your information
                  with:
                </p>
                <ul>
                  <li>
                    <strong>Service Providers:</strong> Third-party companies that help us
                    operate our business (payment processors, shipping companies, etc.)
                  </li>
                  <li>
                    <strong>Legal Authorities:</strong> When required by law or to protect
                    our rights
                  </li>
                  <li>
                    <strong>Business Transfers:</strong> In connection with a merger,
                    acquisition, or sale of assets
                  </li>
                </ul>
              </div>
            </div>
          </section>

          <section className="mb-4">
            <h2>4. Cookies and Tracking Technologies</h2>
            <div className="card">
              <div className="card-body">
                <p>
                  We use cookies and similar tracking technologies to enhance your
                  experience on our website. Cookies are small data files stored on your
                  device that help us:
                </p>
                <ul>
                  <li>Remember your preferences and settings</li>
                  <li>Keep you logged in</li>
                  <li>Understand how you use our site</li>
                  <li>Provide personalized content and advertisements</li>
                </ul>
                <p>
                  You can control cookies through your browser settings. However,
                  disabling cookies may affect the functionality of our website.
                </p>
              </div>
            </div>
          </section>

          <section className="mb-4">
            <h2>5. Data Security</h2>
            <div className="card">
              <div className="card-body">
                <p>
                  We implement appropriate technical and organizational measures to
                  protect your personal information against unauthorized access, loss, or
                  misuse. However, no method of transmission over the internet is 100%
                  secure, and we cannot guarantee absolute security.
                </p>
              </div>
            </div>
          </section>

          <section className="mb-4">
            <h2>6. Your Rights and Choices</h2>
            <div className="card">
              <div className="card-body">
                <p>You have the right to:</p>
                <ul>
                  <li>Access the personal information we hold about you</li>
                  <li>Request correction of inaccurate information</li>
                  <li>Request deletion of your personal information</li>
                  <li>Object to or restrict certain processing activities</li>
                  <li>Withdraw consent for marketing communications</li>
                  <li>Request a copy of your data in a portable format</li>
                </ul>
                <p>
                  To exercise these rights, please contact us using the information
                  provided below.
                </p>
              </div>
            </div>
          </section>

          <section className="mb-4">
            <h2>7. Children's Privacy</h2>
            <div className="card">
              <div className="card-body">
                <p>
                  Our services are not intended for children under the age of 13. We do
                  not knowingly collect personal information from children. If you believe
                  we have collected information from a child, please contact us
                  immediately.
                </p>
              </div>
            </div>
          </section>

          <section className="mb-4">
            <h2>8. International Data Transfers</h2>
            <div className="card">
              <div className="card-body">
                <p>
                  Your information may be transferred to and processed in countries other
                  than your country of residence. These countries may have different data
                  protection laws. By using our services, you consent to such transfers.
                </p>
              </div>
            </div>
          </section>

          <section className="mb-4">
            <h2>9. Changes to This Privacy Policy</h2>
            <div className="card">
              <div className="card-body">
                <p>
                  We may update this Privacy Policy from time to time. We will notify you
                  of any significant changes by posting the new policy on this page and
                  updating the "Last Updated" date. We encourage you to review this
                  Privacy Policy periodically.
                </p>
              </div>
            </div>
          </section>

          <section className="mb-4">
            <h2>10. Contact Us</h2>
            <div className="card">
              <div className="card-body">
                <p>
                  If you have any questions about this Privacy Policy or our data
                  practices, please contact us:
                </p>
                <ul className="list-unstyled">
                  <li>
                    <strong>Email:</strong> privacy@shoppingapp.com
                  </li>
                  <li>
                    <strong>Phone:</strong> +1 (555) 123-4567
                  </li>
                  <li>
                    <strong>Address:</strong> 123 Shopping Street, Commerce City, ST
                    12345
                  </li>
                </ul>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>
  );
};

export default Privacy;
```

## WebApps/shopping-web-react/src/pages/ProductDetail.tsx

```text
import React, { useState } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { useProduct } from '../hooks/useProducts';
import Loading from '../components/common/Loading';
import { useCartStore } from '../store/cartStore';

const ProductDetail: React.FC = () => {
  const { productId } = useParams<{ productId: string }>();
  const navigate = useNavigate();
  const { product, loading, error } = useProduct(productId!);
  const addItem = useCartStore((state) => state.addItem);
  const [addingToCart, setAddingToCart] = useState(false);

  const handleAddToCart = async () => {
    if (!product) return;

    setAddingToCart(true);
    try {
      await addItem({
        productId: product.id,
        productName: product.name,
        price: product.price,
        quantity: 1,
        color: 'default',
      });
      
      // Show success feedback
      setTimeout(() => {
        navigate('/cart');
      }, 500);
    } catch (error) {
      console.error('Failed to add to cart:', error);
      alert('Failed to add item to cart. Please try again.');
    } finally {
      setAddingToCart(false);
    }
  };

  if (loading) return <Loading fullScreen message="Loading product details..." />;
  
  if (error) {
    return (
      <div className="container mt-5">
        <div className="alert alert-danger" role="alert">
          <h4 className="alert-heading">Error Loading Product</h4>
          <p>{error}</p>
          <button className="btn btn-primary mt-2" onClick={() => navigate('/products')}>
            Back to Products
          </button>
        </div>
      </div>
    );
  }
  
  if (!product) {
    return (
      <div className="container mt-5">
        <div className="alert alert-warning" role="alert">
          <h4 className="alert-heading">Product Not Found</h4>
          <p>The product you're looking for doesn't exist.</p>
          <button className="btn btn-primary mt-2" onClick={() => navigate('/products')}>
            Browse Products
          </button>
        </div>
      </div>
    );
  }

  return (
    <div className="container mt-5">
      <div className="row">
        <div className="col-md-6">
          <img
            src={`/images/product/${product.imageFile}`}
            alt={product.name}
            className="img-fluid rounded shadow"
          />
        </div>
        <div className="col-md-6">
          <h1>{product.name}</h1>
          <p className="text-muted">
            Categories: {product.category.join(', ')}
          </p>
          <h2 className="text-danger">${product.price.toFixed(2)}</h2>
          <p className="mt-3">{product.description}</p>
          <button 
            onClick={handleAddToCart} 
            className="btn btn-success btn-lg"
            disabled={addingToCart}
          >
            {addingToCart ? (
              <>
                <span className="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                Adding to Cart...
              </>
            ) : (
              'Add to Cart'
            )}
          </button>
        </div>
      </div>
    </div>
  );
};

export default ProductDetail;
```

## WebApps/shopping-web-react/src/pages/ProductList.tsx

```text
import React, { useState } from 'react';
import { useProducts } from '../hooks/useProducts';
import ProductCard from '../components/product/ProductCard';
import Loading from '../components/common/Loading';
import { useCartStore } from '../store/cartStore';
import type { Product } from '../types/product';

const ProductList: React.FC = () => {
  const [pageNumber, setPageNumber] = useState(1);
  const pageSize = 9;
  const { products, loading, error } = useProducts(pageNumber, pageSize);
  const addItem = useCartStore((state) => state.addItem);

  const handleAddToCart = (product: Product) => {
    addItem({
      productId: product.id,
      productName: product.name,
      price: product.price,
      quantity: 1,
      color: 'default',
    });
  };

  if (loading) return <Loading fullScreen message="Loading products..." />;
  
  if (error) {
    return (
      <div className="container mt-5">
        <div className="alert alert-danger" role="alert">
          <h4 className="alert-heading">Error Loading Products</h4>
          <p>{error}</p>
        </div>
      </div>
    );
  }

  return (
    <div className="container mt-5">
      <h1 className="mb-4">Products</h1>
      {products.length === 0 ? (
        <div className="alert alert-info">
          <p className="mb-0">No products found.</p>
        </div>
      ) : (
        <>
          <div className="row">
            {products.map((product) => (
              <ProductCard
                key={product.id}
                product={product}
                onAddToCart={handleAddToCart}
              />
            ))}
          </div>
          <div className="d-flex justify-content-center mt-4">
            <button
              className="btn btn-primary me-2"
              onClick={() => setPageNumber((p) => Math.max(1, p - 1))}
              disabled={pageNumber === 1}
            >
              Previous
            </button>
            <span className="align-self-center">Page {pageNumber}</span>
            <button
              className="btn btn-primary ms-2"
              onClick={() => setPageNumber((p) => p + 1)}
              disabled={products.length < pageSize}
            >
              Next
            </button>
          </div>
        </>
      )}
    </div>
  );
};

export default ProductList;
```

## WebApps/shopping-web-react/src/router.tsx

```text
import { createBrowserRouter } from 'react-router-dom';
import { lazy } from 'react';
import App from './App';
import ErrorPage from './pages/Error';

// Lazy load pages for better performance
const Home = lazy(() => import('./pages/Home'));
const ProductList = lazy(() => import('./pages/ProductList'));
const ProductDetail = lazy(() => import('./pages/ProductDetail'));
const Cart = lazy(() => import('./pages/Cart'));
const Checkout = lazy(() => import('./pages/Checkout'));
const Confirmation = lazy(() => import('./pages/Confirmation'));
const OrderList = lazy(() => import('./pages/OrderList'));
const Contact = lazy(() => import('./pages/Contact'));
const Privacy = lazy(() => import('./pages/Privacy'));

export const router = createBrowserRouter([
  {
    path: '/',
    element: <App />,
    errorElement: <ErrorPage />,
    children: [
      {
        index: true,
        element: <Home />,
      },
      {
        path: 'products',
        element: <ProductList />,
      },
      {
        path: 'products/:productId',
        element: <ProductDetail />,
      },
      {
        path: 'cart',
        element: <Cart />,
      },
      {
        path: 'checkout',
        element: <Checkout />,
      },
      {
        path: 'confirmation',
        element: <Confirmation />,
      },
      {
        path: 'orders',
        element: <OrderList />,
      },
      {
        path: 'contact',
        element: <Contact />,
      },
      {
        path: 'privacy',
        element: <Privacy />,
      },
    ],
  },
]);
```

## WebApps/shopping-web-react/src/store/cartStore.ts

```typescript
import { create } from 'zustand';
import { persist } from 'zustand/middleware';
import { basketService } from '../api/basketService';
import type { ShoppingCart, ShoppingCartItem } from '../types/cart';

interface CartStore {
  cart: ShoppingCart | null;
  loading: boolean;
  error: string | null;
  
  // Actions
  loadCart: () => Promise<void>;
  addItem: (item: ShoppingCartItem) => Promise<void>;
  removeItem: (productId: string) => Promise<void>;
  updateQuantity: (productId: string, quantity: number) => Promise<void>;
  clearCart: () => Promise<void>;
  syncCart: () => Promise<void>;
}

export const useCartStore = create<CartStore>()(
  persist(
    (set, get) => ({
      cart: null,
      loading: false,
      error: null,

      loadCart: async () => {
        set({ loading: true, error: null });
        try {
          const cart = await basketService.loadUserBasket();
          set({ cart, loading: false });
        } catch (error: any) {
          set({ error: error.message, loading: false });
        }
      },

      addItem: async (item: ShoppingCartItem) => {
        const { cart } = get();
        if (!cart) return;

        const existingItem = cart.items.find((i) => i.productId === item.productId);
        let updatedItems: ShoppingCartItem[];

        if (existingItem) {
          updatedItems = cart.items.map((i) =>
            i.productId === item.productId
              ? { ...i, quantity: i.quantity + item.quantity }
              : i
          );
        } else {
          updatedItems = [...cart.items, item];
        }

        const updatedCart: ShoppingCart = {
          ...cart,
          items: updatedItems,
          totalPrice: updatedItems.reduce((sum, i) => sum + i.price * i.quantity, 0),
        };

        set({ cart: updatedCart });
        await get().syncCart();
      },

      removeItem: async (productId: string) => {
        const { cart } = get();
        if (!cart) return;

        const updatedItems = cart.items.filter((i) => i.productId !== productId);
        const updatedCart: ShoppingCart = {
          ...cart,
          items: updatedItems,
          totalPrice: updatedItems.reduce((sum, i) => sum + i.price * i.quantity, 0),
        };

        set({ cart: updatedCart });
        await get().syncCart();
      },

      updateQuantity: async (productId: string, quantity: number) => {
        const { cart } = get();
        if (!cart) return;

        if (quantity <= 0) {
          await get().removeItem(productId);
          return;
        }

        const updatedItems = cart.items.map((i) =>
          i.productId === productId ? { ...i, quantity } : i
        );
        const updatedCart: ShoppingCart = {
          ...cart,
          items: updatedItems,
          totalPrice: updatedItems.reduce((sum, i) => sum + i.price * i.quantity, 0),
        };

        set({ cart: updatedCart });
        await get().syncCart();
      },

      clearCart: async () => {
        const { cart } = get();
        if (!cart) return;

        try {
          await basketService.deleteBasket(cart.userName);
          set({ cart: { userName: cart.userName, items: [], totalPrice: 0 } });
        } catch (error: any) {
          set({ error: error.message });
        }
      },

      syncCart: async () => {
        const { cart } = get();
        if (!cart) return;

        try {
          await basketService.storeBasket({ cart });
        } catch (error: any) {
          set({ error: error.message });
        }
      },
    }),
    {
      name: 'shopping-cart',
    }
  )
);
```

## WebApps/shopping-web-react/src/store/userStore.ts

```typescript

```

## WebApps/shopping-web-react/src/styles/global.css

```css
/* Import original styles from .NET app */
.bloc_left_price {
  color: #c01508;
  text-align: center;
  font-weight: bold;
  font-size: 150%;
}

.category_block li:hover {
  background-color: #007bff;
}

.category_block li:hover a {
  color: #ffffff;
}

.category_block li a {
  color: #343a40;
}

.add_to_cart_block .price {
  color: #c01508;
  text-align: center;
  font-weight: bold;
  font-size: 200%;
  margin-bottom: 0;
}

.add_to_cart_block .price_discounted {
  color: #343a40;
  text-align: center;
  text-decoration: line-through;
  font-size: 140%;
}

.product_rassurance {
  padding: 10px;
  margin-top: 15px;
  background: #ffffff;
  border: 1px solid #6c757d;
  color: #6c757d;
}

.product_rassurance .list-inline {
  margin-bottom: 0;
  text-transform: uppercase;
  text-align: center;
}

.product_rassurance .list-inline li:hover {
  color: #343a40;
}

.reviews_product .fa-star {
  color: gold;
}

.pagination {
  margin-top: 20px;
}

footer {
  background: #343a40;
  padding: 40px;
}

footer a {
  color: #f8f9fa !important;
}
```

## WebApps/shopping-web-react/src/types/cart.ts

```typescript
export interface ShoppingCartItem {
  quantity: number;
  color: string;
  price: number;
  productId: string;
  productName: string;
}

export interface ShoppingCart {
  userName: string;
  items: ShoppingCartItem[];
  totalPrice: number;
}

export interface GetBasketResponse {
  cart: ShoppingCart;
}

export interface StoreBasketRequest {
  cart: ShoppingCart;
}

export interface StoreBasketResponse {
  userName: string;
}

export interface DeleteBasketResponse {
  isSuccess: boolean;
}

export interface BasketCheckout {
  userName: string;
  customerId: string;
  totalPrice: number;
  // Shipping and Billing
  firstName: string;
  lastName: string;
  emailAddress: string;
  addressLine: string;
  country: string;
  state: string;
  zipCode: string;
  // Payment
  cardName: string;
  cardNumber: string;
  expiration: string;
  cvv: string;
  paymentMethod: number;
}

export interface CheckoutBasketRequest {
  basketCheckoutDto: BasketCheckout;
}

export interface CheckoutBasketResponse {
  isSuccess: boolean;
}
```

## WebApps/shopping-web-react/src/types/order.ts

```typescript
export const OrderStatus = {
  Draft: 1,
  Pending: 2,
  Completed: 3,
  Cancelled: 4,
} as const;

export type OrderStatus = typeof OrderStatus[keyof typeof OrderStatus];

export interface Address {
  firstName: string;
  lastName: string;
  emailAddress: string;
  addressLine: string;
  country: string;
  state: string;
  zipCode: string;
}

export interface Payment {
  cardName: string;
  cardNumber: string;
  expiration: string;
  cvv: string;
  paymentMethod: number;
}

export interface OrderItem {
  orderId: string;
  productId: string;
  quantity: number;
  price: number;
}

export interface Order {
  id: string;
  customerId: string;
  orderName: string;
  shippingAddress: Address;
  billingAddress: Address;
  payment: Payment;
  status: OrderStatus;
  orderItems: OrderItem[];
}

export interface PaginatedResult<T> {
  pageIndex: number;
  pageSize: number;
  count: number;
  data: T[];
}

export interface GetOrdersResponse {
  orders: PaginatedResult<Order>;
}

export interface GetOrdersByNameResponse {
  orders: Order[];
}

export interface GetOrdersByCustomerResponse {
  orders: PaginatedResult<Order>;
}
```

## WebApps/shopping-web-react/src/types/product.ts

```typescript
export interface Product {
  id: string;
  name: string;
  category: string[];
  description: string;
  imageFile: string;
  price: number;
}

export interface GetProductsResponse {
  products: Product[];
}

export interface GetProductByIdResponse {
  product: Product;
}

export interface GetProductByCategoryResponse {
  products: Product[];
}

export interface PaginationParams {
  pageNumber?: number;
  pageSize?: number;
}
```

## WebApps/shopping-web-react/src/utils/formatters.ts

```typescript

```

## WebApps/shopping-web-react/src/utils/validators.ts

```typescript

```

## WebApps/shopping-web-react/tsconfig.app.json

```json
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2022",
    "useDefineForClassFields": true,
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "types": ["vite/client"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["src"]
}
```

## WebApps/shopping-web-react/tsconfig.json

```json
{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ]
}
```

## WebApps/shopping-web-react/tsconfig.node.json

```json
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.node.tsbuildinfo",
    "target": "ES2023",
    "lib": ["ES2023"],
    "module": "ESNext",
    "types": ["node"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["vite.config.ts"]
}
```

## WebApps/shopping-web-react/vite.config.ts

```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vite.dev/config/
export default defineConfig({
  plugins: [react()],
})
```

## Statistics

- Total Files: 242
- Total Characters: 689051
- Total Tokens: 0
