This file is a merged representation of the entire codebase, combining all repository files into a single document.
Generated by Repomix on: 2026-01-14 10:25:16

# File Summary

## Purpose:

This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

## File Format:

The content is organized as follows:
1. This summary section
2. Repository information
3. Repository structure
4. Multiple file entries, each consisting of:
   a. A header with the file path (## File: path/to/file)
   b. The full contents of the file in a code block

## Usage Guidelines:

- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.

## Notes:

- Some files may have been excluded based on .gitignore rules and Repomix's
  configuration.
- Binary files are not included in this packed representation. Please refer to
  the Repository Structure section for a complete list of file paths, including
  binary files.

## Additional Information:

For more information about Repomix, visit: https://github.com/andersonby/python-repomix


# Repository Structure

```
.dockerignore
bin
  Debug
    appsettings.Development.json
    appsettings.json
    CatalogAPI.runtimeconfig.json
    CatalogAPI.staticwebassets.endpoints.json
BuildingBlocks
  BuildingBlocks
    Behaviours
      LoggingBehaviour.cs
      ValidationBehaviour.cs
    BuildingBlocks.csproj
    CQRS
      ICommand.cs
      ICommandHandler.cs
      IQuery.cs
      IQueryHandler.cs
    Exceptions
      BadRequestException.cs
      Handler
        CustomExceptionHandler.cs
      InternalServerException.cs
      NotFoundException.cs
docker-compose.dcproj
docker-compose.override.yml
docker-compose.yml
eshop-microservices.slnx
launchSettings.json
obj
  Debug
    docker-c.35A3FFBA.Up2Date
    docker-compose.dcproj.FileListAbsolute.txt
  Docker
    docker-compose.vs.debug.g.yml
    docker-compose.vs.debug.partial.g.yml
    docker-compose.vs.release.g.yml
    docker-compose.vs.release.partial.g.yml
Services
  Catalog
    CatalogAPI
      appsettings.Development.json
      appsettings.json
      CatalogAPI.csproj
      Data
        CatalogInitialData.cs
      Dockerfile
      Dockerfile.original
      Exceptions
        ProductNotFoundException.cs
      GlobalUsings.cs
      Models
        Product.cs
      Products
        CreateProduct
          CreateProductEndpoint.cs
          CreateProductHandler.cs
        DeleteProduct
          DeleteProductEndpoint.cs
          DeleteProductHandler.cs
        GetProductByCategory
          GetProductByCategoryEndpoint.cs
          GetProductByCategoryHandler.cs
        GetProductById
          GetProductByIdEndpoint.cs
          GetProductByIdHandler.cs
        GetProducts
          GetProductsEndpoint.cs
          GetProductsHandler.cs
        UpadateProduct
          UpdateProductEndpoint.cs
          UpdateProductHandler.cs
      Program.cs
      Properties
        launchSettings.json
```

# Repository Files


## .dockerignore

```text
**/.classpath
**/.dockerignore
**/.env
**/.git
**/.gitignore
**/.project
**/.settings
**/.toolstarget
**/.vs
**/.vscode
**/*.*proj.user
**/*.dbmdl
**/*.jfm
**/azds.yaml
**/bin
**/charts
**/docker-compose*
**/Dockerfile*
**/node_modules
**/npm-debug.log
**/obj
**/secrets.dev.yaml
**/values.dev.yaml
LICENSE
README.md
!**/.gitignore
!.git/HEAD
!.git/config
!.git/packed-refs
!.git/refs/heads/**
```

## bin/Debug/appsettings.Development.json

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  }
}
```

## bin/Debug/appsettings.json

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "ConnectionStrings": {
    "Database": "Server=localhost;Port=5432;Database=CatalogDb;User Id=postgres;Password=postgres;Include Error Detail=true"
  }
}
```

## bin/Debug/CatalogAPI.runtimeconfig.json

```json
{
  "runtimeOptions": {
    "tfm": "net10.0",
    "frameworks": [
      {
        "name": "Microsoft.NETCore.App",
        "version": "10.0.0"
      },
      {
        "name": "Microsoft.AspNetCore.App",
        "version": "10.0.0"
      }
    ],
    "configProperties": {
      "System.GC.Server": true,
      "System.Runtime.Serialization.EnableUnsafeBinaryFormatterSerialization": false
    }
  }
}
```

## bin/Debug/CatalogAPI.staticwebassets.endpoints.json

```json
{"Version":1,"ManifestType":"Build","Endpoints":[]}
```

## BuildingBlocks/BuildingBlocks/Behaviours/LoggingBehaviour.cs

```text
﻿using MediatR;
using Microsoft.Extensions.Logging;
using System.Diagnostics;

namespace BuildingBlocks.Behaviours
{
    public class LoggingBehaviour<TRequest, TResponse>
        (ILogger<LoggingBehaviour<TRequest, TResponse>> logger)
        : IPipelineBehavior<TRequest, TResponse>
        where TRequest : notnull, IRequest<TResponse>
        where TResponse : notnull
    {
        public async Task<TResponse> Handle(TRequest request, RequestHandlerDelegate<TResponse> next, CancellationToken cancellationToken)
        {
            logger.LogInformation("[START] Handle Request={Request} - Response={Response} - RequestData={RequestData}",
                typeof(TRequest).Name, typeof(TResponse).Name, request);

            var timer = new Stopwatch();
            timer.Start();

            var response = await next();

            timer.Stop();
            var timeTaken = timer.Elapsed;
            if (timeTaken.Seconds > 3)
                logger.LogWarning("[PERFORMANCE] The request {Request} took {TimeTaken}",
                    typeof(TRequest).Name, timeTaken.Seconds);

            logger.LogInformation("[END] Handled {Request} with {Response}",
                typeof(TRequest).Name, typeof(TResponse).Name);
            return response;
        }
    }
}
```

## BuildingBlocks/BuildingBlocks/Behaviours/ValidationBehaviour.cs

```text
﻿using BuildingBlocks.CQRS;
using FluentValidation;
using MediatR;

namespace BuildingBlocks.Behaviours
{
    public class ValidationBehaviour<TRequest, TResponse>
        (IEnumerable<IValidator<TRequest>> validators)
        : IPipelineBehavior<TRequest, TResponse>
        where TRequest : ICommand<TResponse>
    {
        public async Task<TResponse> Handle(TRequest request, RequestHandlerDelegate<TResponse> next, CancellationToken cancellationToken)
        {
            var context = new ValidationContext<TRequest>(request);

            var validationResults =
                await Task.WhenAll(validators.Select(v => v.ValidateAsync(context, cancellationToken)));

            var failures = validationResults
                                .Where(v => v.Errors.Any())
                                .SelectMany(v => v.Errors)
                                .ToList();
            if (failures.Any())
                throw new ValidationException(failures);

            return await next();
        }
    }
}
```

## BuildingBlocks/BuildingBlocks/BuildingBlocks.csproj

```text
﻿<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="FluentValidation" Version="12.1.1" />
    <PackageReference Include="FluentValidation.AspNetCore" Version="11.3.1" />
    <PackageReference Include="FluentValidation.DependencyInjectionExtensions" Version="12.1.1" />
    <PackageReference Include="Mapster" Version="7.4.0" />
    <PackageReference Include="MediatR" Version="14.0.0" />
  </ItemGroup>

</Project>
```

## BuildingBlocks/BuildingBlocks/CQRS/ICommand.cs

```text
﻿using MediatR;

namespace BuildingBlocks.CQRS
{
    public interface ICommand : ICommand<Unit>
    {
    }
    public interface ICommand<out TResponse> : IRequest<TResponse>
    {
    }
}
```

## BuildingBlocks/BuildingBlocks/CQRS/ICommandHandler.cs

```text
﻿using MediatR;

namespace BuildingBlocks.CQRS
{
    public interface ICommandHandler<in TCommand>
        : ICommandHandler<TCommand, Unit>
        where TCommand : ICommand<Unit>
    {
        
    }
    public interface ICommandHandler<in TCommand, TResponse> : IRequestHandler<TCommand, TResponse>
        where TCommand : ICommand<TResponse>
        where TResponse : notnull
    {
    }
}
```

## BuildingBlocks/BuildingBlocks/CQRS/IQuery.cs

```text
﻿using MediatR;

namespace BuildingBlocks.CQRS
{
    public interface IQuery<out TResponse> : IRequest<TResponse>
        where TResponse : notnull
    {
    }
}
```

## BuildingBlocks/BuildingBlocks/CQRS/IQueryHandler.cs

```text
﻿using MediatR;

namespace BuildingBlocks.CQRS
{
    public interface IQueryHandler<in TQuery, TResponse> 
        : IRequestHandler<TQuery, TResponse>
        where TQuery : IQuery<TResponse>
        where TResponse : notnull
    {
    }
}
```

## BuildingBlocks/BuildingBlocks/Exceptions/BadRequestException.cs

```text
﻿using System;
using System.Collections.Generic;
using System.Text;

namespace BuildingBlocks.Exceptions
{
    public class BadRequestException : Exception
    {
        public BadRequestException(string message) : base(message)
        {            
        }

        public BadRequestException(string message, string details) : base(message)
        {
            Details = details;
        }

        public string? Details { get; }
    }
}
```

## BuildingBlocks/BuildingBlocks/Exceptions/Handler/CustomExceptionHandler.cs

```text
﻿using FluentValidation;
using Microsoft.AspNetCore.Diagnostics;
using Microsoft.AspNetCore.Http;
using Microsoft.Extensions.Logging;

namespace BuildingBlocks.Exceptions.Handler
{
    public class CustomExceptionHandler (ILogger<CustomExceptionHandler> logger)
        : IExceptionHandler
    {
        public async ValueTask<bool> TryHandleAsync(HttpContext context, Exception exception, CancellationToken cancellationToken)
        {
            logger.LogError(
                "Error Message: {exceptionMessage}, Time of occurrence {time}",
                exception.Message, DateTime.UtcNow);

            (string Detail, string Title, int StatusCode) details = exception switch
            {
                InternalServerException =>
                (
                    exception.Message,
                    exception.GetType().Name,
                    context.Response.StatusCode = StatusCodes.Status500InternalServerError
                ),
                ValidationException =>
                (
                    exception.Message,
                    exception.GetType().Name,
                    context.Response.StatusCode = StatusCodes.Status400BadRequest
                ),
                NotFoundException =>
                (
                    exception.Message,
                    exception.GetType().Name,
                    context.Response.StatusCode = StatusCodes.Status404NotFound
                ),
                _ =>
                (
                    exception.Message,
                    exception.GetType().Name,
                    context.Response.StatusCode = StatusCodes.Status500InternalServerError
                )
            };

            var problemDetails = new Microsoft.AspNetCore.Mvc.ProblemDetails
            {
                Title = details.Title,
                Detail = details.Detail,
                Status = details.StatusCode,
                Instance = context.Request.Path
            };

            problemDetails.Extensions.Add("traceId", context.TraceIdentifier);

            if(exception is ValidationException validationException)
            {
                problemDetails.Extensions.Add("ValidationErrors", validationException.Errors);
            }

            await context.Response.WriteAsJsonAsync(problemDetails, cancellationToken: cancellationToken);
            return true;
        }
    }
}
```

## BuildingBlocks/BuildingBlocks/Exceptions/InternalServerException.cs

```text
﻿namespace BuildingBlocks.Exceptions
{
    public class InternalServerException : Exception
    {
        public InternalServerException(string message) : base(message)
        {            
        }

        public InternalServerException(string message, string details) : base(message)
        {
            Details = details;
        }

        public string? Details { get; }
    }
}
```

## BuildingBlocks/BuildingBlocks/Exceptions/NotFoundException.cs

```text
﻿using System;
using System.Collections.Generic;
using System.Text;

namespace BuildingBlocks.Exceptions
{
    public class NotFoundException : Exception
    {
        public NotFoundException(string message) : base(message)
        {
        }

        public NotFoundException(string name, object key) : base($"Entity \"{name}\" ({key}) was not found")
        {            
        }
    }
}
```

## docker-compose.dcproj

```text
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="15.0" Sdk="Microsoft.Docker.Sdk">
  <PropertyGroup Label="Globals">
    <ProjectVersion>2.1</ProjectVersion>
    <DockerTargetOS>Linux</DockerTargetOS>
    <ProjectGuid>81dded9d-158b-e303-5f62-77a2896d2a5a</ProjectGuid>
    <DockerLaunchAction>LaunchBrowser</DockerLaunchAction>
    <DockerServiceUrl>{Scheme}://localhost:{ServicePort}</DockerServiceUrl>
    <DockerServiceName>catalogapi</DockerServiceName>
  </PropertyGroup>
  <ItemGroup>
    <None Include="docker-compose.override.yml">
      <DependentUpon>docker-compose.yml</DependentUpon>
    </None>
    <None Include="docker-compose.yml" />
    <None Include=".dockerignore" />
  </ItemGroup>
</Project>
```

## docker-compose.override.yml

```yaml
services:
  catalogdb:
    container_name: catalogdb
    environment:
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=postgres
      - POSTGRES_DB=CatalogDb
    restart: always
    ports:
        - "5432:5432"
    volumes:
      - postgres_catalog:/var/lib/postgresql
  catalogapi:
    container_name: catalogAPI
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_HTTP_PORTS=8080
      - ASPNETCORE_HTTPS_PORTS=8081
      - ConnectionStrings__Database=Server=catalogdb;Port=5432;Database=CatalogDb;User Id=postgres;Password=postgres;Include Error Detail=true

    depends_on : 
      - catalogdb
    ports:
      - "6000:8080"
      - "6060:8081"
    volumes:
      - ${APPDATA}/Microsoft/UserSecrets:/home/app/.microsoft/usersecrets:ro
      - ${APPDATA}/Microsoft/UserSecrets:/root/.microsoft/usersecrets:ro
      - ${APPDATA}/ASP.NET/Https:/home/app/.aspnet/https:ro
      - ${APPDATA}/ASP.NET/Https:/root/.aspnet/https:ro
```

## docker-compose.yml

```yaml
services:
  catalogdb:
    image: postgres:18

  catalogapi:
    image: ${DOCKER_REGISTRY-}catalogapi
    build:
      context: .
      dockerfile: services/catalog/CatalogAPI/Dockerfile

volumes:
  postgres_catalog:
```

## eshop-microservices.slnx

```text
<Solution>
  <Folder Name="/BuildingBlocks/">
    <Project Path="BuildingBlocks/BuildingBlocks/BuildingBlocks.csproj" Id="112a7f28-2867-4205-9e20-d1bc528322fd" />
  </Folder>
  <Folder Name="/services/" />
  <Folder Name="/services/catalog/">
    <Project Path="services/catalog/CatalogAPI/CatalogAPI.csproj" Id="02a84898-7da2-4c0f-849c-ac660cdd71fc" />
  </Folder>
  <Project Path="docker-compose.dcproj">
    <Build />
  </Project>
</Solution>
```

## launchSettings.json

```json
{
  "profiles": {
    "Docker Compose": {
      "commandName": "DockerCompose",
      "commandVersion": "1.0",
      "serviceActions": {
        "catalogapi": "StartDebugging"
      }
    }
  }
}
```

## obj/Debug/docker-c.35A3FFBA.Up2Date

```text

```

## obj/Debug/docker-compose.dcproj.FileListAbsolute.txt

```text
C:\Users\Premal Kadam\Documents\Learnings\.NET 8 Microservices DDD, CQRS, VerticalClean Architecture\EShopMicroservices\src\obj\Debug\docker-compose.dcproj.CoreCompileInputs.cache
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\CatalogAPI.deps.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\CatalogAPI.runtimeconfig.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\appsettings.Development.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\appsettings.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\CatalogAPI.staticwebassets.endpoints.json
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\CatalogAPI.exe
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\CatalogAPI.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\MediatR.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Marten.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Carter.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\BuildingBlocks.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\MediatR.Contracts.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\FluentValidation.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\FluentValidation.DependencyInjectionExtensions.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\HealthChecks.NpgSql.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Npgsql.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\HealthChecks.UI.Client.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Mapster.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.IdentityModel.Tokens.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.IdentityModel.JsonWebTokens.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\JasperFx.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\JasperFx.Events.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Weasel.Postgresql.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Weasel.Core.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Polly.Core.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Newtonsoft.Json.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\FSharp.Core.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\JasperFx.RuntimeCompiler.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\FastExpressionCompiler.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.Extensions.DependencyModel.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\HealthChecks.UI.Core.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Mapster.Core.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.IdentityModel.Logging.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.IdentityModel.Abstractions.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Spectre.Console.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\DistributedLock.Postgres.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\NetTopologySuite.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.CodeAnalysis.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\Microsoft.CodeAnalysis.CSharp.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\DistributedLock.Core.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\CatalogAPI.pdb
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\BuildingBlocks.pdb
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\cs\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\de\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\es\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\fr\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\it\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ja\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ko\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\pl\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\pt-BR\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ru\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\tr\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\zh-Hans\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\zh-Hant\FSharp.Core.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\cs\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\de\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\es\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\fr\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\it\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ja\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ko\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\pl\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\pt-BR\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ru\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\tr\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\zh-Hans\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\zh-Hant\Microsoft.CodeAnalysis.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\cs\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\de\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\es\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\fr\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\it\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ja\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ko\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\pl\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\pt-BR\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\ru\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\tr\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\zh-Hans\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\bin\Debug\zh-Hant\Microsoft.CodeAnalysis.CSharp.resources.dll
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\obj\Debug\docker-compose.dcproj.AssemblyReference.cache
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\obj\Debug\docker-compose.dcproj.CoreCompileInputs.cache
C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\obj\Debug\docker-c.35A3FFBA.Up2Date
```

## obj/Docker/docker-compose.vs.debug.g.yml

```yaml
services:
  catalogapi:
    image: catalogapi:dev
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      target: base
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "CatalogAPI"
    environment:
      - DOTNET_USE_POLLING_FILE_WATCHER=1
      - ASPNETCORE_LOGGING__CONSOLE__DISABLECOLORS=true
      - NUGET_FALLBACK_PACKAGES=/.nuget/fallbackpackages
    volumes:
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\services\catalog\CatalogAPI:/app:rw
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src:/src:rw
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\.nuget\packages:/.nuget/packages:ro
      - C:\Program Files (x86)\Microsoft Visual Studio\Shared\NuGetPackages:/.nuget/fallbackpackages:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/bin/Debug/net10.0/CatalogAPI.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
    tty: true
```

## obj/Docker/docker-compose.vs.debug.partial.g.yml

```yaml
services:
  catalogapi:
    image: catalogapi:dev
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      target: base
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "CatalogAPI"
    environment:
      - DOTNET_USE_POLLING_FILE_WATCHER=1
      - ASPNETCORE_LOGGING__CONSOLE__DISABLECOLORS=true
      - NUGET_FALLBACK_PACKAGES=/.nuget/fallbackpackages
    volumes:
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src\services\catalog\CatalogAPI:/app:rw
      - C:\Users\Premal Kadam\Documents\Learnings\.NET_8_Microservices_DDD_CQRS_VerticalClean_Architecture\EShopMicroservices\src:/src:rw
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\.nuget\packages:/.nuget/packages:ro
      - C:\Program Files (x86)\Microsoft Visual Studio\Shared\NuGetPackages:/.nuget/fallbackpackages:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/bin/Debug/net10.0/CatalogAPI.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
    tty: true
```

## obj/Docker/docker-compose.vs.release.g.yml

```yaml
services:
  catalogapi:
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "CatalogAPI"
    volumes:
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/CatalogAPI.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
      com.microsoft.visual-studio.project-name: "CatalogAPI"
    tty: true
```

## obj/Docker/docker-compose.vs.release.partial.g.yml

```yaml
services:
  catalogapi:
    build:
      args:
        LAUNCHING_FROM_VS: true
        BUILD_CONFIGURATION: Debug
      labels:
        com.microsoft.created-by: "visual-studio"
        com.microsoft.visual-studio.project-name: "CatalogAPI"
    volumes:
      - C:\Users\Premal Kadam\vsdbg\vs2017u5:/remote_debugger:rw
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\ASP.NET\Https:/home/app/.aspnet/https:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
      - C:\Users\Premal Kadam\AppData\Roaming\Microsoft\UserSecrets:/home/app/.microsoft/usersecrets:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\MSBuild\Sdks\Microsoft.Docker.Sdk\tools\linux-x64\net6.0:/VSTools:ro
      - C:\Program Files\Microsoft Visual Studio\18\Insiders\Common7\IDE\extensions\Microsoft\managedprojectsystem\HotReload:/HotReloadAgent:ro

    entrypoint: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --wait"
    labels:
      com.microsoft.visualstudio.debuggee.program: "dotnet"
      com.microsoft.visualstudio.debuggee.arguments: " --additionalProbingPath /.nuget/packages --additionalProbingPath /.nuget/fallbackpackages  \"/app/CatalogAPI.dll\""
      com.microsoft.visualstudio.debuggee.workingdirectory: "/app"
      com.microsoft.visualstudio.debuggee.killprogram: "dotnet --roll-forward Major /VSTools/DistrolessHelper/DistrolessHelper.dll --stop dotnet"
      com.microsoft.visual-studio.project-name: "CatalogAPI"
    tty: true
```

## Services/Catalog/CatalogAPI/appsettings.Development.json

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  }
}
```

## Services/Catalog/CatalogAPI/appsettings.json

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "ConnectionStrings": {
    "Database": "Server=localhost;Port=5432;Database=CatalogDb;User Id=postgres;Password=postgres;Include Error Detail=true"
  }
}
```

## Services/Catalog/CatalogAPI/CatalogAPI.csproj

```text
﻿<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
    <UserSecretsId>04322684-be3b-4895-8ce8-5e3f1f8ad396</UserSecretsId>
    <DockerDefaultTargetOS>Linux</DockerDefaultTargetOS>
    <DockerfileContext>..\..\..</DockerfileContext>
    <DockerComposeProjectPath>..\..\..\docker-compose.dcproj</DockerComposeProjectPath>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="AspNetCore.HealthChecks.NpgSql" Version="9.0.0" />
    <PackageReference Include="AspNetCore.HealthChecks.UI.Client" Version="9.0.0" />
    <PackageReference Include="Carter" Version="10.0.0" />
    <PackageReference Include="Marten" Version="8.17.0" />
    <PackageReference Include="Microsoft.VisualStudio.Azure.Containers.Tools.Targets" Version="1.23.0" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\..\..\BuildingBlocks\BuildingBlocks\BuildingBlocks.csproj" />
  </ItemGroup>

</Project>
```

## Services/Catalog/CatalogAPI/Data/CatalogInitialData.cs

```text
﻿
namespace CatalogAPI.Data
{
    public class CatalogInitialData : IInitialData
    {
        public async Task Populate(IDocumentStore store, CancellationToken cancellation)
        {
            using var session = store.LightweightSession();

            if (await session.Query<Product>().AnyAsync())
                return;

            session.Store(GetPreconfiguredProducts());
            await session.SaveChangesAsync();
        }

        private static IEnumerable<Product> GetPreconfiguredProducts() => new List<Product>()
            {
                new Product()
                {
                    Id = new Guid("5334c996-8457-4cf0-815c-ed2b77c4ff61"),
                    Name = "IPhone X",
                    Description = "This phone is the company's biggest change to its flagship smartphone in years. It includes a borderless.",
                    ImageFile = "product-1.png",
                    Price = 950.00M,
                    Category = new List<string> { "Smart Phone" }
                },
                new Product()
                {
                    Id = new Guid("c67d6323-e8b1-4bdf-9a75-b0d0d2e7e914"),
                    Name = "Samsung 10",
                    Description = "This phone is the company's biggest change to its flagship smartphone in years. It includes a borderless.",
                    ImageFile = "product-2.png",
                    Price = 840.00M,
                    Category = new List<string> { "Smart Phone" }
                },
                new Product()
                {
                    Id = new Guid("4f136e9f-ff8c-4c1f-9a33-d12f689bdab8"),
                    Name = "Huawei Plus",
                    Description = "This phone is the company's biggest change to its flagship smartphone in years. It includes a borderless.",
                    ImageFile = "product-3.png",
                    Price = 650.00M,
                    Category = new List<string> { "White Appliances" }
                },
                new Product()
                {
                    Id = new Guid("6ec1297b-ec0a-4aa1-be25-6726e3b51a27"),
                    Name = "Xiaomi Mi 9",
                    Description = "This phone is the company's biggest change to its flagship smartphone in years. It includes a borderless.",
                    ImageFile = "product-4.png",
                    Price = 470.00M,
                    Category = new List<string> { "White Appliances" }
                },
                new Product()
                {
                    Id = new Guid("b786103d-c621-4f5a-b498-23452610f88c"),
                    Name = "HTC U11+ Plus",
                    Description = "This phone is the company's biggest change to its flagship smartphone in years. It includes a borderless.",
                    ImageFile = "product-5.png",
                    Price = 380.00M,
                    Category = new List<string> { "Smart Phone" }
                },
                new Product()
                {
                    Id = new Guid("c4bbc4a2-4555-45d8-97cc-2a99b2167bff"),
                    Name = "LG G7 ThinQ",
                    Description = "This phone is the company's biggest change to its flagship smartphone in years. It includes a borderless.",
                    ImageFile = "product-6.png",
                    Price = 240.00M,
                    Category = new List<string> { "Home Kitchen" }
                },
                new Product()
                {
                    Id = new Guid("93170c85-7795-489c-8e8f-7dcf3b4f4188"),
                    Name = "Panasonic Lumix",
                    Description = "This phone is the company's biggest change to its flagship smartphone in years. It includes a borderless.",
                    ImageFile = "product-6.png",
                    Price = 240.00M,
                    Category = new List<string> { "Camera" }
                }
            };
    }
}
```

## Services/Catalog/CatalogAPI/Dockerfile

```text
# See https://aka.ms/customizecontainer to learn how to customize your debug container and how Visual Studio uses this Dockerfile to build your images for faster debugging.

# This stage is used when running from VS in fast mode (Default for Debug configuration)
FROM mcr.microsoft.com/dotnet/aspnet:10.0 AS base
USER $APP_UID
WORKDIR /app
EXPOSE 8080
EXPOSE 8081


# This stage is used to build the service project
FROM mcr.microsoft.com/dotnet/sdk:10.0 AS build
ARG BUILD_CONFIGURATION=Release
WORKDIR /src
COPY ["services/catalog/CatalogAPI/CatalogAPI.csproj", "services/catalog/CatalogAPI/"]
COPY ["BuildingBlocks/BuildingBlocks/BuildingBlocks.csproj", "BuildingBlocks/BuildingBlocks/"]
RUN dotnet restore "./services/catalog/CatalogAPI/CatalogAPI.csproj"
COPY . .
WORKDIR "/src/services/catalog/CatalogAPI"
RUN dotnet build "./CatalogAPI.csproj" -c $BUILD_CONFIGURATION -o /app/build

# This stage is used to publish the service project to be copied to the final stage
FROM build AS publish
ARG BUILD_CONFIGURATION=Release
RUN dotnet publish "./CatalogAPI.csproj" -c $BUILD_CONFIGURATION -o /app/publish /p:UseAppHost=false

# This stage is used in production or when running from VS in regular mode (Default when not using the Debug configuration)
FROM base AS final
WORKDIR /app
COPY --from=publish /app/publish .
ENTRYPOINT ["dotnet", "CatalogAPI.dll"]
```

## Services/Catalog/CatalogAPI/Dockerfile.original

```text
# See https://aka.ms/customizecontainer to learn how to customize your debug container and how Visual Studio uses this Dockerfile to build your images for faster debugging.

# This stage is used when running from VS in fast mode (Default for Debug configuration)
FROM mcr.microsoft.com/dotnet/aspnet:10.0 AS base
USER $APP_UID
WORKDIR /app
EXPOSE 8080
EXPOSE 8081


# This stage is used to build the service project
FROM mcr.microsoft.com/dotnet/sdk:10.0 AS build
ARG BUILD_CONFIGURATION=Release
WORKDIR /src
COPY ["services/catalog/CatalogAPI/CatalogAPI.csproj", "services/catalog/CatalogAPI/"]
RUN dotnet restore "./services/catalog/CatalogAPI/CatalogAPI.csproj"
COPY . .
WORKDIR "/src/services/catalog/CatalogAPI"
RUN dotnet build "./CatalogAPI.csproj" -c $BUILD_CONFIGURATION -o /app/build

# This stage is used to publish the service project to be copied to the final stage
FROM build AS publish
ARG BUILD_CONFIGURATION=Release
RUN dotnet publish "./CatalogAPI.csproj" -c $BUILD_CONFIGURATION -o /app/publish /p:UseAppHost=false

# This stage is used in production or when running from VS in regular mode (Default when not using the Debug configuration)
FROM base AS final
WORKDIR /app
COPY --from=publish /app/publish .
ENTRYPOINT ["dotnet", "CatalogAPI.dll"]
```

## Services/Catalog/CatalogAPI/Exceptions/ProductNotFoundException.cs

```text
﻿using BuildingBlocks.Exceptions;

namespace CatalogAPI.Exceptions
{
    public class ProductNotFoundException : NotFoundException
    {
        public ProductNotFoundException(Guid Id) : base("Product", Id) { }
    }
}
```

## Services/Catalog/CatalogAPI/GlobalUsings.cs

```text
﻿global using Carter;
global using Mapster;
global using MediatR;
global using BuildingBlocks.CQRS;
global using CatalogAPI.Models;
global using Marten;
global using FluentValidation;
global using CatalogAPI.Exceptions;
global using BuildingBlocks.Behaviours;
global using BuildingBlocks.Exceptions.Handler;
global using Marten.Schema;
global using Marten.Pagination;
global using CatalogAPI.Data;
global using HealthChecks.UI.Client;
```

## Services/Catalog/CatalogAPI/Models/Product.cs

```text
﻿namespace CatalogAPI.Models
{
    public class Product
    {
        public Guid Id { get; set; }
        public string Name { get; set; } = default!;
        public string Description { get; set; } = default!;
        public decimal Price { get; set; }
        public List<string> Category { get; set; } = new();
        public string ImageFile { get; set; } = default!;


    }
}
```

## Services/Catalog/CatalogAPI/Products/CreateProduct/CreateProductEndpoint.cs

```text
﻿namespace CatalogAPI.Products.CreateProduct
{
    public record CreateProductRequest(string Name, List<string> Category, string Description, string ImageFile, decimal Price);
    public record CreateProductResponse(Guid Id);
    public class UpdateProductEndpoint : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapPost("/products", async (CreateProductRequest request, ISender sender) =>
            {
                var command = request.Adapt<CreateProductCommand>();
                var result = await sender.Send(command);
                var response = result.Adapt<CreateProductResponse>();
                return Results.Created($"/products/{response.Id}", response);
            })
            .WithName("CreateProduct")
            .Produces<CreateProductResponse>(StatusCodes.Status201Created)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .WithSummary("Create Product")
            .WithDescription("Create Product");
        }
    }
}
```

## Services/Catalog/CatalogAPI/Products/CreateProduct/CreateProductHandler.cs

```text
﻿namespace CatalogAPI.Products.CreateProduct
{
    public record CreateProductCommand(string Name, List<string> category, string Description, string ImageFile, decimal Price)
        : ICommand<CreateProductResult>;
    public record CreateProductResult(Guid Id);

    public class CreateProductCommandValidator : AbstractValidator<CreateProductCommand>
    {
        public CreateProductCommandValidator()
        {
            RuleFor(x => x.Name).NotEmpty().WithMessage("Name is required");
            RuleFor(x => x.category).NotEmpty().WithMessage("Category is required");
            RuleFor(x => x.ImageFile).NotEmpty().WithMessage("ImageFile is required");
            RuleFor(x => x.Price).GreaterThan(0).WithMessage("Price must be greater than zero");
        }
    }

    internal class CreateProductCommandHandler(IDocumentSession session)
        : ICommandHandler<CreateProductCommand, CreateProductResult>
    {
        public async Task<CreateProductResult> Handle(CreateProductCommand command, CancellationToken cancellationToken)
        {
            //create a product entity from command object
            //save to database
            //return CreateProductResult

            var product = new Product
            {
                Name = command.Name,
                Category = command.category,
                Description = command.Description,
                ImageFile = command.ImageFile,
                Price = command.Price
            };

            session.Store(product);
            await session.SaveChangesAsync(cancellationToken);

            return new CreateProductResult(product.Id);
        }
    }
}
```

## Services/Catalog/CatalogAPI/Products/DeleteProduct/DeleteProductEndpoint.cs

```text
﻿namespace CatalogAPI.Products.DeleteProduct
{
    public record DeleteProductResponse(bool IsSuccess);
    public class DeleteProductEndpoint : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapDelete("/products/{id}", async (Guid id, ISender sender) =>
            {
                var result = await sender.Send(new DeleteProductCommand(id));
                var response = result.Adapt<DeleteProductResponse>();
                return Results.Ok(response);
            })
            .WithName("DeleteProduct")
            .Produces<DeleteProductResponse>(StatusCodes.Status200OK)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .ProducesProblem(StatusCodes.Status404NotFound)
            .WithSummary("Delete Product")
            .WithDescription("Delete Product");
        }
    }
}
```

## Services/Catalog/CatalogAPI/Products/DeleteProduct/DeleteProductHandler.cs

```text
﻿namespace CatalogAPI.Products.DeleteProduct
{
    public record DeleteProductCommand(Guid Id)
        : ICommand<DeleteProductResult>;
    public record DeleteProductResult(bool IsSuccess);

    public class DeleteCommandValidator : AbstractValidator<DeleteProductCommand>
    {
        public DeleteCommandValidator()
        {
            RuleFor(c => c.Id).NotEmpty().WithMessage("Product ID is required");
        }
    }
    public class DeleteProductCommandHandler(IDocumentSession session)
        : ICommandHandler<DeleteProductCommand, DeleteProductResult>
    {
        public async Task<DeleteProductResult> Handle(DeleteProductCommand command, CancellationToken cancellationToken)
        {
            var product = session.Query<Product>().SingleOrDefault(x => x.Id == command.Id);
            if (product is null)
            {
                throw new ProductNotFoundException(command.Id);
            }
            session.Delete<Product>(product.Id);
            await session.SaveChangesAsync(cancellationToken);

            return new DeleteProductResult(true);
        }
    }
}
```

## Services/Catalog/CatalogAPI/Products/GetProductByCategory/GetProductByCategoryEndpoint.cs

```text
﻿namespace CatalogAPI.Products.GetProductByCategory
{
    public record GetProductByCategoryResponse(IEnumerable<Product> Products);
    public class GetProductByCategoryEndpoint : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapGet("/products/category/{category}", async (ISender sender, string category) =>
            {
                var result = await sender.Send(new GetProductByCategoryQuery(category));
                var response = result.Adapt<GetProductByCategoryResponse>();
                return Results.Ok(response);
            })
            .WithName("GetProductByCategory")
            .Produces<GetProductByCategoryResponse>(StatusCodes.Status200OK)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .WithSummary("Get Product By Category")
            .WithDescription("Get Product By Category");
        }
    }
}
```

## Services/Catalog/CatalogAPI/Products/GetProductByCategory/GetProductByCategoryHandler.cs

```text
﻿namespace CatalogAPI.Products.GetProductByCategory
{
    public record GetProductByCategoryQuery(string Category)
        : IQuery<GetProductByCategoryResult>;
    public record GetProductByCategoryResult(IEnumerable<Product> Products);

    internal class GetProductByCategoryQueryHandler
        (IDocumentSession session)
        : IQueryHandler<GetProductByCategoryQuery, GetProductByCategoryResult>
    {
        public async Task<GetProductByCategoryResult> Handle(GetProductByCategoryQuery query, CancellationToken cancellationToken)
        {
            var products = await session.Query<Product>()
                                        .Where(p => p.Category.Contains(query.Category))
                                        .ToListAsync();
            return new GetProductByCategoryResult(products);
        }
    }
}
```

## Services/Catalog/CatalogAPI/Products/GetProductById/GetProductByIdEndpoint.cs

```text
﻿namespace CatalogAPI.Products.GetProductById
{
    public record GetProductByIdResponse(Product Product);
    public class GetProductByCategoryEndpoint : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapGet("/products/{id}", async (ISender sender, Guid id) =>
            {
                var result = await sender.Send(new GetProductByIdQuery(id));
                var response = result.Adapt<GetProductByIdResponse>();
                return Results.Ok(response);                
            })
            .WithName("GetProductById")
            .Produces<GetProductByIdResponse>(StatusCodes.Status200OK)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .WithSummary("Get Product By Id")
            .WithDescription("Get Product By Id");
        }
    }
}
```

## Services/Catalog/CatalogAPI/Products/GetProductById/GetProductByIdHandler.cs

```text
﻿namespace CatalogAPI.Products.GetProductById
{
    public record GetProductByIdQuery(Guid id)
        : IQuery<GetProductByIdResult>;
    public record GetProductByIdResult(Product Product);

    internal class GetProductByIdQueryHandler
        (IDocumentSession session)
        : IQueryHandler<GetProductByIdQuery, GetProductByIdResult>
    {
        public async Task<GetProductByIdResult> Handle(GetProductByIdQuery query, CancellationToken cancellationToken)
        {
            var product = await session.Query<Product>().FirstOrDefaultAsync(p => p.Id == query.id, cancellationToken);
            if (product is null) throw new ProductNotFoundException(query.id);
            return new GetProductByIdResult(product!);
        }
    }
}
```

## Services/Catalog/CatalogAPI/Products/GetProducts/GetProductsEndpoint.cs

```text
﻿namespace CatalogAPI.Products.GetProducts
{
    public record GetProductsRequest(int? PageNumber = 1, int? PageSize = 10);
    public record GetProductsResponse(IEnumerable<Product> Products);
    public class GetProductByIdEndpoint : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapGet("/products", async ([AsParameters] GetProductsRequest request,ISender sender) =>
            {
                var query = request.Adapt<GetProductsQuery>();
                var result = await sender.Send(query);
                var response = result.Adapt<GetProductsResponse>();
                return Results.Ok(response);
            })
            .WithName("GetProducts")
            .Produces<GetProductsResponse>(StatusCodes.Status200OK)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .WithSummary("Get Products")
            .WithDescription("Get Products");
        }
    }
}
```

## Services/Catalog/CatalogAPI/Products/GetProducts/GetProductsHandler.cs

```text
﻿namespace CatalogAPI.Products.GetProducts
{
    public record GetProductsQuery(int? PageNumber = 1, int? PageSize = 10)
        : IQuery<GetProductsResult>;
    public record GetProductsResult(IEnumerable<Product> Products);

    internal class GetProductsQueryHandler
        (IDocumentSession session)
        : IQueryHandler<GetProductsQuery, GetProductsResult>
    {
        public async Task<GetProductsResult> Handle(GetProductsQuery query, CancellationToken cancellationToken)
        {
            var products = await session.Query<Product>()
                                        .ToPagedListAsync(query.PageNumber ?? 1, query.PageSize ?? 10, cancellationToken);

            return new GetProductsResult(products);
        }
    }
}
```

## Services/Catalog/CatalogAPI/Products/UpadateProduct/UpdateProductEndpoint.cs

```text
﻿namespace CatalogAPI.Products.UpdateProduct
{
    public record UpdateProductRequest(Guid Id, string Name, List<string> Category, string Description, string ImageFile, decimal Price);
    public record UpdateProductResponse(bool IsSuccess);
    public class DeleteProductEndpoint : ICarterModule
    {
        public void AddRoutes(IEndpointRouteBuilder app)
        {
            app.MapPut("/products", async (UpdateProductRequest request, ISender sender) =>
            {
                var command = request.Adapt<UpdateProductCommand>();
                var result = await sender.Send(command);
                var response = result.Adapt<UpdateProductResponse>();
                return Results.Ok(response);
            })
            .WithName("UpdateProduct")
            .Produces<UpdateProductResponse>(StatusCodes.Status200OK)
            .ProducesProblem(StatusCodes.Status400BadRequest)
            .ProducesProblem(StatusCodes.Status404NotFound)
            .WithSummary("Update Product")
            .WithDescription("Update Product");
        }
    }
}
```

## Services/Catalog/CatalogAPI/Products/UpadateProduct/UpdateProductHandler.cs

```text
﻿namespace CatalogAPI.Products.UpdateProduct
{
    public record UpdateProductCommand(Guid Id,string Name, List<string> category, string Description, string ImageFile, decimal Price)
        : ICommand<UpdateProductResult>;
    public record UpdateProductResult(bool IsSuccess);

    public class UpdateProductCommandValidator : AbstractValidator<UpdateProductCommand>
    {
        public UpdateProductCommandValidator()
        {
            RuleFor(c => c.Id).NotEmpty().WithMessage("Product ID is required");
            RuleFor(c => c.Name).NotEmpty().WithMessage("Name is required")
                                .Length(2, 150).WithMessage("Name must be between 2 and 150 characters");

            RuleFor(c => c.Price).GreaterThan(0).WithMessage("Price must be greater than 0");        
        }
    }

    internal class UpdateProductCommandHandler(IDocumentSession session)
        : ICommandHandler<UpdateProductCommand, UpdateProductResult>
    {
        public async Task<UpdateProductResult> Handle(UpdateProductCommand command, CancellationToken cancellationToken)
        {
            var product = await session.Query<Product>()
                .FirstOrDefaultAsync(p => p.Id == command.Id, cancellationToken);
            if (product is null)
                throw new ProductNotFoundException(command.Id);

            product.Name = command.Name;
            product.Category = command.category;
            product.Description = command.Description;
            product.ImageFile = command.ImageFile;
            product.Price = command.Price;

            session.Update(product);
            await session.SaveChangesAsync(cancellationToken);

            return new UpdateProductResult(true);
        }
    }
}
```

## Services/Catalog/CatalogAPI/Program.cs

```text
var builder = WebApplication.CreateBuilder(args);

// Add services to the container.
var assembly = typeof(Program).Assembly;
builder.Services.AddMediatR(config =>
{
    config.RegisterServicesFromAssembly(assembly);
    config.AddOpenBehavior(typeof(ValidationBehaviour<,>));
    config.AddOpenBehavior(typeof(LoggingBehaviour<,>));
});

builder.Services.AddValidatorsFromAssembly(assembly);

builder.Services.AddCarter();

builder.Services.AddMarten(options =>
{
    options.Connection(builder.Configuration.GetConnectionString("Database")!);
}).UseLightweightSessions();

if(builder.Environment.IsDevelopment())
{
    builder.Services.InitializeMartenWith<CatalogInitialData>();
}

builder.Services.AddExceptionHandler<CustomExceptionHandler>();

//adding health checks
builder.Services.AddHealthChecks()
       .AddNpgSql(builder.Configuration.GetConnectionString("Database")!);

var app = builder.Build();

//Configure the HTTP request pipeline.
app.UseExceptionHandler(options => { });

app.MapCarter();

app.UseHealthChecks("/health",
    new Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckOptions
    {
        ResponseWriter = UIResponseWriter.WriteHealthCheckUIResponse
    });

app.Run();
```

## Services/Catalog/CatalogAPI/Properties/launchSettings.json

```json
{
  "profiles": {
    "http": {
      "commandName": "Project",
      "launchBrowser": true,
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      },
      "dotnetRunMessages": true,
      "applicationUrl": "http://localhost:5000"
    },
    "https": {
      "commandName": "Project",
      "launchBrowser": true,
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      },
      "dotnetRunMessages": true,
      "applicationUrl": "https://localhost:5050;http://localhost:5000"
    },
    "Container (Dockerfile)": {
      "commandName": "Docker",
      "launchBrowser": true,
      "launchUrl": "{Scheme}://{ServiceHost}:{ServicePort}",
      "environmentVariables": {
        "ASPNETCORE_HTTPS_PORTS": "8081",
        "ASPNETCORE_HTTP_PORTS": "8080"
      },
      "publishAllPorts": true,
      "useSSL": true
    }
  },
  "$schema": "https://json.schemastore.org/launchsettings.json"
}
```

## Statistics

- Total Files: 50
- Total Characters: 106436
- Total Tokens: 0
